import{a as j,t as C,c as ot,n as K}from"../chunks/disclose-version.hMHIZg6P.js";import{x as Wt,h as Gt,k as U,B as pt,C as Zt,M as Jt,ai as Pt,P as Kt,Q as Et,R as xt,l as st,ar as vt,N as Ut,i as Vt,O as Qt,an as te,z as Ft,as as wt,at as Lt,au as yt,av as ee,a4 as se,G as Tt,aw as ae,ah as re,ax as le,j as ne,ay as Ot,y as oe,ae as ie,a9 as ce,az as de,ac as ue,aA as ve,aB as he,L as Mt,aC as fe,aD as me,am as pe,p as R,I as L,g as c,t as H,o as q,aE as at,q as x,w as b,v as p,aq as $,m as J,aF as gt,f as Bt}from"../chunks/runtime.CRRexT0-.js";import{i as tt}from"../chunks/lifecycle.CZQhGp_M.js";import{b as et,o as Q,i as O,a as X,p as rt,s as xe}from"../chunks/index-client.DViTJR_y.js";import{a as Y,d as ct,s as ht,b as it}from"../chunks/store.B7Og_QSg.js";import{w as ft}from"../chunks/index.CkCIRN9G.js";let _t=null;function jt(a,t){return t}function ge(a,t,e,s){for(var r=[],n=t.length,l=0;l<n;l++)ae(t[l].e,r,!0);var o=n>0&&r.length===0&&e!==null;if(o){var i=e.parentNode;re(i),i.append(e),s.clear(),G(a,t[0].prev,t[n-1].next)}le(r,()=>{for(var d=0;d<n;d++){var v=t[d];o||(s.delete(v.k),G(a,v.prev,v.next)),ne(v.e,!o)}})}function mt(a,t,e,s,r,n=null){var l=a,o={flags:t,items:new Map,first:null},i=(t&Ot)!==0;if(i){var d=a;l=U?pt(oe(d)):d.appendChild(Wt())}U&&Zt();var v=null,k=!1;Gt(()=>{var h=e(),y=Jt(h)?h:h==null?[]:Pt(h),m=y.length;if(k&&m===0)return;k=m===0;let M=!1;if(U){var _=l.data===Kt;_!==(m===0)&&(l=Et(),pt(l),xt(!1),M=!0)}if(U){for(var z=null,E,D=0;D<m;D++){if(st.nodeType===8&&st.data===ie){l=st,M=!0,xt(!1);break}var u=y[D],f=s(u,D);E=Yt(st,o,z,null,u,f,D,r,t),o.items.set(f,E),z=E}m>0&&pt(Et())}if(!U){var A=ce;_e(y,o,l,r,t,(A.f&vt)!==0,s)}n!==null&&(m===0?v?Ut(v):v=Vt(()=>n(l)):v!==null&&Qt(v,()=>{v=null})),M&&xt(!0),e()}),U&&(l=st)}function _e(a,t,e,s,r,n,l){var T,B,N,ut;var o=(r&de)!==0,i=(r&(wt|yt))!==0,d=a.length,v=t.items,k=t.first,h=k,y,m=null,M,_=[],z=[],E,D,u,f;if(o)for(f=0;f<d;f+=1)E=a[f],D=l(E,f),u=v.get(D),u!==void 0&&((T=u.a)==null||T.measure(),(M??(M=new Set)).add(u));for(f=0;f<d;f+=1){if(E=a[f],D=l(E,f),u=v.get(D),u===void 0){var A=h?h.e.nodes_start:e;m=Yt(A,t,m,m===null?t.first:m.next,E,D,f,s,r),v.set(D,m),_=[],z=[],h=m.next;continue}if(i&&ke(u,E,f,r),u.e.f&vt&&(Ut(u.e),o&&((B=u.a)==null||B.unfix(),(M??(M=new Set)).delete(u))),u!==h){if(y!==void 0&&y.has(u)){if(_.length<z.length){var P=z[0],I;m=P.prev;var dt=_[0],w=_[_.length-1];for(I=0;I<_.length;I+=1)Dt(_[I],P,e);for(I=0;I<z.length;I+=1)y.delete(z[I]);G(t,dt.prev,w.next),G(t,m,dt),G(t,w,P),h=P,m=w,f-=1,_=[],z=[]}else y.delete(u),Dt(u,h,e),G(t,u.prev,u.next),G(t,u,m===null?t.first:m.next),G(t,m,u),m=u;continue}for(_=[],z=[];h!==null&&h.k!==D;)(n||!(h.e.f&vt))&&(y??(y=new Set)).add(h),z.push(h),h=h.next;if(h===null)continue;u=h}_.push(u),m=u,h=u.next}if(h!==null||y!==void 0){for(var g=y===void 0?[]:Pt(y);h!==null;)(n||!(h.e.f&vt))&&g.push(h),h=h.next;var F=g.length;if(F>0){var S=r&Ot&&d===0?e:null;if(o){for(f=0;f<F;f+=1)(N=g[f].a)==null||N.measure();for(f=0;f<F;f+=1)(ut=g[f].a)==null||ut.fix()}ge(t,g,S,v)}}o&&te(()=>{var zt;if(M!==void 0)for(u of M)(zt=u.a)==null||zt.apply()}),Ft.first=t.first&&t.first.e,Ft.last=m&&m.e}function ke(a,t,e,s){s&wt&&Lt(a.v,t),s&yt?Lt(a.i,e):a.i=e}function Yt(a,t,e,s,r,n,l,o,i){var d=_t;try{var v=(i&wt)!==0,k=(i&ee)===0,h=v?k?se(r):Tt(r):r,y=i&yt?Tt(l):l,m={i:y,v:h,k:n,a:null,e:null,prev:e,next:s};return _t=m,m.e=Vt(()=>o(a,h,y),U),m.e.prev=e&&e.e,m.e.next=s&&s.e,e===null?t.first=m:(e.next=m,e.e.next=m.e),s!==null&&(s.prev=m,s.e.prev=m.e),m}finally{_t=d}}function Dt(a,t,e){for(var s=a.next?a.next.e.nodes_start:e,r=t?t.e.nodes_start:e,n=a.e.nodes_start;n!==s;){var l=ue(n);r.before(n),n=l}}function G(a,t,e){t===null?a.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}let At=!1;function Ht(){At||(At=!0,document.addEventListener("reset",a=>{Promise.resolve().then(()=>{var t;if(!a.defaultPrevented)for(const e of a.target.elements)(t=e.__on_r)==null||t.call(e)})},{capture:!0}))}function lt(a){if(U){var t=!1,e=()=>{if(!t){if(t=!0,a.hasAttribute("value")){var s=a.value;V(a,"value",null),a.value=s}if(a.hasAttribute("checked")){var r=a.checked;V(a,"checked",null),a.checked=r}}};a.__on_r=e,ve(e),Ht()}}function V(a,t,e,s){var r=a.__attributes??(a.__attributes={});U&&(r[t]=a.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&a.nodeName==="LINK")||r[t]!==(r[t]=e)&&(t==="style"&&"__styles"in a&&(a.__styles={}),t==="loading"&&(a[he]=e),e==null?a.removeAttribute(t):typeof e!="string"&&we(a).includes(t)?a[t]=e:a.setAttribute(t,e))}var St=new Map;function we(a){var t=St.get(a.nodeName);if(t)return t;St.set(a.nodeName,t=[]);for(var e,s=Mt(a),r=Element.prototype;r!==s;){e=fe(s);for(var n in e)e[n].set&&t.push(n);s=Mt(s)}return t}function Rt(a,t){var e=a.__className,s=ye(t);U&&a.className===s?a.__className=s:(e!==s||U&&a.className!==s)&&(t==null?a.removeAttribute("class"):a.className=s,a.__className=s)}function ye(a){return a??""}function je(a,t,e,s=e){a.addEventListener(t,e);const r=a.__on_r;r?a.__on_r=()=>{r(),s()}:a.__on_r=s,Ht()}function nt(a,t,e=t){var s=me();je(a,"input",()=>{var r=Ct(a)?It(a.value):a.value;e(r),s&&r!==(r=t())&&(a.value=r??"")}),pe(()=>{var r=t();if(U&&a.defaultValue!==a.value){e(a.value);return}Ct(a)&&r===It(a.value)||a.type==="date"&&!r&&!a.value||r!==a.value&&(a.value=r??"")})}function Ct(a){var t=a.type;return t==="number"||t==="range"}function It(a){return a===""?null:+a}const bt=ft({x:0,y:0,f:0,deg_x:0,deg_y:0,dx:1,dy:-1,df:1,acc:1e3,spr:8e4,mpa:2e4,minpx:-2e4,maxpx:2e4,mpf:5e3,vx:0,vy:0,va1:100,va2:1500,vf:0,vf1:100,vf2:1500}),Nt=ft([{id:"brightness",name:"Brightness",value:0,minValue:-1,maxValue:1,steps:.01},{id:"contrast",name:"Contrast",value:1,minValue:0,maxValue:32,steps:.1},{id:"saturation",name:"Saturation",value:1,minValue:0,maxValue:32,steps:.1},{id:"sharpness",name:"Sharpness",value:1,minValue:0,maxValue:16,steps:.1}]),kt=ft([]),W=ft({});var be=C('<div id="horizon-wrapper" class="svelte-19kj2zw"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 300"><defs><g id="sphere"><ellipse rx="100" ry="400" fill="none" stroke="#FFF4"></ellipse><ellipse rx="200" ry="400" fill="none" stroke="#FFF4"></ellipse><ellipse rx="300" ry="400" fill="none" stroke="#FFF4"></ellipse><ellipse rx="400" ry="400" fill="none" stroke="#FFF4"></ellipse><ellipse rx="550" ry="400" fill="none" stroke="#FFF4"></ellipse><ellipse rx="800" ry="400" fill="none" stroke="#FFF4"></ellipse></g><linearGradient id="floor" x1="0%" x2="0%" y1="0%" y2="100%"><stop offset="0%" stop-color="#4f3922"></stop><stop offset="15%" stop-color="#785633"></stop></linearGradient></defs><defs><g id="horizon"><g transform="translate(-150,-450)"><rect width="600" height="800" y="-200" fill="#2874b2"></rect><use href="#sphere" transform="translate(300, 600)"></use><use href="#sphere" transform="translate(300, -200)"></use><g transform="translate(300, 200)"><ellipse rx="200" ry="80" fill="#2874b2" stroke="#FFF4"></ellipse><ellipse rx="400" ry=".1" fill="none" stroke="#FFF4"></ellipse><ellipse rx="400" ry="160" fill="none" stroke="#FFF4"></ellipse><ellipse rx="800" ry="240" fill="none" stroke="#FFF4"></ellipse><ellipse rx="1600" ry="320" fill="none" stroke="#FFF4"></ellipse><path d="M0,-200 0,800" fill="none" stroke="#FFF4"></path><circle r="20" fill="#2874b2" stroke="#FFF4"></circle></g><rect width="600" height="800" y="600" fill="url(#floor)"></rect><g transform="translate(300, 1000)"><circle r="10" fill="#A00" stroke="#FFF"></circle><text font-size="8" fill="#FFF" text-anchor="middle" transform="translate(0 3)">You</text></g></g></g></defs><defs><polygon id="focusArrow" points="0,400 180,65 100,65 200,35 300,65 220,65 400,400"></polygon><linearGradient id="focusArrowGradClip" x1="0%" x2="0%" y1="0%" y2="100%"><stop offset="0%" stop-color="#005"></stop><stop offset="50%" stop-color="#039" stop-opacity=".8"></stop><stop offset="100%" stop-color="#07f" stop-opacity=".4"></stop></linearGradient></defs><clipPath id="arrowStripesClip"><polygon points="200,0 -390,400 -370,400 200,0 -350,400 -330,400 200,0 -310,400 -290,400 200,0 -270,400 -250,400 200,0 -230,400 -210,400 200,0 -190,400 -170,400 200,0 -150,400 -130,400 200,0 -110,400 -90,400 200,0 -70,400 -50,400 200,0 -30,400 -10,400 200,0 10,400 30,400 200,0 50,400 70,400 200,0 90,400 110,400 200,0 130,400 150,400 200,0 170,400 190,400 200,0 210,400 230,400 200,0 250,400 270,400 200,0 290,400 310,400 200,0 330,400 350,400 200,0 370,400 390,400 200,0 410,400 430,400 200,0 450,400 470,400 200,0 490,400 510,400 200,0 530,400 550,400 200,0 570,400 590,400 200,0 610,400 630,400 200,0 650,400 670,400 200,0 690,400 710,400 200,0 730,400 750,400 200,0 770,400 790,400"></polygon></clipPath><clipPath id="focusRangeMeterClip"><rect id="focus-range-meter" width="400" height="400" class="svelte-19kj2zw"></rect></clipPath><use id="azimuth-sphere" href="#horizon" class="svelte-19kj2zw"></use><g transform="translate(75 150) scale(0.375)"><use clip-path="url(#focusRangeMeterClip)" href="#focusArrow" fill="url(#focusArrowGradClip)"></use><use clip-path="url(#arrowStripesClip)" href="#focusArrow" fill="rgba(255,255,255,.5)"></use></g><g transform="translate(150 150)"><g id="altitude-visual" class="svelte-19kj2zw"><circle r="1" fill="#FFF"></circle><path d="M-70 0 -10 0 A 10 10 0 0 0 10 0 " fill="none" stroke-width="1.2" stroke="#FFF"></path><text id="altitude-text" text-anchor="middle" transform="translate(-45 -5)" fill="#FFF" font-size="15"> </text></g></g><g transform="translate(150 150)"><path d="M-10 0 A 10 10 0 0 0 10 0 L 70 0" fill="none" stroke-width="1.22" stroke="#FFF"></path><path d="M -4,-87 0,-100 4,-87z" fill="#FFF"></path><text id="azimuth-text" transform="translate(0 -70)" text-anchor="middle" fill="#FFF" font-size="15"> </text></g><g transform="translate(150 -390)"><g id="compass" class="svelte-19kj2zw"><circle r="400" class="grade svelte-19kj2zw" stroke-dasharray="1 5.98131701" stroke-width="20"></circle><circle r="400" class="grade svelte-19kj2zw" stroke-dasharray="1 33.90658504" stroke-width="30"></circle><circle r="400" class="grade svelte-19kj2zw" stroke-dasharray="1 103.71975512" stroke-width="40"></circle><circle r="400" fill="none" stroke-dasharray="1 156.07963268" stroke="#F00" stroke-width="40"></circle><text class="cmp-text svelte-19kj2zw" transform="rotate(0) translate(0 432)">N</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-15) translate(0 432)">15</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-30) translate(0 432)">30</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-45) translate(0 432)">45</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-60) translate(0 432)">60</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-75) translate(0 432)">75</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-90) translate(0 432)">E</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-105) translate(0 432)">105</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-120) translate(0 432)">120</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-135) translate(0 432)">135</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-150) translate(0 432)">150</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-165) translate(0 432)">165</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-180) translate(0 432)">S</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-195) translate(0 432)">195</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-210) translate(0 432)">210</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-225) translate(0 432)">225</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-240) translate(0 432)">240</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-255) translate(0 432)">255</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-270) translate(0 432)">W</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-285) translate(0 432)">285</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-300) translate(0 432)">300</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-315) translate(0 432)">315</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-330) translate(0 432)">330</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-345) translate(0 432)">345</text><text class="cmp-text-sm left svelte-19kj2zw" transform="rotate(0) translate(0 422)">0</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-5) translate(0 422)">5</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-10) translate(0 422)">10</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-20) translate(0 422)">20</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-25) translate(0 422)">25</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-22.5) translate(0 422)">NNE</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-35) translate(0 422)">35</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-40) translate(0 422)">40</text><text class="cmp-text-sm left svelte-19kj2zw" transform="rotate(-45) translate(0 422)">NE</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-50) translate(0 422)">50</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-55) translate(0 422)">55</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-65) translate(0 422)">65</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-70) translate(0 422)">70</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-67.5) translate(0 422)">NEE</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-80) translate(0 422)">80</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-85) translate(0 422)">85</text><text class="cmp-text-sm left svelte-19kj2zw" transform="rotate(-90) translate(0 422)">90</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-95) translate(0 422)">95</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-95) translate(0 422)">95</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-100) translate(0 422)">100</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-110) translate(0 422)">110</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-112.5) translate(0 422)">SEE</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-115) translate(0 422)">115</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-125) translate(0 422)">125</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-130) translate(0 422)">130</text><text class="cmp-text-sm left svelte-19kj2zw" transform="rotate(-135) translate(0 422)">SE</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-140) translate(0 422)">140</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-145) translate(0 422)">145</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-155) translate(0 422)">155</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-157.5) translate(0 422)">SSE</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-160) translate(0 422)">160</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-170) translate(0 422)">170</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-175) translate(0 422)">175</text><text class="cmp-text-sm left svelte-19kj2zw" transform="rotate(-180) translate(0 422)">180</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-185) translate(0 422)">185</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-190) translate(0 422)">190</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-200) translate(0 422)">200</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-202.5) translate(0 422)">SSW</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-205) translate(0 422)">205</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-215) translate(0 422)">215</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-220) translate(0 422)">220</text><text class="cmp-text-sm left svelte-19kj2zw" transform="rotate(-225) translate(0 422)">SW</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-230) translate(0 422)">230</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-235) translate(0 422)">235</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-245) translate(0 422)">245</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-247.5) translate(0 422)">SWW</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-250) translate(0 422)">250</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-260) translate(0 422)">260</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-265) translate(0 422)">265</text><text class="cmp-text-sm left svelte-19kj2zw" transform="rotate(-270) translate(0 422)">270</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-275) translate(0 422)">275</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-280) translate(0 422)">280</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-290) translate(0 422)">290</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-292.5) translate(0 422)">NWW</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-295) translate(0 422)">295</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-305) translate(0 422)">305</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-310) translate(0 422)">310</text><text class="cmp-text-sm left svelte-19kj2zw" transform="rotate(-315) translate(0 422)">NW</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-320) translate(0 422)">320</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-325) translate(0 422)">325</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-335) translate(0 422)">335</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-340) translate(0 422)">340</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-350) translate(0 422)">350</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-355) translate(0 422)">355</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-337.5) translate(0 422)">NNW</text></g></g></svg></div>');function ze(a,t){R(t,!1);let e=at(),s=at(),r=at(),n=at();const l=bt.subscribe(f=>{const A=f.f+f.mpf,I=(f.mpf-f.mpf/Math.pow(1.5/f.mpf*A+1,2))/f.mpf;L(e,(1-I)*133),L(s,f.deg_x),L(r,f.deg_y),L(n,c(r)/90*400)});et(()=>{l&&l()}),tt();var o=be(),i=x(o),d=b(x(i),4),v=x(d);p(d);var k=b(d),h=b(k,2),y=x(h),m=b(x(y),2),M=x(m);p(m),p(y),p(h);var _=b(h),z=b(x(_),2),E=x(z);p(z),p(_);var D=b(_),u=x(D);p(D),p(i),p(o),H(()=>{V(v,"style",`y:${c(e)??""}%`),V(k,"style",`transform: translate(0, ${c(n)??""}px)`),V(y,"style",`transform: rotate(${c(r)??""}deg)`),Y(M,`∠ ${c(r)??""}°`),Y(E,`${c(s)??""}°`),V(u,"transform",`rotate(${c(s)??""})`)}),j(a,o),q()}var Ee=C('<div id="camera-stream" class="svelte-nq3iur"><img id="telescope-stream" alt="Telescope stream" width="640" height="480" class="svelte-nq3iur"></div>');function Fe(a,t){R(t,!1);let e=at("starfield.jpg");Q(()=>{L(e,"http://192.168.178.38:7777/stream.mjpg")}),tt();var s=Ee(),r=x(s);p(s),H(()=>V(r,"src",c(e))),j(a,s),q()}const Le=(a,t)=>{a.preventDefault(),L(t,X(c(t)==="horizon"?"cam1":"horizon"))};var Te=C('<div class="uk-card visuals svelte-dynqld"><a href="/"><!></a></div>');function Me(a){let t=$("horizon");var e=Te(),s=x(e);s.__click=[Le,t];var r=x(s);O(r,()=>c(t)==="horizon",n=>{ze(n,{})},n=>{var l=ot(),o=J(l);O(o,()=>c(t)==="cam1",i=>{Fe(i,{})},null,!0),j(n,l)}),p(s),p(e),j(a,e)}ct(["click"]);function Z(a,t){fetch(""+a).then(s=>s.json()).then(s=>{typeof t=="function"&&t(s)})}function qt(a,t,e){fetch(""+a,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then(r=>r.json()).then(r=>{e&&e(r)})}class De{constructor(t,e){this.stick=t,this.stick&&(this.callback=e,this.dragStart=null,this.touchId=null,this.maxDistance=200,this.deadZone=8,this.active=!1,this.value={x:0,y:0},this.counter=0,this.prev={x:0,y:0},this.debounceTimer=null,this.debounceTimeout=50,this.stick.addEventListener("mousedown",s=>{this._handleDown(s)}),this.stick.addEventListener("touchstart",s=>{this._handleDown(s)}),document.addEventListener("mousemove",s=>{this._handleMove(s)},{passive:!1}),document.addEventListener("touchmove",s=>{this._handleMove(s)},{passive:!1}),document.addEventListener("mouseup",s=>{this._handleUp(s)}),document.addEventListener("touchend",s=>{this._handleUp(s)}))}destroy(){this.stick.removeEventListener("mousedown",t=>{this._handleDown(t)}),this.stick.removeEventListener("touchstart",t=>{this._handleDown(t)}),document.removeEventListener("mousemove",t=>{this._handleMove(t)}),document.removeEventListener("touchmove",t=>{this._handleMove(t)}),document.removeEventListener("mouseup",t=>{this._handleUp(t)}),document.removeEventListener("touchend",t=>{this._handleUp(t)})}_handleDown(t){this.active=!0,this.stick.style.transition="0s",t.preventDefault(),this.dragStart=t.changedTouches?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:{x:t.clientX,y:t.clientY},t.changedTouches&&(this.touchId=t.changedTouches[0].identifier)}_handleMove(t){if(!this.active)return;let e=null;if(t.changedTouches){for(let _=0;_<t.changedTouches.length;_++)this.touchId===t.changedTouches[_].identifier&&(e=_,t.clientX=t.changedTouches[_].clientX,t.clientY=t.changedTouches[_].clientY);if(e==null)return}const s=this.stick.getBoundingClientRect(),r=s?Math.round(16e3/s.width)/100:1,n=t.clientX-this.dragStart.x,l=t.clientY-this.dragStart.y,o=Math.atan2(l,n),i=Math.min(this.maxDistance,Math.hypot(n,l)*r),d=i*Math.cos(o),v=i*Math.sin(o);this.stick.style.transform=`translate(${d}px, ${v}px)`;const k=i<this.deadZone?0:this.maxDistance/(this.maxDistance-this.deadZone)*(i-this.deadZone),h=k*Math.cos(o),y=k*Math.sin(o),m=parseFloat((h/this.maxDistance).toFixed(4)),M=parseFloat((y/this.maxDistance).toFixed(4));this.value={x:m,y:M},this._loop()}_handleUp(t){this.active&&(t.changedTouches&&this.touchId!==t.changedTouches[0].identifier||(this.stick.style.transition=".2s",this.stick.style.transform="translate3d(0px, 0px, 0px)",this.value={x:0,y:0},this.touchId=null,this.active=!1))}_sendUpdate(){const t=Math.round(511.5+this.value.x*511.5),e=Math.round(511.5+this.value.y*511.5);this.callback(`/joystick/${t}/${e}`)}_debounce(t){return(...e)=>{clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{t(...e)},this.debounceTimeout)}}_update(){(this.value.x!==this.prev.x||this.value.y!==this.prev.y)&&(this.prev={...this.value},this._debounce(()=>{this._sendUpdate()})())}_loop(){this.active?this.frame=requestAnimationFrame(()=>{this._loop()}):cancelAnimationFrame(this.frame),this._update()}}class Ae{constructor(t,e){this.stick=t,this.stick&&(this.callback=e,this.dragStart=null,this.touchId=null,this.maxDistance=230,this.deadZone=8,this.active=!1,this.value={f:0},this.counter=0,this.prev={f:0},this.debounceTimer=null,this.debounceTimeout=50,this.stick.addEventListener("mousedown",s=>{this._handleDown(s)}),this.stick.addEventListener("touchstart",s=>{this._handleDown(s)}),document.addEventListener("mousemove",s=>{this._handleMove(s)},{passive:!1}),document.addEventListener("touchmove",s=>{this._handleMove(s)},{passive:!1}),document.addEventListener("mouseup",s=>{this._handleUp(s)}),document.addEventListener("touchend",s=>{this._handleUp(s)}))}destroy(){this.stick.removeEventListener("mousedown",t=>{this._handleDown(t)}),this.stick.removeEventListener("touchstart",t=>{this._handleDown(t)}),document.removeEventListener("mousemove",t=>{this._handleMove(t)}),document.removeEventListener("touchmove",t=>{this._handleMove(t)}),document.removeEventListener("mouseup",t=>{this._handleUp(t)}),document.removeEventListener("touchend",t=>{this._handleUp(t)})}_handleDown(t){this.active=!0,this.stick.style.transition="0s",t.preventDefault(),this.dragStart=t.changedTouches?{y:t.changedTouches[0].clientY}:{y:t.clientY},t.changedTouches&&(this.touchId=t.changedTouches[0].identifier)}_handleMove(t){if(!this.active)return;t.preventDefault();let e=null;if(t.changedTouches){for(let i=0;i<t.changedTouches.length;i++)this.touchId===t.changedTouches[i].identifier&&(e=i,t.clientY=t.changedTouches[i].clientY);if(e==null)return}const s=this.stick.getBoundingClientRect(),r=s?Math.round(1e4/s.width)/100:1,n=t.clientY-this.dragStart.y,l=n>=0?Math.min(this.maxDistance,n*r):Math.max(-this.maxDistance,n*r);this.stick.style.transform=`translateY(${l}px)`;const o=Math.abs(l)>this.deadZone?parseFloat((l/this.maxDistance).toFixed(4)):0;this.value={f:o},this._loop()}_handleUp(t){this.active&&(t.preventDefault(),!(t.changedTouches&&this.touchId!==t.changedTouches[0].identifier)&&(this.stick.style.transition=".2s",this.stick.style.transform="translateY(0px)",this.value={f:0},this.touchId=null,this.active=!1))}_sendUpdate(){const t=Math.round(511.5-this.value.f*511.5);this.callback(`/focus/${t}`)}_debounce(t){return(...e)=>{clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{t(...e)},this.debounceTimeout)}}_update(){this.value.f!==this.prev.f&&(this.prev={...this.value},this._debounce(()=>{this._sendUpdate()})())}_loop(){this.active?this.frame=requestAnimationFrame(()=>{this._loop()}):cancelAnimationFrame(this.frame),this._update()}}var Se=K('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 781 710" class="svelte-1ec61be"><defs><circle id="joys-def-cir1" r="280" cy="0"></circle><circle id="joys-def-cir2" r="80" cy="0"></circle><path id="joys-def-arrow" d="M0 -120 -40 -100 40 -100z"></path><rect id="joys-def-slider" width="70" height="560" transform="translate(350 -280)" rx="15" ry="15"></rect><rect id="joys-def-slide" width="100" height="100" transform="translate(335 -50)" rx="15" ry="15"></rect></defs><g id="joys" transform="translate(320 355)" class="svelte-1ec61be"><use id="joys-plate" href="#joys-def-cir1" class="svelte-1ec61be"></use><use id="joys-arrow-top" href="#joys-def-arrow" class="svelte-1ec61be"></use><use id="joys-arrow-right" href="#joys-def-arrow" transform="rotate(90)" class="svelte-1ec61be"></use><use id="joys-arrow-left" href="#joys-def-arrow" transform="rotate(-90)" class="svelte-1ec61be"></use><use id="joys-arrow-bottom" href="#joys-def-arrow" transform="rotate(180)" class="svelte-1ec61be"></use><use id="joys-stick" href="#joys-def-cir2" style="transform: translate(0px, 0px)" class="svelte-1ec61be"></use><use id="joys-slider" href="#joys-def-slider" class="svelte-1ec61be"></use><use id="joys-slide" href="#joys-def-slide" style="transform: translateY(0px)" class="svelte-1ec61be"></use></g></svg>');function Ce(a,t){R(t,!1);let e=null,s=null;Q(()=>{e=new De(document.getElementById("joys-stick"),n=>{Z(n,l=>{console.log("SVELTE Joystick",l)})}),s=new Ae(document.getElementById("joys-slide"),n=>{Z(n,l=>{console.log("SVELTE Focus",l)})})}),et(()=>{e&&e.hasOwnProperty("destroy")&&e.destroy(),s&&s.hasOwnProperty("destroy")&&s.destroy()}),tt();var r=Se();j(a,r),q()}class Ie{constructor(t,e){if(this.adjust=t,this.adjust){this.callback=e;const s=8e4/360;this.axisSteps={lg:Math.round(s),md:Math.round(s/10),sm:Math.round(s/100)},this.adjust.addEventListener("mouseup",r=>{this.sendCommand(r.target.dataset)})}}destroy(){this.adjust.removeEventListener("mouseup",t=>{this.sendCommand(t.target.dataset)})}sendCommand(t){let e=t==null?void 0:t.dir,s=t==null?void 0:t.len;e&&s&&typeof this.axisSteps[s]=="number"&&(s=this.axisSteps[s],["closer","further"].indexOf(e)>=0&&(s=e==="closer"?-s:s,e="focus"),this.callback(`/adjust/${e}/${s}`))}}var Ne=K('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 781 710" class="svelte-1uguiw2"><defs><path id="arr1" d="M45 45 5 45 10 95 95 95 95 10 45 5z"></path><path id="arr2" d="M105 105 11 105 17 165 165 165 165 17 105 11z"></path><path id="arr3" d="M175 175 18 175 25 245 245 245 245 25 175 18z"></path><circle id="cir1" r="44" cy="73"></circle><path id="cir2" d="M-54 73 A 75 75 0 1 0 54 73 A 54 54 0 0 1 -54 73z"></path><path id="cir3" d="M-85 125 A 108 108 0 1 0 85 125 A 54 54 0 0 1 -85 125z"></path></defs><g id="adjust" transform="translate(355 355)" class="svelte-1uguiw2"><g transform="rotate(135)"><use href="#arr1" data-dir="left" data-len="sm" class="svelte-1uguiw2"></use><use href="#arr2" data-dir="left" data-len="md" class="svelte-1uguiw2"></use><use href="#arr3" data-dir="left" data-len="lg" class="svelte-1uguiw2"></use></g><g transform="rotate(-45)"><use href="#arr1" data-dir="right" data-len="sm" class="svelte-1uguiw2"></use><use href="#arr2" data-dir="right" data-len="md" class="svelte-1uguiw2"></use><use href="#arr3" data-dir="right" data-len="lg" class="svelte-1uguiw2"></use></g><g transform="rotate(-135)"><use href="#arr1" data-dir="up" data-len="sm" class="svelte-1uguiw2"></use><use href="#arr2" data-dir="up" data-len="md" class="svelte-1uguiw2"></use><use href="#arr3" data-dir="up" data-len="lg" class="svelte-1uguiw2"></use></g><g transform="rotate(45)"><use href="#arr1" data-dir="down" data-len="sm" class="svelte-1uguiw2"></use><use href="#arr2" data-dir="down" data-len="md" class="svelte-1uguiw2"></use><use href="#arr3" data-dir="down" data-len="lg" class="svelte-1uguiw2"></use></g><g transform="translate(360 -50) rotate(165)"><use href="#cir1" data-dir="further" data-len="sm" class="svelte-1uguiw2"></use><use href="#cir2" data-dir="further" data-len="md" class="svelte-1uguiw2"></use><use href="#cir3" data-dir="further" data-len="lg" class="svelte-1uguiw2"></use></g><g transform="translate(360 50) rotate(15)"><use href="#cir1" data-dir="closer" data-len="sm" class="svelte-1uguiw2"></use><use href="#cir2" data-dir="closer" data-len="md" class="svelte-1uguiw2"></use><use href="#cir3" data-dir="closer" data-len="lg" class="svelte-1uguiw2"></use></g></g></svg>');function $e(a,t){R(t,!1);let e=null;Q(()=>{e=new Ie(document.getElementById("adjust"),r=>{Z(r,n=>{console.log("SVELTE Adjust",n)})})}),et(()=>{e&&e.hasOwnProperty("destroy")&&e.destroy()}),tt();var s=Ne();j(a,s),q()}const Pe=(a,t)=>{L(t,X(c(t)==="mov"?"adj":"mov"))};var Ue=C('<div class="joystick-wrapper svelte-5x5bew"><!> <button class="button svelte-5x5bew" type="button"> </button></div>');function Ve(a){let t=$("mov");var e=Ue(),s=x(e);O(s,()=>c(t)==="mov",l=>{Ce(l,{})},l=>{$e(l,{})});var r=b(s,2);r.__click=[Pe,t];var n=x(r,!0);p(r),p(e),H(()=>Y(n,c(t)==="mov"?"ADJ":"MOV")),j(a,e)}ct(["click"]);var Oe=K('<path fill="none" stroke="#000" stroke-width="1.01" d="M10,0.5 C6.41,0.5 3.5,3.39 3.5,6.98 C3.5,11.83 10,19 10,19 C10,19 16.5,11.83 16.5,6.98 C16.5,3.39 13.59,0.5 10,0.5 L10,0.5 Z"></path><circle fill="none" stroke="#000" cx="10" cy="6.8" r="2.3"></circle>',1),Be=K('<path fill="none" stroke="#000" d="M1,10.5 L19,10.5"></path><path fill="none" stroke="#000" d="M2.35,15.5 L17.65,15.5"></path><path fill="none" stroke="#000" d="M2.35,5.5 L17.523,5.5"></path><path fill="none" stroke="#000" d="M10,19.46 L9.98,19.46 C7.31,17.33 5.61,14.141 5.61,10.58 C5.61,7.02 7.33,3.83 10,1.7 C10.01,1.7 9.99,1.7 10,1.7 L10,1.7 C12.67,3.83 14.4,7.02 14.4,10.58 C14.4,14.141 12.67,17.33 10,19.46 L10,19.46 L10,19.46 L10,19.46 Z"></path><circle fill="none" stroke="#000" cx="10" cy="10.5" r="9"></circle>',1),Ye=K('<circle fill="none" stroke="#000" cx="10" cy="10" r="7.5"></circle><line fill="none" stroke="#000" x1="10" x2="10" y2="8"></line><line fill="none" stroke="#000" x1="10" y1="12" x2="10" y2="20"></line><line fill="none" stroke="#000" y1="10" x2="8" y2="10"></line><line fill="none" stroke="#000" x1="12" y1="10" x2="20" y2="10"></line>',1),He=K('<svg viewBox="0 0 20 20"><!></svg>');function Re(a,t){let e=rt(t,"size",3,1),s=Bt(()=>Math.round(20*e()));var r=He(),n=x(r);O(n,()=>t.type==="home",l=>{var o=Oe();gt(),j(l,o)},l=>{var o=ot(),i=J(o);O(i,()=>t.type==="polaris",d=>{var v=Be();gt(4),j(d,v)},d=>{var v=Ye();gt(4),j(d,v)},!0),j(l,o)}),p(r),H(()=>{V(r,"width",c(s)),V(r,"height",c(s))}),j(a,r)}function Xt(a){return a.toLowerCase().trim().replaceAll("ä","ae").replaceAll("ö","oe").replaceAll("ü","ue").replaceAll("ß","ss").replace(/\W+/g,"_").replace(/^_|_$/g,"")}const $t={fid:"",geo:{addr:"",lat:53.6,lon:9.9},base:[{id:"home",name:"Home",pos:{x:-23900,y:0,f:500}},{id:"polaris",name:"Polaris",pos:{x:0,y:11912,f:600}}]};function qe(a,t){const e={...$t.geo,addr:t},s=[];for(let r of $t.base)s.push({...r,pos:{...r.pos}});return{fid:a,geo:e,base:s}}var Xe=C('<input type="text" id="address" placeholder="Address" class="uk-input uk-margin-small-bottom"> <input type="text" id="latitude" placeholder="Latitude" class="uk-input uk-margin-small-bottom"> <input type="text" id="longitude" placeholder="Longitude" class="uk-input uk-margin-small-bottom"> <button class="uk-button uk-button-small">Save</button>',1),We=(a,t)=>{L(t,!0)},Ge=C('<div class="editable svelte-jag0no" role="button" tabindex="0"><h4 class="svelte-jag0no"> </h4> <div class="svelte-jag0no"> </div></div>'),Ze=(a,t,e)=>t(a,`/navi/position/${c(e).id}`),Je=C('<li><a><span class="uk-icon" uk-icon=""><!></span> <span> </span></a></li>'),Ke=C('<label for="new-name">Save/update current position as ...</label> <input type="text" id="new-name" class="uk-input uk-margin-bottom" placeholder="Enter a position name"> <button class="uk-button uk-button-small">Save</button>',1),Qe=(a,t)=>{L(t,!0)},ts=C('<button class="uk-button uk-button-small">+ Add</button>'),es=C('<div class="nav-grid svelte-jag0no"><div class="nav-curr-pos uk-padding-small svelte-jag0no"><!></div> <div class="nav-selector uk-padding-small svelte-jag0no"><button class="uk-button uk-button-small uk-align-right">location</button></div> <div class="nav-list uk-padding-small svelte-jag0no"><ul id="nav-nav" class="uk-iconnav uk-iconnav-vertical"></ul></div> <div class="nav-add uk-padding-small"><!></div></div>');function ss(a,t){R(t,!0);const e=ht(),s=()=>it(W,"$positions",e),r=()=>it(bt,"$arduinoSettings",e);let n=$(!1),l=$(!1),o=$(void 0),i=$(""),d=$(""),v=$(""),k=$(X([]));const h=W.subscribe(w=>{w!=null&&w.fid&&(L(i,X(w.geo.addr)),L(d,X(w.geo.lat)),L(v,X(w.geo.lon)),L(k,X([...w.base])))});et(()=>{h&&h()});const y=()=>{const w={...s()};qt(`/navi/position/update/${w.fid}`,w,g=>{console.log("SVELTE saved",g)})},m=()=>{const w={addr:c(i),lat:parseFloat(c(d)),lon:parseFloat(c(v))};W.update(g=>({...g,geo:w})),y(),L(n,!1)},M=()=>{const w=Xt(c(o));if(w){let g=!1;const F=(({x:T,y:B,f:N})=>({x:T,y:B,f:N}))(r());let S=c(k).map(T=>T.id!==w?T:(g=!0,{...T,pos:F}));g||S.push({id:w,name:c(o),pos:F}),W.update(T=>({...T,base:S})),y(),L(o,"")}L(l,!1)},_=(w,g)=>{w.preventDefault(),Z(g,F=>{console.log("SVELTE position",F)})};var z=es(),E=x(z),D=x(E);O(D,()=>c(n),w=>{var g=Xe(),F=J(g);lt(F);var S=b(F,2);lt(S);var T=b(S,2);lt(T);var B=b(T,2);B.__click=m,nt(F,()=>c(i),N=>L(i,N)),nt(S,()=>c(d),N=>L(d,N)),nt(T,()=>c(v),N=>L(v,N)),j(w,g)},w=>{var g=Ge();g.__click=[We,n];var F=x(g),S=x(F,!0);p(F);var T=b(F,2),B=x(T);p(T),p(g),H(()=>{Y(S,c(i)),Y(B,`${c(d)??""}°, ${c(v)??""}°`)}),j(w,g)}),p(E);var u=b(E,2),f=x(u);f.__click=function(...w){var g;(g=t.toggleAdmin)==null||g.apply(this,w)},p(u);var A=b(u,2),P=x(A);mt(P,21,()=>c(k),jt,(w,g)=>{var F=Je(),S=x(F);S.__click=[Ze,_,g];var T=x(S),B=x(T);Re(B,{get type(){return c(g).id},size:1.35}),p(T);var N=b(T,2),ut=x(N,!0);p(N),p(S),p(F),H(()=>{V(S,"href",`/navi/position/${c(g).id}`),Y(ut,c(g).name)}),j(w,F)}),p(P),p(A);var I=b(A,2),dt=x(I);O(dt,()=>c(l),w=>{var g=Ke(),F=b(J(g),2);lt(F);var S=b(F,2);S.__click=M,nt(F,()=>c(o),T=>L(o,T)),j(w,g)},w=>{var g=ts();g.__click=[Qe,l],j(w,g)}),p(I),p(z),j(a,z),q()}ct(["click"]);var as=(a,t,e)=>t(c(e).fid),rs=C('<li><button class="loc-button svelte-14n1lv"> </button></li>'),ls=(a,t)=>t(),ns=C('<div class="nav-grid svelte-14n1lv"><div class="nav-curr-pos uk-padding-small svelte-14n1lv"><h4 class="svelte-14n1lv">Locations</h4></div> <div class="nav-selector uk-padding-small svelte-14n1lv"><button class="uk-button uk-button-small uk-align-right">Navigation</button></div> <div class="nav-list uk-padding-small svelte-14n1lv"><ul></ul></div> <div class="nav-add uk-padding-small svelte-14n1lv"><input type="text" id="new-location" class="uk-input" placeholder="Enter a location name"> <button class="uk-button uk-align-right uk-margin-remove-vertical">+&nbsp;Add</button></div> <div class="uk-padding-small uk-padding-remove-vertical"> </div></div>');function os(a,t){R(t,!0);const e=ht(),s=()=>it(kt,"$locations",e);let r=$("");const n=W.subscribe(u=>{L(r,X(u.fid))});et(()=>{n&&n()});let l=$(""),o=Bt(()=>Xt(c(l)));const i=u=>{u!==c(r)&&Z(`/navi/location/${u}`,f=>{(f==null?void 0:f.fid)===u&&(W.update(A=>({...f})),console.log("Loaded location"))})},d=()=>{if(c(o).length>=3){const u=qe(c(o),c(l));qt(`/navi/position/update/${c(o)}`,u,f=>{W.update(A=>u),kt.update(A=>[...A,{fid:c(o),addr:c(l)}]),console.log("SVELTE added new location",f)})}else console.error("ID is too short. At least 3 char are required.")};Q(()=>{s().length===0&&Z("/navi/location-list",u=>{kt.update(f=>[...u]),console.log("Loaded location list")})});var v=ns(),k=b(x(v),2),h=x(k);h.__click=function(...u){var f;(f=t.toggleAdmin)==null||f.apply(this,u)},p(k);var y=b(k,2),m=x(y);mt(m,5,s,jt,(u,f)=>{var A=rs(),P=x(A);P.__click=[as,i,f];var I=x(P,!0);p(P),p(A),H(()=>{Rt(A,`${(c(f).fid===c(r)?"active":"")??""} svelte-14n1lv`),Y(I,c(f).addr)}),j(u,A)}),p(m),p(y);var M=b(y,2),_=x(M);lt(_);var z=b(_,2);z.__click=[ls,d],p(M);var E=b(M,2),D=x(E,!0);p(E),p(v),H(()=>Y(D,c(o))),nt(_,()=>c(l),u=>L(l,u)),j(a,v),q()}ct(["click"]);function is(a,t){R(t,!0);const e=ht(),s=()=>it(W,"$positions",e);let r=$(!1);const n=()=>{L(r,!c(r))};Q(()=>{var i;(i=s())!=null&&i.fid||Z("/navi/location/index",d=>{(d==null?void 0:d.fid)==="index"&&W.update(v=>({...d}))})});var l=ot(),o=J(l);O(o,()=>c(r),i=>{os(i,{toggleAdmin:n})},i=>{ss(i,{toggleAdmin:n})}),j(a,l),q()}class cs{constructor(t,e,s){this.slide=t,this.slide&&(this.callback=e,this.dragStart=null,this.touchId=null,this.maxDistance=690,this.precision=6,this.active=!1,this.value=0,this.counter=0,this.prev=0,s=parseFloat(s),s=s>0?Math.min(s,1):0,this.currDistance=s*this.maxDistance,this.setHandleValue(this.currDistance),this.progressDistance=0,this.slide.addEventListener("mousedown",r=>{this._handleDown(r)}),this.slide.addEventListener("touchstart",r=>{this._handleDown(r)}),document.addEventListener("mousemove",r=>{this._handleMove(r)},{passive:!1}),document.addEventListener("touchmove",r=>{this._handleMove(r)},{passive:!1}),document.addEventListener("mouseup",r=>{this._handleUp(r)}),document.addEventListener("touchend",r=>{this._handleUp(r)}))}destroy(){this.slide.removeEventListener("mousedown",t=>{this._handleDown(t)}),this.slide.removeEventListener("touchstart",t=>{this._handleDown(t)}),document.removeEventListener("mousemove",t=>{this._handleMove(t)}),document.removeEventListener("touchmove",t=>{this._handleMove(t)}),document.removeEventListener("mouseup",t=>{this._handleUp(t)}),document.removeEventListener("touchend",t=>{this._handleUp(t)})}_sendUpdate(){const t=this.value;this.callback(t)}_handleDown(t){this.active=!0,this.slide.style.transition="0s",t.preventDefault(),this.dragStart=t.changedTouches?t.changedTouches[0].clientX:t.clientX,t.changedTouches&&(this.touchId=t.changedTouches[0].identifier)}_handleMove(t){if(!this.active)return;t.preventDefault();let e=null;if(t.changedTouches){for(let o=0;o<t.changedTouches.length;o++)this.touchId===t.changedTouches[o].identifier&&(e=o,t.clientX=t.changedTouches[o].clientX);if(e==null)return}const s=this.slide.getBoundingClientRect(),r=s?Math.round(6e3/s.width)/100:1,n=this.currDistance+(t.clientX-this.dragStart)*r,l=n>=0?Math.min(this.maxDistance,n):0;this.progressDistance=l,this.setHandleValue(l)}setHandleValue(t){this.slide.style.transform=`translateX(${t}px)`,this.value=parseFloat((t/this.maxDistance).toFixed(this.precision))}_handleUp(t){this.active&&(t.preventDefault(),!(t.changedTouches&&this.touchId!==t.changedTouches[0].identifier)&&(this._sendUpdate(),this.currDistance=this.progressDistance,this.touchId=null,this.active=!1))}}var ds=K('<svg viewBox="0 0 780 120"><rect class="slider svelte-1izey8b" width="720" height="30" x="30" y="50" rx="15" ry="15"></rect><text class="label svelte-1izey8b" x="40" y="25"> </text><g transform="translate(45 65)"><circle class="slide svelte-1izey8b" r="30"></circle></g></svg>');function us(a,t){R(t,!0);const e=rt(t,"value",3,0),s=rt(t,"minValue",3,0),r=rt(t,"maxValue",3,10),n=rt(t,"steps",3,1),l=r()-s(),o=(e()-s())/l,i=v(n());let d=null;Q(()=>{d=new cs(document.getElementById("slider_slide_"+t.id),_=>{const z=l*_+s(),E=parseFloat((Math.round(z/n())*n()).toFixed(i));typeof t.callback=="function"&&t.callback(t.id,E)},o)}),et(()=>{d&&d.hasOwnProperty("destroy")&&d.destroy()});function v(_){if(!isFinite(_))return 0;let z=1,E=0;for(;Math.round(_*z)/z!==_;)z*=10,E+=1;return E}var k=ds(),h=b(x(k)),y=x(h,!0);p(h);var m=b(h),M=x(m);p(m),p(k),H(()=>{Y(y,t.name),V(M,"id","slider_slide_"+t.id)}),j(a,k),q()}var vs=C('<div class="camera-options svelte-4mjct0"></div>');function hs(a,t){R(t,!1);const e=ht(),s=()=>it(Nt,"$camControls",e),r=(l,o)=>{Nt.update(i=>i.map(d=>d.id===l?{...d,value:o}:{...d})),Z(`/cam/ctrl/${l}/${o}`,i=>{console.log("SVELTE CamCtrl",i)})};tt();var n=vs();mt(n,7,s,l=>l.name,(l,o,i)=>{us(l,xe(()=>c(o),{get index(){return c(i)},callback:r}))}),p(n),j(a,n),q()}var fs=(a,t,e)=>t(a,c(e).id),ms=C('<li><a href="/"> </a></li>'),ps=C('<div class="uk-card tools-wrapper svelte-1d7fpqs"><ul id="tool-selector" class="uk-tab"></ul> <div class="tools svelte-1d7fpqs"><!></div></div>');function xs(a){const t=[{id:"manual",name:"Manual"},{id:"position",name:"Position"},{id:"camera",name:"Camera"}];let e=$("manual");const s=(i,d)=>{i.preventDefault(),L(e,X(d))};var r=ps(),n=x(r);mt(n,21,()=>t,jt,(i,d)=>{var v=ms(),k=x(v);k.__click=[fs,s,d];var h=x(k,!0);p(k),p(v),H(()=>{Rt(v,c(e)===c(d).id?"uk-active":""),Y(h,c(d).name)}),j(i,v)}),p(n);var l=b(n,2),o=x(l);O(o,()=>c(e)==="manual",i=>{Ve(i)},i=>{var d=ot(),v=J(d);O(v,()=>c(e)==="position",k=>{is(k,{})},k=>{var h=ot(),y=J(h);O(y,()=>c(e)==="camera",m=>{hs(m,{})},null,!0),j(k,h)},!0),j(i,d)}),p(l),p(r),j(a,r)}ct(["click"]);var gs=C('<div class="grid-container svelte-1lldtt8"><div class="svelte-1lldtt8"><!></div> <div class="svelte-1lldtt8"><!></div></div>');function zs(a,t){R(t,!1);let e;const s=d=>{e=d.connect("http://192.168.178.38:5000"),e.on("connect",()=>{console.log("Websocket connected.")}),e.on("message",v=>{typeof v=="object"&&!Array.isArray(v)&&v!==null&&bt.update(k=>({...k,...v}))})};Q(()=>{typeof io=="function"&&s(io)}),tt();var r=gs(),n=x(r),l=x(n);Me(l),p(n);var o=b(n,2),i=x(o);xs(i),p(o),p(r),j(a,r),q()}export{zs as component};
