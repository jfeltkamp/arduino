var qs=Object.defineProperty;var ti=n=>{throw TypeError(n)};var js=(n,t,e)=>t in n?qs(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var ei=(n,t,e)=>js(n,typeof t!="symbol"?t+"":t,e),en=(n,t,e)=>t.has(n)||ti("Cannot "+e);var Ot=(n,t,e)=>(en(n,t,"read from private field"),e?e.call(n):t.get(n)),re=(n,t,e)=>t.has(n)?ti("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),nn=(n,t,e,i)=>(en(n,t,"write to private field"),i?i.call(n,e):t.set(n,e),e),ni=(n,t,e)=>(en(n,t,"access private method"),e);import{b as ii,e as Fs,a as P,t as F,n as ye,c as Nt}from"../chunks/disclose-version.CNLHaAqQ.js";import{S as zs,h as Hi,k as rt,K as Me,L as pn,A as Us,Q as Xi,a7 as Ys,a8 as si,J as sn,l as Vt,ar as Le,a5 as Wi,i as qn,a6 as Hs,C as ri,as as oi,at as jn,au as Xs,U as Ws,$ as ai,av as Fn,aw as Ks,P as Js,ax as Zs,j as Ki,F as Ji,M as Qs,B as Gs,ab as tr,ay as Zi,az as er,G as Qi,N as nr,I as ir,aA as sr,a4 as ci,aB as rr,aC as or,aD as ar,aa as cr,a9 as zn,b as lr,p as it,V as I,q as A,w as B,v as T,t as nt,o as st,aE as li,g,aq as H,f as Zt,m as yt}from"../chunks/runtime.CedCiwwz.js";import{a as wt,d as at,s as Rt,b as pt}from"../chunks/store.BJdxs5V9.js";import{c as ur,d as gt,a as Q,p as Bt,o as we,i as Z,b as hr,s as Gi}from"../chunks/index-client.B4OvqJGf.js";import{i as ts}from"../chunks/lifecycle.B-JXNPr4.js";import{w as bt,g as Je}from"../chunks/index.CtQPgalP.js";let rn=null;function Qt(n,t){return t}function fr(n,t,e,i){for(var s=[],r=t.length,o=0;o<r;o++)Ks(t[o].e,s,!0);var a=r>0&&s.length===0&&e!==null;if(a){var u=e.parentNode;Js(u),u.append(e),i.clear(),$t(n,t[0].prev,t[r-1].next)}Zs(s,()=>{for(var d=0;d<r;d++){var c=t[d];a||(i.delete(c.k),$t(n,c.prev,c.next)),Ki(c.e,!a)}})}function qt(n,t,e,i,s,r=null){var o=n,a={flags:t,items:new Map,first:null},u=(t&Zi)!==0;if(u){var d=n;o=rt?Me(Ji(d)):d.appendChild(zs())}rt&&pn();var c=null,l=!1;Hi(()=>{var h=e(),p=Us(h)?h:h==null?[]:Xi(h),f=p.length;if(l&&f===0)return;l=f===0;let w=!1;if(rt){var _=o.data===Ys;_!==(f===0)&&(o=si(),Me(o),sn(!1),w=!0)}if(rt){for(var b=null,E,v=0;v<f;v++){if(Vt.nodeType===8&&Vt.data===Qs){o=Vt,w=!0,sn(!1);break}var y=p[v],k=i(y,v);E=es(Vt,a,b,null,y,k,v,s,t),a.items.set(k,E),b=E}f>0&&Me(si())}if(!rt){var R=Gs;dr(p,a,o,s,t,(R.f&Le)!==0,i)}r!==null&&(f===0?c?Wi(c):c=qn(()=>r(o)):c!==null&&Hs(c,()=>{c=null})),w&&sn(!0),e()}),rt&&(o=Vt)}function dr(n,t,e,i,s,r,o){var N,m,L,z;var a=(s&er)!==0,u=(s&(jn|Fn))!==0,d=n.length,c=t.items,l=t.first,h=l,p,f=null,w,_=[],b=[],E,v,y,k;if(a)for(k=0;k<d;k+=1)E=n[k],v=o(E,k),y=c.get(v),y!==void 0&&((N=y.a)==null||N.measure(),(w??(w=new Set)).add(y));for(k=0;k<d;k+=1){if(E=n[k],v=o(E,k),y=c.get(v),y===void 0){var R=h?h.e.nodes_start:e;f=es(R,t,f,f===null?t.first:f.next,E,v,k,i,s),c.set(v,f),_=[],b=[],h=f.next;continue}if(u&&pr(y,E,k,s),y.e.f&Le&&(Wi(y.e),a&&((m=y.a)==null||m.unfix(),(w??(w=new Set)).delete(y))),y!==h){if(p!==void 0&&p.has(y)){if(_.length<b.length){var $=b[0],O;f=$.prev;var x=_[0],C=_[_.length-1];for(O=0;O<_.length;O+=1)ui(_[O],$,e);for(O=0;O<b.length;O+=1)p.delete(b[O]);$t(t,x.prev,C.next),$t(t,f,x),$t(t,C,$),h=$,f=C,k-=1,_=[],b=[]}else p.delete(y),ui(y,h,e),$t(t,y.prev,y.next),$t(t,y,f===null?t.first:f.next),$t(t,f,y),f=y;continue}for(_=[],b=[];h!==null&&h.k!==v;)(r||!(h.e.f&Le))&&(p??(p=new Set)).add(h),b.push(h),h=h.next;if(h===null)continue;y=h}_.push(y),f=y,h=y.next}if(h!==null||p!==void 0){for(var S=p===void 0?[]:Xi(p);h!==null;)(r||!(h.e.f&Le))&&S.push(h),h=h.next;var D=S.length;if(D>0){var M=s&Zi&&d===0?e:null;if(a){for(k=0;k<D;k+=1)(L=S[k].a)==null||L.measure();for(k=0;k<D;k+=1)(z=S[k].a)==null||z.fix()}fr(t,S,M,c)}}a&&tr(()=>{var X;if(w!==void 0)for(y of w)(X=y.a)==null||X.apply()}),ri.first=t.first&&t.first.e,ri.last=f&&f.e}function pr(n,t,e,i){i&jn&&oi(n.v,t),i&Fn?oi(n.i,e):n.i=e}function es(n,t,e,i,s,r,o,a,u){var d=rn;try{var c=(u&jn)!==0,l=(u&Xs)===0,h=c?l?Ws(s):ai(s):s,p=u&Fn?ai(o):o,f={i:p,v:h,k:r,a:null,e:null,prev:e,next:i};return rn=f,f.e=qn(()=>a(n,h,p),rt),f.e.prev=e&&e.e,f.e.next=i&&i.e,e===null?t.first=f:(e.next=f,e.e.next=f.e),i!==null&&(i.prev=f,i.e.prev=f.e),f}finally{rn=d}}function ui(n,t,e){for(var i=n.next?n.next.e.nodes_start:e,s=t?t.e.nodes_start:e,r=n.e.nodes_start;r!==i;){var o=Qi(r);s.before(r),r=o}}function $t(n,t,e){t===null?n.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}function vr(n,t,e,i,s){var r=n,o="",a;Hi(()=>{if(o===(o=t()??"")){rt&&pn();return}a!==void 0&&(Ki(a),a=void 0),o!==""&&(a=qn(()=>{if(rt){Vt.data;for(var u=pn(),d=u;u!==null&&(u.nodeType!==8||u.data!=="");)d=u,u=Qi(u);if(u===null)throw nr(),ir;ii(Vt,d),r=Me(u);return}var c=o+"",l=Fs(c);ii(Ji(l),l.lastChild),r.before(l)}))})}let hi=!1;function ns(){hi||(hi=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{var t;if(!n.defaultPrevented)for(const e of n.target.elements)(t=e.__on_r)==null||t.call(e)})},{capture:!0}))}function Ht(n){if(rt){var t=!1,e=()=>{if(!t){if(t=!0,n.hasAttribute("value")){var i=n.value;Y(n,"value",null),n.value=i}if(n.hasAttribute("checked")){var s=n.checked;Y(n,"checked",null),n.checked=s}}};n.__on_r=e,or(e),ns()}}function Y(n,t,e,i){var s=n.__attributes??(n.__attributes={});rt&&(s[t]=n.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&n.nodeName==="LINK")||s[t]!==(s[t]=e)&&(t==="style"&&"__styles"in n&&(n.__styles={}),t==="loading"&&(n[sr]=e),e==null?n.removeAttribute(t):typeof e!="string"&&gr(n).includes(t)?n[t]=e:n.setAttribute(t,e))}var fi=new Map;function gr(n){var t=fi.get(n.nodeName);if(t)return t;fi.set(n.nodeName,t=[]);for(var e,i=ci(n),s=Element.prototype;s!==i;){e=rr(i);for(var r in e)e[r].set&&t.push(r);i=ci(i)}return t}function At(n,t){var e=n.__className,i=mr(t);rt&&n.className===i?n.__className=i:(e!==i||rt&&n.className!==i)&&(t==null?n.removeAttribute("class"):n.className=i,n.__className=i)}function mr(n){return n??""}function is(n,t,e,i=e){n.addEventListener(t,e);const s=n.__on_r;s?n.__on_r=()=>{s(),i()}:n.__on_r=i,ns()}function Xt(n,t,e=t){var i=ar();is(n,"input",()=>{var s=di(n)?pi(n.value):n.value;e(s),i&&s!==(s=t())&&(n.value=s??"")}),cr(()=>{var s=t();if(rt&&n.defaultValue!==n.value){e(n.value);return}di(n)&&s===pi(n.value)||n.type==="date"&&!s&&!n.value||s!==n.value&&(n.value=s??"")})}function di(n){var t=n.type;return t==="number"||t==="range"}function pi(n){return n===""?null:+n}function ss(n,t,e){if(n.multiple)return yr(n,t);for(var i of n.options){var s=de(i);if(ur(s,t)){i.selected=!0;return}}(!e||t!==void 0)&&(n.selectedIndex=-1)}function _r(n,t){zn(()=>{var e=new MutationObserver(()=>{var i=n.__value;ss(n,i)});return e.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{e.disconnect()}})}function vi(n,t,e=t){var i=!0;is(n,"change",()=>{var s;if(n.multiple)s=[].map.call(n.querySelectorAll(":checked"),de);else{var r=n.querySelector(":checked");s=r&&de(r)}e(s)}),zn(()=>{var s=t();if(ss(n,s,i),i&&s===void 0){var r=n.querySelector(":checked");r!==null&&(s=de(r),e(s))}n.__value=s,i=!1}),_r(n)}function yr(n,t){for(var e of n.options)e.selected=~t.indexOf(de(e))}function de(n){return"__value"in n?n.__value:n.value}var Pt,Jt,_e,We,rs;const Ke=class Ke{constructor(t){re(this,We);re(this,Pt,new WeakMap);re(this,Jt);re(this,_e);nn(this,_e,t)}observe(t,e){var i=Ot(this,Pt).get(t)||new Set;return i.add(e),Ot(this,Pt).set(t,i),ni(this,We,rs).call(this).observe(t,Ot(this,_e)),()=>{var s=Ot(this,Pt).get(t);s.delete(e),s.size===0&&(Ot(this,Pt).delete(t),Ot(this,Jt).unobserve(t))}}};Pt=new WeakMap,Jt=new WeakMap,_e=new WeakMap,We=new WeakSet,rs=function(){return Ot(this,Jt)??nn(this,Jt,new ResizeObserver(t=>{for(var e of t){Ke.entries.set(e.target,e);for(var i of Ot(this,Pt).get(e.target)||[])i(e)}}))},ei(Ke,"entries",new WeakMap);let vn=Ke;var wr=new vn({box:"border-box"});function gi(n,t,e){var i=wr.observe(n,()=>e(n[t]));zn(()=>(lr(()=>e(n[t])),i))}const Un=bt(location.origin),ne=bt({x:0,y:0,f:0,deg_x:0,deg_y:0,dx:1,dy:-1,df:1,acc:1e3,spr:8e4,mpa:2e4,minpx:-2e4,maxpx:2e4,mpf:5e3,vx:0,vy:0,va1:100,va2:1500,vf:0,vf1:100,vf2:1500}),on=bt([{id:"Brightness",name:"Brightness",defaultValue:0,value:0,minValue:-1,maxValue:1,steps:.01},{id:"Contrast",name:"Contrast",defaultValue:1,value:1,minValue:0,maxValue:6,steps:.1},{id:"Saturation",name:"Saturation",defaultValue:1,value:1,minValue:0,maxValue:32,steps:.1},{id:"Sharpness",name:"Sharpness",defaultValue:1,value:1,minValue:0,maxValue:16,steps:.1},{id:"ExposureTime",name:"Exposure time",description:"Value > 0 will reduce video framerate.",defaultValue:0,value:0,minValue:-10,maxValue:10,steps:.1},{id:"AnalogueGain",name:"Analogue gain",defaultValue:1,value:1,minValue:1,maxValue:8,steps:.1}]),Ee=bt([]),kt=bt({}),gn=bt(""),Ie=bt(!0),Ne=bt("B"),Yn=bt(!1),Ve=bt(!1),pe=bt([{id:"CrosshairSize",name:"Crosshair Size",defaultValue:.04,value:.04,minValue:.005,maxValue:.25,steps:.005},{id:"CrosshairOffsetX",name:"Crosshair Offset X",defaultValue:0,value:0,minValue:-1,maxValue:1,steps:.005},{id:"CrosshairOffsetY",name:"Crosshair Offset Y",defaultValue:0,value:0,minValue:-1,maxValue:1,steps:.005},{id:"SphereScaleVF",name:"Sphere Scale Viewfinder",defaultValue:1500,value:1500,minValue:1e3,maxValue:1e4,steps:10},{id:"SphereScaleTel",name:"Sphere Scale Telescope",defaultValue:24e3,value:24e3,minValue:15e3,maxValue:6e4,steps:10}]);var br=F('<div id="horizon-wrapper" class="svelte-14er9jv"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 220" width="220" height="220" class="svelte-14er9jv"><defs><path id="altitude" d="M32 0 108 0" stroke-width="2" stroke-linecap="round"></path><path id="altitudeText" d="M40 -4 108 -4" stroke="#000" stroke-linecap="round"></path></defs><g id="compass" transform="translate(110 110)"><circle r="32" class="compass svelte-14er9jv" stroke-width="2"></circle><circle r="30" class="compass--scale svelte-14er9jv" stroke-dasharray="2 21.5619449019" stroke-dashoffset="1" stroke-width="6"></circle><g><polygon class="compass--needle svelte-14er9jv" points="-10,10 0,-30 0,0" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" fill="#000"></polygon><polygon class="compass--needle svelte-14er9jv" points="10,10 0,-30 0,0" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" fill="#FFF"></polygon></g><g><use class="compass--alt svelte-14er9jv" href="#altitude"></use><text class="compass--text svelte-14er9jv" font-size="20"><textPath href="#altitudeText"> </textPath></text></g><text class="compass--text svelte-14er9jv" font-size="20" text-anchor="middle" y="50"> </text></g></svg></div>');function Er(n,t){it(t,!1);let e=li(),i=li();const s=ne.subscribe(w=>{I(e,w.deg_x),I(i,w.deg_y)});gt(()=>{s&&s()}),ts();var r=br(),o=A(r),a=B(A(o)),u=B(A(a),2),d=B(u),c=B(A(d)),l=A(c),h=A(l);T(l),T(c),T(d);var p=B(d),f=A(p);T(p),T(a),T(o),T(r),nt(()=>{Y(u,"transform",`rotate(${g(e)??""})`),Y(d,"transform",`rotate(-${g(i)??""})`),wt(h,`${g(i)??""}°`),wt(f,`${g(e)??""}°`)}),P(n,r),st()}const Ct=Object.create(null);Ct.open="0";Ct.close="1";Ct.ping="2";Ct.pong="3";Ct.message="4";Ct.upgrade="5";Ct.noop="6";const Be=Object.create(null);Object.keys(Ct).forEach(n=>{Be[Ct[n]]=n});const mn={type:"error",data:"parser error"},os=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",as=typeof ArrayBuffer=="function",cs=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,Hn=({type:n,data:t},e,i)=>os&&t instanceof Blob?e?i(t):mi(t,i):as&&(t instanceof ArrayBuffer||cs(t))?e?i(t):mi(new Blob([t]),i):i(Ct[n]+(t||"")),mi=(n,t)=>{const e=new FileReader;return e.onload=function(){const i=e.result.split(",")[1];t("b"+(i||""))},e.readAsDataURL(n)};function _i(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let an;function kr(n,t){if(os&&n.data instanceof Blob)return n.data.arrayBuffer().then(_i).then(t);if(as&&(n.data instanceof ArrayBuffer||cs(n.data)))return t(_i(n.data));Hn(n,!1,e=>{an||(an=new TextEncoder),t(an.encode(e))})}const yi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ae=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<yi.length;n++)ae[yi.charCodeAt(n)]=n;const Sr=n=>{let t=n.length*.75,e=n.length,i,s=0,r,o,a,u;n[n.length-1]==="="&&(t--,n[n.length-2]==="="&&t--);const d=new ArrayBuffer(t),c=new Uint8Array(d);for(i=0;i<e;i+=4)r=ae[n.charCodeAt(i)],o=ae[n.charCodeAt(i+1)],a=ae[n.charCodeAt(i+2)],u=ae[n.charCodeAt(i+3)],c[s++]=r<<2|o>>4,c[s++]=(o&15)<<4|a>>2,c[s++]=(a&3)<<6|u&63;return d},xr=typeof ArrayBuffer=="function",Xn=(n,t)=>{if(typeof n!="string")return{type:"message",data:ls(n,t)};const e=n.charAt(0);return e==="b"?{type:"message",data:Tr(n.substring(1),t)}:Be[e]?n.length>1?{type:Be[e],data:n.substring(1)}:{type:Be[e]}:mn},Tr=(n,t)=>{if(xr){const e=Sr(n);return ls(e,t)}else return{base64:!0,data:n}},ls=(n,t)=>{switch(t){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}},us="",Ar=(n,t)=>{const e=n.length,i=new Array(e);let s=0;n.forEach((r,o)=>{Hn(r,!1,a=>{i[o]=a,++s===e&&t(i.join(us))})})},Cr=(n,t)=>{const e=n.split(us),i=[];for(let s=0;s<e.length;s++){const r=Xn(e[s],t);if(i.push(r),r.type==="error")break}return i};function Rr(){return new TransformStream({transform(n,t){kr(n,e=>{const i=e.length;let s;if(i<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,i);else if(i<65536){s=new Uint8Array(3);const r=new DataView(s.buffer);r.setUint8(0,126),r.setUint16(1,i)}else{s=new Uint8Array(9);const r=new DataView(s.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(i))}n.data&&typeof n.data!="string"&&(s[0]|=128),t.enqueue(s),t.enqueue(e)})}})}let cn;function ke(n){return n.reduce((t,e)=>t+e.length,0)}function Se(n,t){if(n[0].length===t)return n.shift();const e=new Uint8Array(t);let i=0;for(let s=0;s<t;s++)e[s]=n[0][i++],i===n[0].length&&(n.shift(),i=0);return n.length&&i<n[0].length&&(n[0]=n[0].slice(i)),e}function Or(n,t){cn||(cn=new TextDecoder);const e=[];let i=0,s=-1,r=!1;return new TransformStream({transform(o,a){for(e.push(o);;){if(i===0){if(ke(e)<1)break;const u=Se(e,1);r=(u[0]&128)===128,s=u[0]&127,s<126?i=3:s===126?i=1:i=2}else if(i===1){if(ke(e)<2)break;const u=Se(e,2);s=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),i=3}else if(i===2){if(ke(e)<8)break;const u=Se(e,8),d=new DataView(u.buffer,u.byteOffset,u.length),c=d.getUint32(0);if(c>Math.pow(2,21)-1){a.enqueue(mn);break}s=c*Math.pow(2,32)+d.getUint32(4),i=3}else{if(ke(e)<s)break;const u=Se(e,s);a.enqueue(Xn(r?u:cn.decode(u),t)),i=0}if(s===0||s>n){a.enqueue(mn);break}}}})}const hs=4;function tt(n){if(n)return Mr(n)}function Mr(n){for(var t in tt.prototype)n[t]=tt.prototype[t];return n}tt.prototype.on=tt.prototype.addEventListener=function(n,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(t),this};tt.prototype.once=function(n,t){function e(){this.off(n,e),t.apply(this,arguments)}return e.fn=t,this.on(n,e),this};tt.prototype.off=tt.prototype.removeListener=tt.prototype.removeAllListeners=tt.prototype.removeEventListener=function(n,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+n];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var i,s=0;s<e.length;s++)if(i=e[s],i===t||i.fn===t){e.splice(s,1);break}return e.length===0&&delete this._callbacks["$"+n],this};tt.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+n],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(e){e=e.slice(0);for(var i=0,s=e.length;i<s;++i)e[i].apply(this,t)}return this};tt.prototype.emitReserved=tt.prototype.emit;tt.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};tt.prototype.hasListeners=function(n){return!!this.listeners(n).length};const Ze=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0),ut=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Lr="arraybuffer";function fs(n,...t){return t.reduce((e,i)=>(n.hasOwnProperty(i)&&(e[i]=n[i]),e),{})}const Nr=ut.setTimeout,Br=ut.clearTimeout;function Qe(n,t){t.useNativeTimers?(n.setTimeoutFn=Nr.bind(ut),n.clearTimeoutFn=Br.bind(ut)):(n.setTimeoutFn=ut.setTimeout.bind(ut),n.clearTimeoutFn=ut.clearTimeout.bind(ut))}const $r=1.33;function Pr(n){return typeof n=="string"?Dr(n):Math.ceil((n.byteLength||n.size)*$r)}function Dr(n){let t=0,e=0;for(let i=0,s=n.length;i<s;i++)t=n.charCodeAt(i),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(i++,e+=4);return e}function ds(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Ir(n){let t="";for(let e in n)n.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(n[e]));return t}function Vr(n){let t={},e=n.split("&");for(let i=0,s=e.length;i<s;i++){let r=e[i].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}class qr extends Error{constructor(t,e,i){super(t),this.description=e,this.context=i,this.type="TransportError"}}class Wn extends tt{constructor(t){super(),this.writable=!1,Qe(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,e,i){return super.emitReserved("error",new qr(t,e,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=Xn(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const e=Ir(t);return e.length?"?"+e:""}}class jr extends Wn{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||e()})),this.writable||(i++,this.once("drain",function(){--i||e()}))}else e()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const e=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};Cr(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Ar(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=ds()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}}let ps=!1;try{ps=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Fr=ps;function zr(){}class Ur extends jr{constructor(t){if(super(t),typeof location<"u"){const e=location.protocol==="https:";let i=location.port;i||(i=e?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||i!==t.port}}doWrite(t,e){const i=this.request({method:"POST",data:t});i.on("success",e),i.on("error",(s,r)=>{this.onError("xhr post error",s,r)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,i)=>{this.onError("xhr poll error",e,i)}),this.pollXhr=t}}class Tt extends tt{constructor(t,e,i){super(),this.createRequest=t,Qe(this,i),this._opts=i,this._method=i.method||"GET",this._uri=e,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var t;const e=fs(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(e);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&i.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var s;i.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Tt.requestsCount++,Tt.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=zr,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Tt.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Tt.requestsCount=0;Tt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",wi);else if(typeof addEventListener=="function"){const n="onpagehide"in ut?"pagehide":"unload";addEventListener(n,wi,!1)}}function wi(){for(let n in Tt.requests)Tt.requests.hasOwnProperty(n)&&Tt.requests[n].abort()}const Yr=function(){const n=vs({xdomain:!1});return n&&n.responseType!==null}();class Hr extends Ur{constructor(t){super(t);const e=t&&t.forceBase64;this.supportsBinary=Yr&&!e}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Tt(vs,this.uri(),t)}}function vs(n){const t=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Fr))return new XMLHttpRequest}catch{}if(!t)try{return new ut[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const gs=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Xr extends Wn{get name(){return"websocket"}doOpen(){const t=this.uri(),e=this.opts.protocols,i=gs?{}:fs(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,e,i)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const i=t[e],s=e===t.length-1;Hn(i,this.supportsBinary,r=>{try{this.doWrite(i,r)}catch{}s&&Ze(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=ds()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}}const ln=ut.WebSocket||ut.MozWebSocket;class Wr extends Xr{createSocket(t,e,i){return gs?new ln(t,e,i):e?new ln(t,e):new ln(t)}doWrite(t,e){this.ws.send(e)}}class Kr extends Wn{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const e=Or(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=t.readable.pipeThrough(e).getReader(),s=Rr();s.readable.pipeTo(t.writable),this._writer=s.writable.getWriter();const r=()=>{i.read().then(({done:a,value:u})=>{a||(this.onPacket(u),r())}).catch(a=>{})};r();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const i=t[e],s=e===t.length-1;this._writer.write(i).then(()=>{s&&Ze(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const Jr={websocket:Wr,webtransport:Kr,polling:Hr},Zr=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Qr=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function _n(n){if(n.length>8e3)throw"URI too long";const t=n,e=n.indexOf("["),i=n.indexOf("]");e!=-1&&i!=-1&&(n=n.substring(0,e)+n.substring(e,i).replace(/:/g,";")+n.substring(i,n.length));let s=Zr.exec(n||""),r={},o=14;for(;o--;)r[Qr[o]]=s[o]||"";return e!=-1&&i!=-1&&(r.source=t,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=Gr(r,r.path),r.queryKey=to(r,r.query),r}function Gr(n,t){const e=/\/{2,9}/g,i=t.replace(e,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&i.splice(0,1),t.slice(-1)=="/"&&i.splice(i.length-1,1),i}function to(n,t){const e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,s,r){s&&(e[s]=r)}),e}const yn=typeof addEventListener=="function"&&typeof removeEventListener=="function",$e=[];yn&&addEventListener("offline",()=>{$e.forEach(n=>n())},!1);class Dt extends tt{constructor(t,e){if(super(),this.binaryType=Lr,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(e=t,t=null),t){const i=_n(t);e.hostname=i.host,e.secure=i.protocol==="https"||i.protocol==="wss",e.port=i.port,i.query&&(e.query=i.query)}else e.host&&(e.hostname=_n(e.host).host);Qe(this,e),this.secure=e.secure!=null?e.secure:typeof location<"u"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},e.transports.forEach(i=>{const s=i.prototype.name;this.transports.push(s),this._transportsByName[s]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Vr(this.opts.query)),yn&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},$e.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=hs,e.transport=t,this.id&&(e.sid=this.id);const i=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Dt.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const e=this.createTransport(t);e.open(),this.setTransport(e)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",Dt.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const e=new Error("server error");e.code=t.data,this._onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let i=0;i<this.writeBuffer.length;i++){const s=this.writeBuffer[i].data;if(s&&(e+=Pr(s)),i>0&&e>this._maxPayload)return this.writeBuffer.slice(0,i);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Ze(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,e,i){return this._sendPacket("message",t,e,i),this}send(t,e,i){return this._sendPacket("message",t,e,i),this}_sendPacket(t,e,i,s){if(typeof e=="function"&&(s=e,e=void 0),typeof i=="function"&&(s=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const r={type:t,data:e,options:i};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},i=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():t()}):this.upgrading?i():t()),this}_onError(t){if(Dt.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),yn&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=$e.indexOf(this._offlineEventListener);i!==-1&&$e.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this._prevBufferLen=0}}}Dt.protocol=hs;class eo extends Dt{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let e=this.createTransport(t),i=!1;Dt.priorWebsocketSuccess=!1;const s=()=>{i||(e.send([{type:"ping",data:"probe"}]),e.once("packet",l=>{if(!i)if(l.type==="pong"&&l.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;Dt.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(c(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=e.name,this.emitReserved("upgradeError",h)}}))};function r(){i||(i=!0,c(),e.close(),e=null)}const o=l=>{const h=new Error("probe error: "+l);h.transport=e.name,r(),this.emitReserved("upgradeError",h)};function a(){o("transport closed")}function u(){o("socket closed")}function d(l){e&&l.name!==e.name&&r()}const c=()=>{e.removeListener("open",s),e.removeListener("error",o),e.removeListener("close",a),this.off("close",u),this.off("upgrading",d)};e.once("open",s),e.once("error",o),e.once("close",a),this.once("close",u),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{i||e.open()},200):e.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const e=[];for(let i=0;i<t.length;i++)~this.transports.indexOf(t[i])&&e.push(t[i]);return e}}let no=class extends eo{constructor(t,e={}){const i=typeof t=="object"?t:e;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(s=>Jr[s]).filter(s=>!!s)),super(t,i)}};function io(n,t="",e){let i=n;e=e||typeof location<"u"&&location,n==null&&(n=e.protocol+"//"+e.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=e.protocol+n:n=e.host+n),/^(https?|wss?):\/\//.test(n)||(typeof e<"u"?n=e.protocol+"//"+n:n="https://"+n),i=_n(n)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const r=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+r+":"+i.port+t,i.href=i.protocol+"://"+r+(e&&e.port===i.port?"":":"+i.port),i}const so=typeof ArrayBuffer=="function",ro=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,ms=Object.prototype.toString,oo=typeof Blob=="function"||typeof Blob<"u"&&ms.call(Blob)==="[object BlobConstructor]",ao=typeof File=="function"||typeof File<"u"&&ms.call(File)==="[object FileConstructor]";function Kn(n){return so&&(n instanceof ArrayBuffer||ro(n))||oo&&n instanceof Blob||ao&&n instanceof File}function Pe(n,t){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let e=0,i=n.length;e<i;e++)if(Pe(n[e]))return!0;return!1}if(Kn(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return Pe(n.toJSON(),!0);for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&Pe(n[e]))return!0;return!1}function co(n){const t=[],e=n.data,i=n;return i.data=wn(e,t),i.attachments=t.length,{packet:i,buffers:t}}function wn(n,t){if(!n)return n;if(Kn(n)){const e={_placeholder:!0,num:t.length};return t.push(n),e}else if(Array.isArray(n)){const e=new Array(n.length);for(let i=0;i<n.length;i++)e[i]=wn(n[i],t);return e}else if(typeof n=="object"&&!(n instanceof Date)){const e={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=wn(n[i],t));return e}return n}function lo(n,t){return n.data=bn(n.data,t),delete n.attachments,n}function bn(n,t){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<t.length)return t[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let e=0;e<n.length;e++)n[e]=bn(n[e],t);else if(typeof n=="object")for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(n[e]=bn(n[e],t));return n}const uo=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ho=5;var q;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(q||(q={}));class fo{constructor(t){this.replacer=t}encode(t){return(t.type===q.EVENT||t.type===q.ACK)&&Pe(t)?this.encodeAsBinary({type:t.type===q.EVENT?q.BINARY_EVENT:q.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===q.BINARY_EVENT||t.type===q.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=co(t),i=this.encodeAsString(e.packet),s=e.buffers;return s.unshift(i),s}}function bi(n){return Object.prototype.toString.call(n)==="[object Object]"}class Jn extends tt{constructor(t){super(),this.reviver=t}add(t){let e;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);const i=e.type===q.BINARY_EVENT;i||e.type===q.BINARY_ACK?(e.type=i?q.EVENT:q.ACK,this.reconstructor=new po(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(Kn(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0;const i={type:Number(t.charAt(0))};if(q[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===q.BINARY_EVENT||i.type===q.BINARY_ACK){const r=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);const o=t.substring(r,e);if(o!=Number(o)||t.charAt(e)!=="-")throw new Error("Illegal attachments");i.attachments=Number(o)}if(t.charAt(e+1)==="/"){const r=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););i.nsp=t.substring(r,e)}else i.nsp="/";const s=t.charAt(e+1);if(s!==""&&Number(s)==s){const r=e+1;for(;++e;){const o=t.charAt(e);if(o==null||Number(o)!=o){--e;break}if(e===t.length)break}i.id=Number(t.substring(r,e+1))}if(t.charAt(++e)){const r=this.tryParse(t.substr(e));if(Jn.isPayloadValid(i.type,r))i.data=r;else throw new Error("invalid payload")}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,e){switch(t){case q.CONNECT:return bi(e);case q.DISCONNECT:return e===void 0;case q.CONNECT_ERROR:return typeof e=="string"||bi(e);case q.EVENT:case q.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&uo.indexOf(e[0])===-1);case q.ACK:case q.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class po{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const e=lo(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const vo=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Jn,Encoder:fo,get PacketType(){return q},protocol:ho},Symbol.toStringTag,{value:"Module"}));function _t(n,t,e){return n.on(t,e),function(){n.off(t,e)}}const go=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});let _s=class extends tt{constructor(t,e,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[_t(t,"open",this.onopen.bind(this)),_t(t,"packet",this.onpacket.bind(this)),_t(t,"error",this.onerror.bind(this)),_t(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){var i,s,r;if(go.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const o={type:q.EVENT,data:e};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){const c=this.ids++,l=e.pop();this._registerAckCallback(c,l),o.id=c}const a=(s=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||s===void 0?void 0:s.writable,u=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!a||(u?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,e){var i;const s=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(s===void 0){this.acks[t]=e;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===t&&this.sendBuffer.splice(a,1);e.call(this,new Error("operation has timed out"))},s),o=(...a)=>{this.io.clearTimeoutFn(r),e.apply(this,a)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...e){return new Promise((i,s)=>{const r=(o,a)=>o?s(o):i(a);r.withError=!0,e.push(r),this.emit(t,...e)})}_addToQueue(t){let e;typeof t[t.length-1]=="function"&&(e=t.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((s,...r)=>i!==this._queue[0]?void 0:(s!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(s)):(this._queue.shift(),e&&e(null,...r)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:q.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(i=>String(i.id)===t)){const i=this.acks[t];delete this.acks[t],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case q.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case q.EVENT:case q.BINARY_EVENT:this.onevent(t);break;case q.ACK:case q.BINARY_ACK:this.onack(t);break;case q.DISCONNECT:this.ondisconnect();break;case q.CONNECT_ERROR:this.destroy();const i=new Error(t.data.message);i.data=t.data.data,this.emitReserved("connect_error",i);break}}onevent(t){const e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const i of e)i.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const e=this;let i=!1;return function(...s){i||(i=!0,e.packet({type:q.ACK,id:t,data:s}))}}onack(t){const e=this.acks[t.id];typeof e=="function"&&(delete this.acks[t.id],e.withError&&t.data.unshift(null),e.apply(this,t.data))}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:q.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const i of e)i.apply(this,t.data)}}};function ie(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}ie.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*n);n=Math.floor(t*10)&1?n+e:n-e}return Math.min(n,this.max)|0};ie.prototype.reset=function(){this.attempts=0};ie.prototype.setMin=function(n){this.ms=n};ie.prototype.setMax=function(n){this.max=n};ie.prototype.setJitter=function(n){this.jitter=n};class En extends tt{constructor(t,e){var i;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,Qe(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((i=e.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new ie({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;const s=e.parser||vo;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new no(this.uri,this.opts);const e=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const s=_t(e,"open",function(){i.onopen(),t&&t()}),r=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),t?t(a):this.maybeReconnectOnOpen()},o=_t(e,"error",r);if(this._timeout!==!1){const a=this._timeout,u=this.setTimeoutFn(()=>{s(),r(new Error("timeout")),e.close()},a);this.opts.autoUnref&&u.unref(),this.subs.push(()=>{this.clearTimeoutFn(u)})}return this.subs.push(s),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(_t(t,"ping",this.onping.bind(this)),_t(t,"data",this.ondata.bind(this)),_t(t,"error",this.onerror.bind(this)),_t(t,"close",this.onclose.bind(this)),_t(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}ondecoded(t){Ze(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let i=this.nsps[t];return i?this._autoConnect&&!i.active&&i.connect():(i=new _s(this,t,e),this.nsps[t]=i),i}_destroy(t){const e=Object.keys(this.nsps);for(const i of e)if(this.nsps[i].active)return;this._close()}_packet(t){const e=this.encoder.encode(t);for(let i=0;i<e.length;i++)this.engine.write(e[i],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,e){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(s=>{s?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",s)):t.onreconnect()}))},e);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const oe={};function ve(n,t){typeof n=="object"&&(t=n,n=void 0),t=t||{};const e=io(n,t.path||"/socket.io"),i=e.source,s=e.id,r=e.path,o=oe[s]&&r in oe[s].nsps,a=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let u;return a?u=new En(i,t):(oe[s]||(oe[s]=new En(i,t)),u=oe[s]),e.query&&!t.query&&(t.query=e.queryKey),u.socket(e.path,t)}Object.assign(ve,{Manager:En,Socket:_s,io:ve,connect:ve});class mo{constructor(){if(this.enabled=!1,typeof ve=="function"){const t=Je(Un);this.socket=ve(t),this.socket&&(this.socket.on("connect",()=>{this.enabled=!0,console.log("Connected to websocket Obelix 1.0")}),this.socket.on("update_settings",e=>{console.log("SOCKETio",e),typeof e=="object"&&!Array.isArray(e)&&e!==null&&ne.update(i=>({...i,...e}))}))}}destroy(){this.socket.offAny(),this.socket.disconnect()}emit(t){this.enabled&&this.socket.emit("message",t)}emitReply(t,e){this.enabled&&(console.log("emitReply"),this.socket.emit("message_reply",t,(i,s)=>{console.log("emitReply response",i,s),typeof e=="function"&&e(s)}))}}const ys=new mo;function ot(n,t){ys.emit({get:"foo"}),fetch(Je(Un)+n).then(e=>e.json()).then(e=>{typeof t=="function"&&t(e)})}function Ge(n,t,e){ys.emitReply({post:"foo"},e),fetch(Je(Un)+n,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then(i=>i.json()).then(i=>{e&&e(i)})}class jt{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let i=0;for(let s=0;s<this._n&&s<32;s++){const r=e[s],o=t+r,a=Math.abs(t)<Math.abs(r)?t-(o-r):r-(o-t);a&&(e[i++]=a),t=o}return e[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let e=this._n,i,s,r,o=0;if(e>0){for(o=t[--e];e>0&&(i=o,s=t[--e],o=i+s,r=s-(o-i),!r););e>0&&(r<0&&t[e-1]<0||r>0&&t[e-1]>0)&&(s=r*2,i=o+s,s==i-o&&(o=i))}return o}}function*_o(n){for(const t of n)yield*t}function ws(n){return Array.from(_o(n))}function Wt(n,t,e){n=+n,t=+t,e=(s=arguments.length)<2?(t=n,n=0,1):s<3?1:+e;for(var i=-1,s=Math.max(0,Math.ceil((t-n)/e))|0,r=new Array(s);++i<s;)r[i]=n+i*e;return r}var j=1e-6,yo=1e-12,U=Math.PI,ft=U/2,Ei=U/4,vt=U*2,Mt=180/U,lt=U/180,W=Math.abs,wo=Math.atan,Gt=Math.atan2,J=Math.cos,xe=Math.ceil,K=Math.sin,bo=Math.sign||function(n){return n>0?1:n<0?-1:0},It=Math.sqrt;function Eo(n){return n>1?0:n<-1?U:Math.acos(n)}function Ft(n){return n>1?ft:n<-1?-ft:Math.asin(n)}function dt(){}function qe(n,t){n&&Si.hasOwnProperty(n.type)&&Si[n.type](n,t)}var ki={Feature:function(n,t){qe(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,i=-1,s=e.length;++i<s;)qe(e[i].geometry,t)}},Si={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,i=-1,s=e.length;++i<s;)n=e[i],t.point(n[0],n[1],n[2])},LineString:function(n,t){kn(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,i=-1,s=e.length;++i<s;)kn(e[i],t,0)},Polygon:function(n,t){xi(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,i=-1,s=e.length;++i<s;)xi(e[i],t)},GeometryCollection:function(n,t){for(var e=n.geometries,i=-1,s=e.length;++i<s;)qe(e[i],t)}};function kn(n,t,e){var i=-1,s=n.length-e,r;for(t.lineStart();++i<s;)r=n[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function xi(n,t){var e=-1,i=n.length;for(t.polygonStart();++e<i;)kn(n[e],t,1);t.polygonEnd()}function Yt(n,t){n&&ki.hasOwnProperty(n.type)?ki[n.type](n,t):qe(n,t)}function Sn(n){return[Gt(n[1],n[0]),Ft(n[2])]}function te(n){var t=n[0],e=n[1],i=J(e);return[i*J(t),i*K(t),K(e)]}function Te(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function je(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function un(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function Ae(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function xn(n){var t=It(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function Tn(n,t){function e(i,s){return i=n(i,s),t(i[0],i[1])}return n.invert&&t.invert&&(e.invert=function(i,s){return i=t.invert(i,s),i&&n.invert(i[0],i[1])}),e}function An(n,t){return W(n)>U&&(n-=Math.round(n/vt)*vt),[n,t]}An.invert=An;function ko(n,t,e){return(n%=vt)?t||e?Tn(Ai(n),Ci(t,e)):Ai(n):t||e?Ci(t,e):An}function Ti(n){return function(t,e){return t+=n,W(t)>U&&(t-=Math.round(t/vt)*vt),[t,e]}}function Ai(n){var t=Ti(n);return t.invert=Ti(-n),t}function Ci(n,t){var e=J(n),i=K(n),s=J(t),r=K(t);function o(a,u){var d=J(u),c=J(a)*d,l=K(a)*d,h=K(u),p=h*e+c*i;return[Gt(l*s-p*r,c*e-h*i),Ft(p*s+l*r)]}return o.invert=function(a,u){var d=J(u),c=J(a)*d,l=K(a)*d,h=K(u),p=h*s-l*r;return[Gt(l*s+h*r,c*e+p*i),Ft(p*e-c*i)]},o}function So(n,t,e,i,s,r){if(e){var o=J(t),a=K(t),u=i*e;s==null?(s=t+i*vt,r=t-u/2):(s=Ri(o,s),r=Ri(o,r),(i>0?s<r:s>r)&&(s+=i*vt));for(var d,c=s;i>0?c>r:c<r;c-=u)d=Sn([o,-a*J(c),-a*K(c)]),n.point(d[0],d[1])}}function Ri(n,t){t=te(t),t[0]-=n,xn(t);var e=Eo(-t[1]);return((-t[2]<0?-e:e)+vt-j)%vt}function bs(){var n=[],t;return{point:function(e,i,s){t.push([e,i,s])},lineStart:function(){n.push(t=[])},lineEnd:dt,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function De(n,t){return W(n[0]-t[0])<j&&W(n[1]-t[1])<j}function Ce(n,t,e,i){this.x=n,this.z=t,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function Es(n,t,e,i,s){var r=[],o=[],a,u;if(n.forEach(function(f){if(!((w=f.length-1)<=0)){var w,_=f[0],b=f[w],E;if(De(_,b)){if(!_[2]&&!b[2]){for(s.lineStart(),a=0;a<w;++a)s.point((_=f[a])[0],_[1]);s.lineEnd();return}b[0]+=2*j}r.push(E=new Ce(_,f,null,!0)),o.push(E.o=new Ce(_,null,E,!1)),r.push(E=new Ce(b,f,null,!1)),o.push(E.o=new Ce(b,null,E,!0))}}),!!r.length){for(o.sort(t),Oi(r),Oi(o),a=0,u=o.length;a<u;++a)o[a].e=e=!e;for(var d=r[0],c,l;;){for(var h=d,p=!0;h.v;)if((h=h.n)===d)return;c=h.z,s.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(a=0,u=c.length;a<u;++a)s.point((l=c[a])[0],l[1]);else i(h.x,h.n.x,1,s);h=h.n}else{if(p)for(c=h.p.z,a=c.length-1;a>=0;--a)s.point((l=c[a])[0],l[1]);else i(h.x,h.p.x,-1,s);h=h.p}h=h.o,c=h.z,p=!p}while(!h.v);s.lineEnd()}}}function Oi(n){if(t=n.length){for(var t,e=0,i=n[0],s;++e<t;)i.n=s=n[e],s.p=i,i=s;i.n=s=n[0],s.p=i}}function hn(n){return W(n[0])<=U?n[0]:bo(n[0])*((W(n[0])+U)%vt-U)}function xo(n,t){var e=hn(t),i=t[1],s=K(i),r=[K(e),-J(e),0],o=0,a=0,u=new jt;s===1?i=ft+j:s===-1&&(i=-ft-j);for(var d=0,c=n.length;d<c;++d)if(h=(l=n[d]).length)for(var l,h,p=l[h-1],f=hn(p),w=p[1]/2+Ei,_=K(w),b=J(w),E=0;E<h;++E,f=y,_=R,b=$,p=v){var v=l[E],y=hn(v),k=v[1]/2+Ei,R=K(k),$=J(k),O=y-f,x=O>=0?1:-1,C=x*O,S=C>U,D=_*R;if(u.add(Gt(D*x*K(C),b*$+D*J(C))),o+=S?O+x*vt:O,S^f>=e^y>=e){var M=je(te(p),te(v));xn(M);var N=je(r,M);xn(N);var m=(S^O>=0?-1:1)*Ft(N[2]);(i>m||i===m&&(M[0]||M[1]))&&(a+=S^O>=0?1:-1)}}return(o<-j||o<j&&u<-yo)^a&1}function ks(n,t,e,i){return function(s){var r=t(s),o=bs(),a=t(o),u=!1,d,c,l,h={point:p,lineStart:w,lineEnd:_,polygonStart:function(){h.point=b,h.lineStart=E,h.lineEnd=v,c=[],d=[]},polygonEnd:function(){h.point=p,h.lineStart=w,h.lineEnd=_,c=ws(c);var y=xo(d,i);c.length?(u||(s.polygonStart(),u=!0),Es(c,Ao,y,e,s)):y&&(u||(s.polygonStart(),u=!0),s.lineStart(),e(null,null,1,s),s.lineEnd()),u&&(s.polygonEnd(),u=!1),c=d=null},sphere:function(){s.polygonStart(),s.lineStart(),e(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function p(y,k){n(y,k)&&s.point(y,k)}function f(y,k){r.point(y,k)}function w(){h.point=f,r.lineStart()}function _(){h.point=p,r.lineEnd()}function b(y,k){l.push([y,k]),a.point(y,k)}function E(){a.lineStart(),l=[]}function v(){b(l[0][0],l[0][1]),a.lineEnd();var y=a.clean(),k=o.result(),R,$=k.length,O,x,C;if(l.pop(),d.push(l),l=null,!!$){if(y&1){if(x=k[0],(O=x.length-1)>0){for(u||(s.polygonStart(),u=!0),s.lineStart(),R=0;R<O;++R)s.point((C=x[R])[0],C[1]);s.lineEnd()}return}$>1&&y&2&&k.push(k.pop().concat(k.shift())),c.push(k.filter(To))}}return h}}function To(n){return n.length>1}function Ao(n,t){return((n=n.x)[0]<0?n[1]-ft-j:ft-n[1])-((t=t.x)[0]<0?t[1]-ft-j:ft-t[1])}const Mi=ks(function(){return!0},Co,Oo,[-U,-ft]);function Co(n){var t=NaN,e=NaN,i=NaN,s;return{lineStart:function(){n.lineStart(),s=1},point:function(r,o){var a=r>0?U:-U,u=W(r-t);W(u-U)<j?(n.point(t,e=(e+o)/2>0?ft:-ft),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(a,e),n.point(r,e),s=0):i!==a&&u>=U&&(W(t-i)<j&&(t-=i*j),W(r-a)<j&&(r-=a*j),e=Ro(t,e,r,o),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(a,e),s=0),n.point(t=r,e=o),i=a},lineEnd:function(){n.lineEnd(),t=e=NaN},clean:function(){return 2-s}}}function Ro(n,t,e,i){var s,r,o=K(n-e);return W(o)>j?wo((K(t)*(r=J(i))*K(e)-K(i)*(s=J(t))*K(n))/(s*r*o)):(t+i)/2}function Oo(n,t,e,i){var s;if(n==null)s=e*ft,i.point(-U,s),i.point(0,s),i.point(U,s),i.point(U,0),i.point(U,-s),i.point(0,-s),i.point(-U,-s),i.point(-U,0),i.point(-U,s);else if(W(n[0]-t[0])>j){var r=n[0]<t[0]?U:-U;s=e*r/2,i.point(-r,s),i.point(0,s),i.point(r,s)}else i.point(t[0],t[1])}function Mo(n){var t=J(n),e=2*lt,i=t>0,s=W(t)>j;function r(c,l,h,p){So(p,n,e,h,c,l)}function o(c,l){return J(c)*J(l)>t}function a(c){var l,h,p,f,w;return{lineStart:function(){f=p=!1,w=1},point:function(_,b){var E=[_,b],v,y=o(_,b),k=i?y?0:d(_,b):y?d(_+(_<0?U:-U),b):0;if(!l&&(f=p=y)&&c.lineStart(),y!==p&&(v=u(l,E),(!v||De(l,v)||De(E,v))&&(E[2]=1)),y!==p)w=0,y?(c.lineStart(),v=u(E,l),c.point(v[0],v[1])):(v=u(l,E),c.point(v[0],v[1],2),c.lineEnd()),l=v;else if(s&&l&&i^y){var R;!(k&h)&&(R=u(E,l,!0))&&(w=0,i?(c.lineStart(),c.point(R[0][0],R[0][1]),c.point(R[1][0],R[1][1]),c.lineEnd()):(c.point(R[1][0],R[1][1]),c.lineEnd(),c.lineStart(),c.point(R[0][0],R[0][1],3)))}y&&(!l||!De(l,E))&&c.point(E[0],E[1]),l=E,p=y,h=k},lineEnd:function(){p&&c.lineEnd(),l=null},clean:function(){return w|(f&&p)<<1}}}function u(c,l,h){var p=te(c),f=te(l),w=[1,0,0],_=je(p,f),b=Te(_,_),E=_[0],v=b-E*E;if(!v)return!h&&c;var y=t*b/v,k=-t*E/v,R=je(w,_),$=Ae(w,y),O=Ae(_,k);un($,O);var x=R,C=Te($,x),S=Te(x,x),D=C*C-S*(Te($,$)-1);if(!(D<0)){var M=It(D),N=Ae(x,(-C-M)/S);if(un(N,$),N=Sn(N),!h)return N;var m=c[0],L=l[0],z=c[1],X=l[1],V;L<m&&(V=m,m=L,L=V);var ct=L-m,G=W(ct-U)<j,Et=G||ct<j;if(!G&&X<z&&(V=z,z=X,X=V),Et?G?z+X>0^N[1]<(W(N[0]-m)<j?z:X):z<=N[1]&&N[1]<=X:ct>U^(m<=N[0]&&N[0]<=L)){var et=Ae(x,(-C+M)/S);return un(et,$),[N,Sn(et)]}}}function d(c,l){var h=i?n:U-n,p=0;return c<-h?p|=1:c>h&&(p|=2),l<-h?p|=4:l>h&&(p|=8),p}return ks(o,a,r,i?[0,-n]:[-U,n-U])}function Lo(n,t,e,i,s,r){var o=n[0],a=n[1],u=t[0],d=t[1],c=0,l=1,h=u-o,p=d-a,f;if(f=e-o,!(!h&&f>0)){if(f/=h,h<0){if(f<c)return;f<l&&(l=f)}else if(h>0){if(f>l)return;f>c&&(c=f)}if(f=s-o,!(!h&&f<0)){if(f/=h,h<0){if(f>l)return;f>c&&(c=f)}else if(h>0){if(f<c)return;f<l&&(l=f)}if(f=i-a,!(!p&&f>0)){if(f/=p,p<0){if(f<c)return;f<l&&(l=f)}else if(p>0){if(f>l)return;f>c&&(c=f)}if(f=r-a,!(!p&&f<0)){if(f/=p,p<0){if(f>l)return;f>c&&(c=f)}else if(p>0){if(f<c)return;f<l&&(l=f)}return c>0&&(n[0]=o+c*h,n[1]=a+c*p),l<1&&(t[0]=o+l*h,t[1]=a+l*p),!0}}}}}var ce=1e9,Re=-ce;function No(n,t,e,i){function s(d,c){return n<=d&&d<=e&&t<=c&&c<=i}function r(d,c,l,h){var p=0,f=0;if(d==null||(p=o(d,l))!==(f=o(c,l))||u(d,c)<0^l>0)do h.point(p===0||p===3?n:e,p>1?i:t);while((p=(p+l+4)%4)!==f);else h.point(c[0],c[1])}function o(d,c){return W(d[0]-n)<j?c>0?0:3:W(d[0]-e)<j?c>0?2:1:W(d[1]-t)<j?c>0?1:0:c>0?3:2}function a(d,c){return u(d.x,c.x)}function u(d,c){var l=o(d,1),h=o(c,1);return l!==h?l-h:l===0?c[1]-d[1]:l===1?d[0]-c[0]:l===2?d[1]-c[1]:c[0]-d[0]}return function(d){var c=d,l=bs(),h,p,f,w,_,b,E,v,y,k,R,$={point:O,lineStart:D,lineEnd:M,polygonStart:C,polygonEnd:S};function O(m,L){s(m,L)&&c.point(m,L)}function x(){for(var m=0,L=0,z=p.length;L<z;++L)for(var X=p[L],V=1,ct=X.length,G=X[0],Et,et,Ut=G[0],mt=G[1];V<ct;++V)Et=Ut,et=mt,G=X[V],Ut=G[0],mt=G[1],et<=i?mt>i&&(Ut-Et)*(i-et)>(mt-et)*(n-Et)&&++m:mt<=i&&(Ut-Et)*(i-et)<(mt-et)*(n-Et)&&--m;return m}function C(){c=l,h=[],p=[],R=!0}function S(){var m=x(),L=R&&m,z=(h=ws(h)).length;(L||z)&&(d.polygonStart(),L&&(d.lineStart(),r(null,null,1,d),d.lineEnd()),z&&Es(h,a,m,r,d),d.polygonEnd()),c=d,h=p=f=null}function D(){$.point=N,p&&p.push(f=[]),k=!0,y=!1,E=v=NaN}function M(){h&&(N(w,_),b&&y&&l.rejoin(),h.push(l.result())),$.point=O,y&&c.lineEnd()}function N(m,L){var z=s(m,L);if(p&&f.push([m,L]),k)w=m,_=L,b=z,k=!1,z&&(c.lineStart(),c.point(m,L));else if(z&&y)c.point(m,L);else{var X=[E=Math.max(Re,Math.min(ce,E)),v=Math.max(Re,Math.min(ce,v))],V=[m=Math.max(Re,Math.min(ce,m)),L=Math.max(Re,Math.min(ce,L))];Lo(X,V,n,t,e,i)?(y||(c.lineStart(),c.point(X[0],X[1])),c.point(V[0],V[1]),z||c.lineEnd(),R=!1):z&&(c.lineStart(),c.point(m,L),R=!1)}E=m,v=L,y=z}return $}}function Li(n,t,e){var i=Wt(n,t-j,e).concat(t);return function(s){return i.map(function(r){return[s,r]})}}function Ni(n,t,e){var i=Wt(n,t-j,e).concat(t);return function(s){return i.map(function(r){return[r,s]})}}function Bo(){var n,t,e,i,s,r,o,a,u=10,d=u,c=90,l=360,h,p,f,w,_=2.5;function b(){return{type:"MultiLineString",coordinates:E()}}function E(){return Wt(xe(i/c)*c,e,c).map(f).concat(Wt(xe(a/l)*l,o,l).map(w)).concat(Wt(xe(t/u)*u,n,u).filter(function(v){return W(v%c)>j}).map(h)).concat(Wt(xe(r/d)*d,s,d).filter(function(v){return W(v%l)>j}).map(p))}return b.lines=function(){return E().map(function(v){return{type:"LineString",coordinates:v}})},b.outline=function(){return{type:"Polygon",coordinates:[f(i).concat(w(o).slice(1),f(e).reverse().slice(1),w(a).reverse().slice(1))]}},b.extent=function(v){return arguments.length?b.extentMajor(v).extentMinor(v):b.extentMinor()},b.extentMajor=function(v){return arguments.length?(i=+v[0][0],e=+v[1][0],a=+v[0][1],o=+v[1][1],i>e&&(v=i,i=e,e=v),a>o&&(v=a,a=o,o=v),b.precision(_)):[[i,a],[e,o]]},b.extentMinor=function(v){return arguments.length?(t=+v[0][0],n=+v[1][0],r=+v[0][1],s=+v[1][1],t>n&&(v=t,t=n,n=v),r>s&&(v=r,r=s,s=v),b.precision(_)):[[t,r],[n,s]]},b.step=function(v){return arguments.length?b.stepMajor(v).stepMinor(v):b.stepMinor()},b.stepMajor=function(v){return arguments.length?(c=+v[0],l=+v[1],b):[c,l]},b.stepMinor=function(v){return arguments.length?(u=+v[0],d=+v[1],b):[u,d]},b.precision=function(v){return arguments.length?(_=+v,h=Li(r,s,90),p=Ni(t,n,_),f=Li(a,o,90),w=Ni(i,e,_),b):_},b.extentMajor([[-180,-90+j],[180,90-j]]).extentMinor([[-180,-80-j],[180,80+j]])}const Cn=n=>n;var fn=new jt,Rn=new jt,Ss,xs,On,Mn,Lt={point:dt,lineStart:dt,lineEnd:dt,polygonStart:function(){Lt.lineStart=$o,Lt.lineEnd=Do},polygonEnd:function(){Lt.lineStart=Lt.lineEnd=Lt.point=dt,fn.add(W(Rn)),Rn=new jt},result:function(){var n=fn/2;return fn=new jt,n}};function $o(){Lt.point=Po}function Po(n,t){Lt.point=Ts,Ss=On=n,xs=Mn=t}function Ts(n,t){Rn.add(Mn*n-On*t),On=n,Mn=t}function Do(){Ts(Ss,xs)}var ee=1/0,Fe=ee,ge=-ee,ze=ge,Ue={point:Io,lineStart:dt,lineEnd:dt,polygonStart:dt,polygonEnd:dt,result:function(){var n=[[ee,Fe],[ge,ze]];return ge=ze=-(Fe=ee=1/0),n}};function Io(n,t){n<ee&&(ee=n),n>ge&&(ge=n),t<Fe&&(Fe=t),t>ze&&(ze=t)}var Ln=0,Nn=0,le=0,Ye=0,He=0,Kt=0,Bn=0,$n=0,ue=0,As,Cs,St,xt,ht={point:zt,lineStart:Bi,lineEnd:$i,polygonStart:function(){ht.lineStart=jo,ht.lineEnd=Fo},polygonEnd:function(){ht.point=zt,ht.lineStart=Bi,ht.lineEnd=$i},result:function(){var n=ue?[Bn/ue,$n/ue]:Kt?[Ye/Kt,He/Kt]:le?[Ln/le,Nn/le]:[NaN,NaN];return Ln=Nn=le=Ye=He=Kt=Bn=$n=ue=0,n}};function zt(n,t){Ln+=n,Nn+=t,++le}function Bi(){ht.point=Vo}function Vo(n,t){ht.point=qo,zt(St=n,xt=t)}function qo(n,t){var e=n-St,i=t-xt,s=It(e*e+i*i);Ye+=s*(St+n)/2,He+=s*(xt+t)/2,Kt+=s,zt(St=n,xt=t)}function $i(){ht.point=zt}function jo(){ht.point=zo}function Fo(){Rs(As,Cs)}function zo(n,t){ht.point=Rs,zt(As=St=n,Cs=xt=t)}function Rs(n,t){var e=n-St,i=t-xt,s=It(e*e+i*i);Ye+=s*(St+n)/2,He+=s*(xt+t)/2,Kt+=s,s=xt*n-St*t,Bn+=s*(St+n),$n+=s*(xt+t),ue+=s*3,zt(St=n,xt=t)}function Os(n){this._context=n}Os.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,vt);break}}},result:dt};var Pn=new jt,dn,Ms,Ls,he,fe,me={point:dt,lineStart:function(){me.point=Uo},lineEnd:function(){dn&&Ns(Ms,Ls),me.point=dt},polygonStart:function(){dn=!0},polygonEnd:function(){dn=null},result:function(){var n=+Pn;return Pn=new jt,n}};function Uo(n,t){me.point=Ns,Ms=he=n,Ls=fe=t}function Ns(n,t){he-=n,fe-=t,Pn.add(It(he*he+fe*fe)),he=n,fe=t}let Pi,Xe,Di,Ii;class Vi{constructor(t){this._append=t==null?Bs:Yo(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,e){switch(this._point){case 0:{this._append`M${t},${e}`,this._point=1;break}case 1:{this._append`L${t},${e}`;break}default:{if(this._append`M${t},${e}`,this._radius!==Di||this._append!==Xe){const i=this._radius,s=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,Di=i,Xe=this._append,Ii=this._,this._=s}this._+=Ii;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Bs(n){let t=1;this._+=n[0];for(const e=n.length;t<e;++t)this._+=arguments[t]+n[t]}function Yo(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return Bs;if(t!==Pi){const e=10**t;Pi=t,Xe=function(s){let r=1;this._+=s[0];for(const o=s.length;r<o;++r)this._+=Math.round(arguments[r]*e)/e+s[r]}}return Xe}function Ho(n,t){let e=3,i=4.5,s,r;function o(a){return a&&(typeof i=="function"&&r.pointRadius(+i.apply(this,arguments)),Yt(a,s(r))),r.result()}return o.area=function(a){return Yt(a,s(Lt)),Lt.result()},o.measure=function(a){return Yt(a,s(me)),me.result()},o.bounds=function(a){return Yt(a,s(Ue)),Ue.result()},o.centroid=function(a){return Yt(a,s(ht)),ht.result()},o.projection=function(a){return arguments.length?(s=a==null?(n=null,Cn):(n=a).stream,o):n},o.context=function(a){return arguments.length?(r=a==null?(t=null,new Vi(e)):new Os(t=a),typeof i!="function"&&r.pointRadius(i),o):t},o.pointRadius=function(a){return arguments.length?(i=typeof a=="function"?a:(r.pointRadius(+a),+a),o):i},o.digits=function(a){if(!arguments.length)return e;if(a==null)e=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);e=u}return t===null&&(r=new Vi(e)),o},o.projection(n).digits(e).context(t)}function Zn(n){return function(t){var e=new Dn;for(var i in n)e[i]=n[i];return e.stream=t,e}}function Dn(){}Dn.prototype={constructor:Dn,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Qn(n,t,e){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),i!=null&&n.clipExtent(null),Yt(e,n.stream(Ue)),t(Ue.result()),i!=null&&n.clipExtent(i),n}function $s(n,t,e){return Qn(n,function(i){var s=t[1][0]-t[0][0],r=t[1][1]-t[0][1],o=Math.min(s/(i[1][0]-i[0][0]),r/(i[1][1]-i[0][1])),a=+t[0][0]+(s-o*(i[1][0]+i[0][0]))/2,u=+t[0][1]+(r-o*(i[1][1]+i[0][1]))/2;n.scale(150*o).translate([a,u])},e)}function Xo(n,t,e){return $s(n,[[0,0],t],e)}function Wo(n,t,e){return Qn(n,function(i){var s=+t,r=s/(i[1][0]-i[0][0]),o=(s-r*(i[1][0]+i[0][0]))/2,a=-r*i[0][1];n.scale(150*r).translate([o,a])},e)}function Ko(n,t,e){return Qn(n,function(i){var s=+t,r=s/(i[1][1]-i[0][1]),o=-r*i[0][0],a=(s-r*(i[1][1]+i[0][1]))/2;n.scale(150*r).translate([o,a])},e)}var qi=16,Jo=J(30*lt);function ji(n,t){return+t?Qo(n,t):Zo(n)}function Zo(n){return Zn({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}function Qo(n,t){function e(i,s,r,o,a,u,d,c,l,h,p,f,w,_){var b=d-i,E=c-s,v=b*b+E*E;if(v>4*t&&w--){var y=o+h,k=a+p,R=u+f,$=It(y*y+k*k+R*R),O=Ft(R/=$),x=W(W(R)-1)<j||W(r-l)<j?(r+l)/2:Gt(k,y),C=n(x,O),S=C[0],D=C[1],M=S-i,N=D-s,m=E*M-b*N;(m*m/v>t||W((b*M+E*N)/v-.5)>.3||o*h+a*p+u*f<Jo)&&(e(i,s,r,o,a,u,S,D,x,y/=$,k/=$,R,w,_),_.point(S,D),e(S,D,x,y,k,R,d,c,l,h,p,f,w,_))}}return function(i){var s,r,o,a,u,d,c,l,h,p,f,w,_={point:b,lineStart:E,lineEnd:y,polygonStart:function(){i.polygonStart(),_.lineStart=k},polygonEnd:function(){i.polygonEnd(),_.lineStart=E}};function b(O,x){O=n(O,x),i.point(O[0],O[1])}function E(){l=NaN,_.point=v,i.lineStart()}function v(O,x){var C=te([O,x]),S=n(O,x);e(l,h,c,p,f,w,l=S[0],h=S[1],c=O,p=C[0],f=C[1],w=C[2],qi,i),i.point(l,h)}function y(){_.point=b,i.lineEnd()}function k(){E(),_.point=R,_.lineEnd=$}function R(O,x){v(s=O,x),r=l,o=h,a=p,u=f,d=w,_.point=v}function $(){e(l,h,c,p,f,w,r,o,s,a,u,d,qi,i),_.lineEnd=y,y()}return _}}var Go=Zn({point:function(n,t){this.stream.point(n*lt,t*lt)}});function ta(n){return Zn({point:function(t,e){var i=n(t,e);return this.stream.point(i[0],i[1])}})}function ea(n,t,e,i,s){function r(o,a){return o*=i,a*=s,[t+n*o,e-n*a]}return r.invert=function(o,a){return[(o-t)/n*i,(e-a)/n*s]},r}function Fi(n,t,e,i,s,r){if(!r)return ea(n,t,e,i,s);var o=J(r),a=K(r),u=o*n,d=a*n,c=o/n,l=a/n,h=(a*e-o*t)/n,p=(a*t+o*e)/n;function f(w,_){return w*=i,_*=s,[u*w-d*_+t,e-d*w-u*_]}return f.invert=function(w,_){return[i*(c*w-l*_+h),s*(p-l*w-c*_)]},f}function na(n){return ia(function(){return n})()}function ia(n){var t,e=150,i=480,s=250,r=0,o=0,a=0,u=0,d=0,c,l=0,h=1,p=1,f=null,w=Mi,_=null,b,E,v,y=Cn,k=.5,R,$,O,x,C;function S(m){return O(m[0]*lt,m[1]*lt)}function D(m){return m=O.invert(m[0],m[1]),m&&[m[0]*Mt,m[1]*Mt]}S.stream=function(m){return x&&C===m?x:x=Go(ta(c)(w(R(y(C=m)))))},S.preclip=function(m){return arguments.length?(w=m,f=void 0,N()):w},S.postclip=function(m){return arguments.length?(y=m,_=b=E=v=null,N()):y},S.clipAngle=function(m){return arguments.length?(w=+m?Mo(f=m*lt):(f=null,Mi),N()):f*Mt},S.clipExtent=function(m){return arguments.length?(y=m==null?(_=b=E=v=null,Cn):No(_=+m[0][0],b=+m[0][1],E=+m[1][0],v=+m[1][1]),N()):_==null?null:[[_,b],[E,v]]},S.scale=function(m){return arguments.length?(e=+m,M()):e},S.translate=function(m){return arguments.length?(i=+m[0],s=+m[1],M()):[i,s]},S.center=function(m){return arguments.length?(r=m[0]%360*lt,o=m[1]%360*lt,M()):[r*Mt,o*Mt]},S.rotate=function(m){return arguments.length?(a=m[0]%360*lt,u=m[1]%360*lt,d=m.length>2?m[2]%360*lt:0,M()):[a*Mt,u*Mt,d*Mt]},S.angle=function(m){return arguments.length?(l=m%360*lt,M()):l*Mt},S.reflectX=function(m){return arguments.length?(h=m?-1:1,M()):h<0},S.reflectY=function(m){return arguments.length?(p=m?-1:1,M()):p<0},S.precision=function(m){return arguments.length?(R=ji($,k=m*m),N()):It(k)},S.fitExtent=function(m,L){return $s(S,m,L)},S.fitSize=function(m,L){return Xo(S,m,L)},S.fitWidth=function(m,L){return Wo(S,m,L)},S.fitHeight=function(m,L){return Ko(S,m,L)};function M(){var m=Fi(e,0,0,h,p,l).apply(null,t(r,o)),L=Fi(e,i-m[0],s-m[1],h,p,l);return c=ko(a,u,d),$=Tn(t,L),O=Tn(c,$),R=ji($,k),N()}function N(){return x=C=null,S}return function(){return t=n.apply(this,arguments),S.invert=t.invert&&D,M()}}function sa(n){return function(t,e){var i=It(t*t+e*e),s=n(i),r=K(s),o=J(s);return[Gt(t*r,i*o),Ft(i&&e*r/i)]}}function Ps(n,t){return[J(t)*K(n),K(t)]}Ps.invert=sa(Ft);function ra(){return na(Ps).scale(249.5).clipAngle(90+j)}var oa=ye('<path fill="none" class="graticule svelte-1yv80ee" stroke-width="0.3"></path>');function zi(n,t){it(t,!0);let e=H(0),i=H(0);const s=ne.subscribe(l=>{I(e,Q(l.deg_x)),I(i,Q(l.deg_y))});gt(()=>{s&&s()});const r=Bt(t,"scale",3,2e3),o=Bt(t,"steps",3,5),a=Bo().stepMajor([45,45]).stepMinor([o(),o()]);let u=Zt(()=>ra().scale(r()).rotate([-g(e),-g(i)]).translate([1080/2,810/2]).clipAngle(40)),d=Zt(()=>Ho().projection(g(u)));var c=oa();nt(()=>Y(c,"d",g(d)(a()))),P(n,c),st()}function In(n){return typeof n=="string"?n.toLowerCase().trim().replaceAll("ä","ae").replaceAll("ö","oe").replaceAll("ü","ue").replaceAll("ß","ss").replace(/\W+/g,"_").replace(/^_|_$/g,""):null}const Ui={fid:"",geo:{addr:"",lat:53.6,lon:9.9},base:[{id:"home",name:"Primary target",pos:{x:-23900,y:0,f:500}},{id:"polaris",name:"Polaris",pos:{x:0,y:11912,f:600}}]};function aa(n,t){const e={...Ui.geo,addr:t},i=[];for(let s of Ui.base)i.push({...s,pos:{...s.pos}});return{fid:n,geo:e,base:i}}function Yi(n){return Math.PI*n/180}function Vn(n){return n*180/Math.PI}function ca(n){const t=Je(ne).spr;return Math.round(t*n/360)}function Oe(n){const t=Vn(n);return ca(t)}var la=(n,t)=>t("A",n),ua=(n,t)=>t("B",n),ha=F('<div id="camera-stream" class="svelte-zqlhxu"><button id="telescope-stream"><svg class="svg-img svelte-zqlhxu" preserveAspectRatio="xMidYMid slice"><foreignObject class="img-wrap svelte-zqlhxu" x="0" y="0"><img alt="Telescope" class="svg-img svelte-zqlhxu"></foreignObject><!></svg></button> <button id="viewfinder-stream"><svg class="svg-img svelte-zqlhxu" preserveAspectRatio="xMidYMid slice"><foreignObject class="img-wrap svelte-zqlhxu" x="0" y="0"><img alt="Viewfinder" class="svg-img svelte-zqlhxu"></foreignObject><g><circle r="0.0001" fill="none" stroke="none"></circle><rect class="crosshair svelte-zqlhxu"></rect><!></g></svg></button></div>');function fa(n,t){it(t,!0);const e=Rt(),i=()=>pt(Ne,"$swapPreview",e),s=()=>pt(Ie,"$displayCompass",e);let r=H(0),o=H(0);const a=1080,u=810;let d=H(void 0);const c=()=>{const V=g(d).getBoundingClientRect();return{x:g(l)==="B"?V.x:g(r)/2,y:g(l)==="B"?V.y:g(o)/2}};let l=H(void 0);const h=Ne.subscribe(V=>{I(l,Q(V))});let p=H(0),f=H(0);const w=ne.subscribe(V=>{I(p,Q(V.deg_x)),I(f,Q(V.deg_y))}),_=(V,ct)=>{if(g(l)!==V)Ne.update(G=>V);else{const G=c(),Et=Math.max(g(r)/a,g(o)/u),et={x:Math.round((ct.clientX-G.x)/Et),y:-1*Math.round((ct.clientY-G.y)/Et)},Ut=g(l)==="B"?b.SphereScaleVF:b.SphereScaleTel,mt=Yi(g(f)),Is=Yi(g(p)),tn=Math.sqrt(Math.pow(et.x,2)+Math.pow(et.y,2)),se=Math.asin(tn/Ut),Gn=Math.asin(Math.cos(se)*Math.sin(mt)+et.y*Math.sin(se)*Math.cos(mt)/tn),be=Is+Math.atan(et.x*Math.sin(se)/(tn*Math.cos(se)*Math.cos(mt)-et.y*Math.sin(se)*Math.sin(mt)));ot(`/goto/${Oe(be)}/${Oe(Gn)}`,Vs=>{console.log("GoTo cmd",Vs)}),console.log("POS:",et,Vn(Gn),Vn(be),Oe(be),Oe(be))}};let b=Q({CrosshairSize:.4,CrosshairOffsetX:0,CrosshairOffsetY:0,SphereScaleVF:1500,SphereScaleTel:24e3}),E=pe.subscribe(V=>{for(let ct of V)b[ct.id]=ct.value}),v="starfield-zoom.jpg",y="starfield.jpg";we(()=>{ot("/config/sphere/settings",V=>{console.log("MOUNT ",V),pe.update(ct=>ct.map(G=>G!=null&&G.id&&Object.hasOwn(V,G.id)?{...G,value:V[G.id]}:{...G}))})}),gt(()=>{h&&h(),E&&E(),w&&w()});var k=ha(),R=A(k);R.__click=[la,_];var $=A(R);Y($,"viewBox",`0 0 ${a} ${u}`);var O=A($);Y(O,"width",a),Y(O,"height",u);var x=A(O);T(O);var C=B(O);Z(C,s,V=>{zi(V,{get scale(){return b.SphereScaleTel},steps:"1",get width(){return g(r)},get height(){return g(o)}})}),T($),T(R);var S=B(R,2);S.__click=[ua,_];var D=A(S);Y(D,"viewBox",`0 0 ${a} ${u}`);var M=A(D);Y(M,"width",a),Y(M,"height",u);var N=A(M);T(M);var m=B(M),L=A(m);Y(L,"cx",a/2),Y(L,"cy",u/2),hr(L,V=>I(d,V),()=>g(d));var z=B(L);Y(z,"x",a/2),Y(z,"y",u/2);var X=B(z);Z(X,s,V=>{zi(V,{get scale(){return b.SphereScaleVF},steps:"15",get width(){return g(r)},get height(){return g(o)}})}),T(m),T(D),T(S),T(k),nt(()=>{At(R,`stream-wrapper ${(i()==="A"?"large":"")??""} svelte-zqlhxu`),Y($,"width",g(r)),Y($,"height",g(o)),Y(x,"src",v),At(S,`stream-wrapper ${(i()==="B"?"large":"")??""} svelte-zqlhxu`),Y(D,"width",g(r)),Y(D,"height",g(o)),Y(N,"src",y),Y(m,"transform",`translate(${a/4*b.CrosshairOffsetX} ${u/4*b.CrosshairOffsetY})`),Y(z,"transform",`translate(${g(r)*b.CrosshairSize*-.5} ${g(o)*b.CrosshairSize*-.5})`),Y(z,"width",g(r)*b.CrosshairSize),Y(z,"height",g(o)*b.CrosshairSize)}),gi(k,"clientWidth",V=>I(r,V)),gi(k,"clientHeight",V=>I(o,V)),P(n,k),st()}at(["click"]);var da=F('<div class="layer svelte-qmdbdl"><!></div>'),pa=F('<div class="visuals svelte-qmdbdl"><!> <!></div>');function va(n){const t=Rt(),e=()=>pt(Ie,"$displayCompass",t);var i=pa(),s=A(i);fa(s,{});var r=B(s,2);Z(r,e,o=>{var a=da(),u=A(a);Er(u,{}),T(a),P(o,a)}),T(i),P(n,i)}class ga{constructor(t,e){this.stick=t,this.stick&&(this.callback=e,this.dragStart=null,this.touchId=null,this.maxDistance=200,this.deadZone=8,this.active=!1,this.value={x:0,y:0},this.counter=0,this.prev={x:0,y:0},this.debounceTimer=null,this.debounceTimeout=50,this.stick.addEventListener("mousedown",i=>{this._handleDown(i)}),this.stick.addEventListener("touchstart",i=>{this._handleDown(i)}),document.addEventListener("mousemove",i=>{this._handleMove(i)},{passive:!1}),document.addEventListener("touchmove",i=>{this._handleMove(i)},{passive:!1}),document.addEventListener("mouseup",i=>{this._handleUp(i)}),document.addEventListener("touchend",i=>{this._handleUp(i)}))}destroy(){this.stick.removeEventListener("mousedown",t=>{this._handleDown(t)}),this.stick.removeEventListener("touchstart",t=>{this._handleDown(t)}),document.removeEventListener("mousemove",t=>{this._handleMove(t)}),document.removeEventListener("touchmove",t=>{this._handleMove(t)}),document.removeEventListener("mouseup",t=>{this._handleUp(t)}),document.removeEventListener("touchend",t=>{this._handleUp(t)})}_handleDown(t){this.active=!0,this.stick.style.transition="0s",t.preventDefault(),this.dragStart=t.changedTouches?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:{x:t.clientX,y:t.clientY},t.changedTouches&&(this.touchId=t.changedTouches[0].identifier)}_handleMove(t){if(!this.active)return;let e=null;if(t.changedTouches){for(let _=0;_<t.changedTouches.length;_++)this.touchId===t.changedTouches[_].identifier&&(e=_,t.clientX=t.changedTouches[_].clientX,t.clientY=t.changedTouches[_].clientY);if(e==null)return}const i=this.stick.getBoundingClientRect(),s=i?Math.round(16e3/i.width)/100:1,r=t.clientX-this.dragStart.x,o=t.clientY-this.dragStart.y,a=Math.atan2(o,r),u=Math.min(this.maxDistance,Math.hypot(r,o)*s),d=u*Math.cos(a),c=u*Math.sin(a);this.stick.style.transform=`translate(${d}px, ${c}px)`;const l=u<this.deadZone?0:this.maxDistance/(this.maxDistance-this.deadZone)*(u-this.deadZone),h=l*Math.cos(a),p=l*Math.sin(a),f=parseFloat((h/this.maxDistance).toFixed(4)),w=parseFloat((p/this.maxDistance).toFixed(4));this.value={x:f,y:w},this._loop()}_handleUp(t){this.active&&(t.changedTouches&&this.touchId!==t.changedTouches[0].identifier||(this.stick.style.transition=".2s",this.stick.style.transform="translate3d(0px, 0px, 0px)",this.value={x:0,y:0},this.touchId=null,this.active=!1))}_sendUpdate(){const t=Math.round(511.5+this.value.x*511.5),e=Math.round(511.5+this.value.y*511.5);this.callback(`/joystick/${t}/${e}`)}_debounce(t){return(...e)=>{clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{t(...e)},this.debounceTimeout)}}_update(){(this.value.x!==this.prev.x||this.value.y!==this.prev.y)&&(this.prev={...this.value},this._debounce(()=>{this._sendUpdate()})())}_loop(){this.active?this.frame=requestAnimationFrame(()=>{this._loop()}):cancelAnimationFrame(this.frame),this._update()}}class ma{constructor(t,e){this.stick=t,this.stick&&(this.callback=e,this.dragStart=null,this.touchId=null,this.maxDistance=230,this.deadZone=8,this.active=!1,this.value={f:0},this.counter=0,this.prev={f:0},this.debounceTimer=null,this.debounceTimeout=50,this.stick.addEventListener("mousedown",i=>{this._handleDown(i)}),this.stick.addEventListener("touchstart",i=>{this._handleDown(i)}),document.addEventListener("mousemove",i=>{this._handleMove(i)},{passive:!1}),document.addEventListener("touchmove",i=>{this._handleMove(i)},{passive:!1}),document.addEventListener("mouseup",i=>{this._handleUp(i)}),document.addEventListener("touchend",i=>{this._handleUp(i)}))}destroy(){this.stick.removeEventListener("mousedown",t=>{this._handleDown(t)}),this.stick.removeEventListener("touchstart",t=>{this._handleDown(t)}),document.removeEventListener("mousemove",t=>{this._handleMove(t)}),document.removeEventListener("touchmove",t=>{this._handleMove(t)}),document.removeEventListener("mouseup",t=>{this._handleUp(t)}),document.removeEventListener("touchend",t=>{this._handleUp(t)})}_handleDown(t){this.active=!0,this.stick.style.transition="0s",t.preventDefault(),this.dragStart=t.changedTouches?{y:t.changedTouches[0].clientY}:{y:t.clientY},t.changedTouches&&(this.touchId=t.changedTouches[0].identifier)}_handleMove(t){if(!this.active)return;t.preventDefault();let e=null;if(t.changedTouches){for(let u=0;u<t.changedTouches.length;u++)this.touchId===t.changedTouches[u].identifier&&(e=u,t.clientY=t.changedTouches[u].clientY);if(e==null)return}const i=this.stick.getBoundingClientRect(),s=i?Math.round(1e4/i.width)/100:1,r=t.clientY-this.dragStart.y,o=r>=0?Math.min(this.maxDistance,r*s):Math.max(-this.maxDistance,r*s);this.stick.style.transform=`translateY(${o}px)`;const a=Math.abs(o)>this.deadZone?parseFloat((o/this.maxDistance).toFixed(4)):0;this.value={f:a},this._loop()}_handleUp(t){this.active&&(t.preventDefault(),!(t.changedTouches&&this.touchId!==t.changedTouches[0].identifier)&&(this.stick.style.transition=".2s",this.stick.style.transform="translateY(0px)",this.value={f:0},this.touchId=null,this.active=!1))}_sendUpdate(){const t=Math.round(511.5-this.value.f*511.5);this.callback(`/focus/${t}`)}_debounce(t){return(...e)=>{clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{t(...e)},this.debounceTimeout)}}_update(){this.value.f!==this.prev.f&&(this.prev={...this.value},this._debounce(()=>{this._sendUpdate()})())}_loop(){this.active?this.frame=requestAnimationFrame(()=>{this._loop()}):cancelAnimationFrame(this.frame),this._update()}}var _a=ye('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 781 710" class="svelte-1jgdvgh"><defs><circle id="joys-def-cir2" r="80" cy="0"></circle><path id="joys-def-arrow" d="M0 -120 -40 -100 40 -100z"></path><rect id="joys-def-slide" width="100" height="100" transform="translate(335 -50)" rx="15" ry="15"></rect></defs><g id="joys" transform="translate(320 355)" class="svelte-1jgdvgh"><use id="joys-arrow-top" href="#joys-def-arrow" class="svelte-1jgdvgh"></use><use id="joys-arrow-right" href="#joys-def-arrow" transform="rotate(90)" class="svelte-1jgdvgh"></use><use id="joys-arrow-left" href="#joys-def-arrow" transform="rotate(-90)" class="svelte-1jgdvgh"></use><use id="joys-arrow-bottom" href="#joys-def-arrow" transform="rotate(180)" class="svelte-1jgdvgh"></use><use id="joys-stick" href="#joys-def-cir2" style="transform: translate(0px, 0px)" class="svelte-1jgdvgh"></use><use id="joys-arrow-top" href="#joys-def-arrow" transform="translate(385 30)" class="svelte-1jgdvgh"></use><use id="joys-arrow-top" href="#joys-def-arrow" transform="translate(385 -30) rotate(180)" class="svelte-1jgdvgh"></use><use id="joys-slide" href="#joys-def-slide" style="transform: translateY(0px)" class="svelte-1jgdvgh"></use><a href="#toggle" role="button" tabindex="0" aria-label="Change to adjustment tool"><g id="joys-swap" transform="translate(-250,250)" class="svelte-1jgdvgh"><circle class="element svelte-1jgdvgh" r="36"></circle><g transform="translate(-30,-30) scale(2.5)"><path id="joys-swap" d="M6.121 13c-.553 0-1 .448-1 1s.447 1 1 1h1.465l-3.293 3.293c-.391.391-.391 1.023 0 1.414.195.195.451.293.707.293s.512-.098.707-.293l3.414-3.414v1.707c0 .552.447 1 1 1s.879-.448.879-1v-5h-4.879zM7 11c.552 0 1-.448 1-1v-2h2c.553 0 1-.448 1-1s-.447-1-1-1h-3.999l-.001 4c0 .552.447 1 1 1zM17 13c-.553 0-1 .448-1 1v2h-2c-.553 0-1 .448-1 1s.447 1 1 1h4v-4c0-.552-.447-1-1-1zM18.293 4.293l-3.293 3.293v-1.586c0-.552-.447-1-1-1s-1 .448-1 1v5h5c.552 0 1-.448 1-1s-.447-1-1-1h-1.586l3.293-3.292c.391-.391.391-1.023 0-1.414s-1.023-.392-1.414-.001z" class="svelte-1jgdvgh"></path></g></g></a></g></svg>');function ya(n,t){it(t,!0);let e=null,i=null;we(()=>{e=new ga(document.getElementById("joys-stick"),a=>{ot(a,u=>{console.log("SVELTE Joystick",u)})}),i=new ma(document.getElementById("joys-slide"),a=>{ot(a,u=>{console.log("SVELTE Focus",u)})})}),gt(()=>{e&&e.hasOwnProperty("destroy")&&e.destroy(),i&&i.hasOwnProperty("destroy")&&i.destroy()});var s=_a(),r=B(A(s)),o=B(A(r),8);o.__click=function(...a){var u;(u=t.toggle)==null||u.apply(this,a)},T(r),T(s),P(n,s),st()}at(["click"]);class wa{constructor(t,e){if(this.adjust=t,this.adjust){this.callback=e;const i=8e4/360;this.axisSteps={lg:Math.round(i),md:Math.round(i/10),sm:Math.round(i/100)},this.adjust.addEventListener("mouseup",s=>{this.sendCommand(s.target.dataset)})}}destroy(){this.adjust.removeEventListener("mouseup",t=>{this.sendCommand(t.target.dataset)})}sendCommand(t){let e=t==null?void 0:t.dir,i=t==null?void 0:t.len;e&&i&&typeof this.axisSteps[i]=="number"&&(i=this.axisSteps[i],["closer","further"].indexOf(e)>=0&&(i=e==="closer"?-i:i,e="focus"),this.callback(`/adjust/${e}/${i}`))}}var ba=ye('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 781 710" class="svelte-cf79tv"><defs><path id="arr1" d="M0 -80 40 -60 40 0 0 -20 -40 0 -40 -60z"></path><path id="arr2" d="M95 95 70 95 70 165 165 165 165 70 95 70z"></path><path id="arr3" d="M165 165 130 165 130 245 245 245 245 130 165 130z"></path><circle id="cir1" r="40" cy="30"></circle><circle id="cir2" r="50" cy="120"></circle><circle id="cir3" r="60" cy="230"></circle><path id="cir3" d="M-85 125 A 108 108 0 1 0 85 125 A 54 54 0 0 1 -85 125z"></path></defs><g id="adjust" transform="translate(355 355)" class="svelte-cf79tv"><g transform="rotate(0)"><use href="#arr1" transform="translate(0 -50)" data-dir="up" data-len="sm" class="svelte-cf79tv"></use><use href="#arr1" transform="translate(0 -120)" data-dir="up" data-len="md" class="svelte-cf79tv"></use><use href="#arr1" transform="translate(0 -190)" data-dir="up" data-len="lg" class="svelte-cf79tv"></use></g><g transform="rotate(90)"><use href="#arr1" transform="translate(0 -50)" data-dir="right" data-len="sm" class="svelte-cf79tv"></use><use href="#arr1" transform="translate(0 -120)" data-dir="right" data-len="md" class="svelte-cf79tv"></use><use href="#arr1" transform="translate(0 -190)" data-dir="right" data-len="lg" class="svelte-cf79tv"></use></g><g transform="rotate(180)"><use href="#arr1" transform="translate(0 -50)" data-dir="down" data-len="sm" class="svelte-cf79tv"></use><use href="#arr1" transform="translate(0 -120)" data-dir="down" data-len="md" class="svelte-cf79tv"></use><use href="#arr1" transform="translate(0 -190)" data-dir="down" data-len="lg" class="svelte-cf79tv"></use></g><g transform="rotate(270)"><use href="#arr1" transform="translate(0 -50)" data-dir="left" data-len="sm" class="svelte-cf79tv"></use><use href="#arr1" transform="translate(0 -120)" data-dir="left" data-len="md" class="svelte-cf79tv"></use><use href="#arr1" transform="translate(0 -190)" data-dir="left" data-len="lg" class="svelte-cf79tv"></use></g><g transform="translate(360 0)"><use href="#arr1" transform="translate(0 -50)" data-dir="further" data-len="sm" class="svelte-cf79tv"></use><use href="#arr1" transform="translate(0 -120)" data-dir="further" data-len="md" class="svelte-cf79tv"></use><use href="#arr1" transform="translate(0 -190)" data-dir="further" data-len="lg" class="svelte-cf79tv"></use></g><g transform="translate(360 0) rotate(180)"><use href="#arr1" transform="translate(0 -50)" data-dir="closer" data-len="sm" class="svelte-cf79tv"></use><use href="#arr1" transform="translate(0 -120)" data-dir="closer" data-len="md" class="svelte-cf79tv"></use><use href="#arr1" transform="translate(0 -190)" data-dir="closer" data-len="lg" class="svelte-cf79tv"></use></g><a href="#toggle" role="button" tabindex="0" aria-label="Change to Joystick"><g id="joys-swap" transform="translate(-285,250)" class="svelte-cf79tv"><circle class="element svelte-cf79tv" r="36"></circle><g transform="translate(-30,-30) scale(2.5)"><path id="joys-swap" d="M17.707 8.293c-.391-.391-1.023-.391-1.414 0s-.391 1.023 0 1.414l1.293 1.293h-4.586v-4.586l1.293 1.293c.195.195.451.293.707.293s.512-.098.707-.293c.391-.391.391-1.023 0-1.414l-3.707-3.707-3.707 3.707c-.391.391-.391 1.023 0 1.414s1.023.391 1.414 0l1.293-1.293v4.586h-4.586l1.293-1.293c.391-.391.391-1.023 0-1.414s-1.023-.391-1.414 0l-3.707 3.707 3.707 3.707c.195.195.451.293.707.293s.512-.098.707-.293c.391-.391.391-1.023 0-1.414l-1.293-1.293h4.586v4.586l-1.293-1.293c-.391-.391-1.023-.391-1.414 0s-.391 1.023 0 1.414l3.707 3.707 3.707-3.707c.391-.391.391-1.023 0-1.414s-1.023-.391-1.414 0l-1.293 1.293v-4.586h4.586l-1.293 1.293c-.391.391-.391 1.023 0 1.414.195.195.451.293.707.293s.512-.098.707-.293l3.707-3.707-3.707-3.707z" class="svelte-cf79tv"></path></g></g></a></g></svg>');function Ea(n,t){it(t,!0);let e=null;we(()=>{e=new wa(document.getElementById("adjust"),o=>{ot(o,a=>{console.log("SVELTE Adjust",a)})})}),gt(()=>{e&&e.hasOwnProperty("destroy")&&e.destroy()});var i=ba(),s=B(A(i)),r=B(A(s),6);r.__click=function(...o){var a;(a=t.toggle)==null||a.apply(this,o)},T(s),T(i),P(n,i),st()}at(["click"]);var ka=F('<div class="joystick-wrapper svelte-gruxg2"><!></div>');function Sa(n){let t=H("mov");const e=r=>{r.preventDefault(),I(t,Q(g(t)==="mov"?"adj":"mov"))};var i=ka(),s=A(i);Z(s,()=>g(t)==="mov",r=>{ya(r,{toggle:e})},r=>{Ea(r,{toggle:e})}),T(i),P(n,i)}var xa=(n,t)=>{I(t,!1)},Ta=F('<header><input type="text" id="address" placeholder="Address"></header> <div class="flexbox"><input type="text" id="latitude" placeholder="Latitude"> <input type="text" id="longitude" placeholder="Longitude"></div> <button class="button button-small">Save location</button> <button class="button">Cancel</button>',1),Aa=(n,t)=>{I(t,!0)},Ca=F('<header> <button class="edit-button icon-edit" aria-label="Edit"></button></header>'),Ra=F("<div> </div>"),Oa=F("<!> <!>",1),Ma=(n,t,e)=>t(n,`/navi/position/${g(e).id}`),La=(n,t,e)=>t(g(e).id),Na=F('<button class="delete-button icon-delete" aria-label="Delete" title="Delete"></button>'),Ba=F("<li><button> </button> <!></li>"),$a=F('<div class="nav-add"><label for="new-name">Save/update current position as ...</label> <input type="text" id="new-name" class="input" placeholder="Enter position name"> <div class="margin-bottom"><sub> </sub></div> <button class="button button-small">Save target</button></div>'),Pa=F('<div class="nav-selector"><button class="button button-small">Change location</button></div>'),Da=F('<div class="content-card"><div class="nav-curr-pos"><!></div> <div class="nav-list"><ul class="icon-nav"></ul></div> <!></div>');function Ia(n,t){it(t,!0);const e=Rt(),i=()=>pt(kt,"$positions",e),s=()=>pt(ne,"$arduinoSettings",e);let r=H(!1),o=H(""),a=Zt(()=>In(g(o))),u=H(""),d=H(""),c=H(""),l=H(Q([]));const h=kt.subscribe(x=>{x!=null&&x.fid&&(I(u,Q(x.geo.addr)),I(d,Q(x.geo.lat)),I(c,Q(x.geo.lon)),I(l,Q([...x.base])))});gt(()=>{h&&h()});const p=()=>{const x={...i()};Ge(`/navi/position/update/${x.fid}`,x,C=>{console.log("SVELTE saved",C)})},f=()=>{const x={addr:g(u),lat:parseFloat(g(d)),lon:parseFloat(g(c))};kt.update(C=>({...C,geo:x})),p(),I(r,!1)},w=()=>{const x=In(g(o));if(x){let C=!1;const S=(({x:M,y:N,f:m})=>({x:M,y:N,f:m}))(s());let D=g(l).map(M=>M.id!==x?M:(C=!0,{...M,pos:S}));C||D.push({id:x,name:g(o),pos:S}),kt.update(M=>({...M,base:D})),p(),I(o,"")}I(r,!1)},_=x=>x==="home"?"icon-home":x==="polaris"?"icon-star":"icon-target",b=x=>{if(confirm(`Do you really want to delete position: "${x}"`)){const C=[...i().base].filter(S=>S.id!==x);kt.update(S=>({...S,base:C})),p(),I(r,!1)}},E=(x,C)=>{x.preventDefault(),ot(C,S=>{console.log("SVELTE position",S)})};var v=Da(),y=A(v),k=A(y);Z(k,()=>g(r),x=>{var C=Ta(),S=yt(C),D=A(S);Ht(D),T(S);var M=B(S,2),N=A(M);Ht(N);var m=B(N,2);Ht(m),T(M);var L=B(M,2);L.__click=f;var z=B(L,2);z.__click=[xa,r],Xt(D,()=>g(u),X=>I(u,X)),Xt(N,()=>g(d),X=>I(d,X)),Xt(m,()=>g(c),X=>I(c,X)),P(x,C)},x=>{var C=Oa(),S=yt(C);Z(S,()=>g(u),M=>{var N=Ca(),m=A(N),L=B(m);L.__click=[Aa,r],T(N),nt(()=>wt(m,`${g(u)??""} `)),P(M,N)});var D=B(S,2);Z(D,()=>g(d)&&g(c),M=>{var N=Ra(),m=A(N);T(N),nt(()=>wt(m,`${g(d)??""}°, ${g(c)??""}°`)),P(M,N)}),P(x,C)}),T(y);var R=B(y,2),$=A(R);qt($,21,()=>g(l),Qt,(x,C)=>{var S=Ba(),D=A(S);const M=Zt(()=>`nav-button ${_(g(C).id)??""}`);D.__click=[Ma,E,C];var N=A(D,!0);T(D);var m=B(D,2);Z(m,()=>g(r)&&g(C).id!=="home"&&g(C).id!=="polaris",L=>{var z=Na();z.__click=[La,b,C],P(L,z)}),T(S),nt(()=>{At(D,g(M)),wt(N,g(C).name)}),P(x,S)}),T($),T(R);var O=B(R,2);Z(O,()=>g(r),x=>{var C=$a(),S=B(A(C),2);Ht(S);var D=B(S,2),M=A(D),N=A(M);T(M),T(D);var m=B(D,2);m.__click=w,T(C),nt(()=>{wt(N,`ID: ${g(a)??""}`),m.disabled=g(a).length<3}),Xt(S,()=>g(o),L=>I(o,L)),P(x,C)},x=>{var C=Pa(),S=A(C);S.__click=function(...D){var M;(M=t.toggleAdmin)==null||M.apply(this,D)},T(C),P(x,C)}),T(v),P(n,v),st()}at(["click"]);const Va=(n,t)=>{I(t,!g(t))};var qa=(n,t,e)=>t(g(e).fid),ja=(n,t,e)=>t(g(e).fid),Fa=F('<button class="delete-button icon-delete" aria-label="Delete"></button>'),za=F('<li><button class="nav-button icon-location"> </button> <!></li>'),Ua=(n,t)=>t(),Ya=F('<div class="nav-add"><input type="text" id="new-location" class="input" placeholder="Enter new location name"> <button class="button">+&nbsp;Add</button></div> <div> </div>',1),Ha=F('<div class="nav-selector"><button class="button button-small">&laquo;&nbsp;Back</button></div>'),Xa=F('<div class="content-card"><header>Locations <button aria-label="Edit"></button></header> <div class="nav-curr-pos"><div><p>The location is the place where your telescope is placed.</p></div></div> <div class="nav-list"><ul class="icon-nav"></ul></div> <!></div>');function Wa(n,t){it(t,!0);const e=Rt(),i=()=>pt(Ee,"$locations",e);let s=H("");const r=kt.subscribe(E=>{I(s,Q(E.fid))});gt(()=>{r&&r()});let o=H(!1),a=H(""),u=Zt(()=>In(g(a)));const d=E=>{E!==g(s)&&ot(`/navi/location/${E}`,v=>{(v==null?void 0:v.fid)===E&&(kt.update(y=>({...v})),console.log("Loaded location"))})},c=()=>{if(g(u).length>=3){const E=aa(g(u),g(a));Ge(`/navi/position/update/${g(u)}`,E,v=>{kt.update(y=>E),Ee.update(y=>[...y,{fid:g(u),addr:g(a)}]),I(a,""),console.log("Added new location",v)})}else console.error("ID is too short. At least 3 char are required.")},l=E=>{confirm(`Do you really want to delete location: "${E}"`)?ot(`/navi/location/delete/${E}`,v=>{v.response===200&&(Ee.update(y=>y.filter(k=>k.fid!==E)),alert(`Location "${E}" deleted`))}):alert(`Deletion of "${E}" canceled.`)};we(()=>{i().length===0&&ot("/navi/location-list",E=>{Ee.update(v=>[...E]),console.log("Loaded location list")})});var h=Xa(),p=A(h),f=B(A(p));f.__click=[Va,o],T(p);var w=B(p,4),_=A(w);qt(_,5,i,Qt,(E,v)=>{var y=za(),k=A(y);k.__click=[qa,d,v];var R=A(k,!0);T(k);var $=B(k,2);Z($,()=>g(o)&&g(v).fid!==g(s)&&g(v).fid!=="index",O=>{var x=Fa();x.__click=[ja,l,v],P(O,x)}),T(y),nt(()=>{At(y,g(v).fid===g(s)?"active":""),wt(R,g(v).addr)}),P(E,y)}),T(_),T(w);var b=B(w,2);Z(b,()=>g(o),E=>{var v=Ya(),y=yt(v),k=A(y);Ht(k);var R=B(k,2);R.__click=[Ua,c],T(y);var $=B(y,2),O=A($,!0);T($),nt(()=>wt(O,g(u))),Xt(k,()=>g(a),x=>I(a,x)),P(E,v)},E=>{var v=Ha(),y=A(v);y.__click=function(...k){var R;(R=t.toggleAdmin)==null||R.apply(this,k)},T(v),P(E,v)}),T(h),nt(()=>At(f,`edit-button icon-edit${(g(o)?" active":"")??""}`)),P(n,h),st()}at(["click"]);function Ka(n,t){it(t,!0);const e=Rt(),i=()=>pt(kt,"$positions",e);let s=H(!1);const r=()=>{I(s,!g(s))};we(()=>{var u;(u=i())!=null&&u.fid||ot("/navi/location/index",d=>{(d==null?void 0:d.fid)==="index"&&kt.update(c=>({...d}))})});var o=Nt(),a=yt(o);Z(a,()=>g(s),u=>{Wa(u,{toggleAdmin:r})},u=>{Ia(u,{toggleAdmin:r})}),P(n,o),st()}var Ja=(n,t,e,i)=>{t()(e.id,i())},Za=(n,t,e,i)=>{t()(e.id,i())},Qa=F('<div class="slider-wrapper svelte-1qw7onx"><label class="svelte-1qw7onx"> </label> <input type="range" class="svelte-1qw7onx"></div>');function Ds(n,t){it(t,!0);let e=Bt(t,"oninput",3,()=>{}),i=Bt(t,"onchange",3,()=>{}),s=Bt(t,"value",7,0),r=Bt(t,"minValue",3,0),o=Bt(t,"maxValue",3,10),a=Bt(t,"steps",3,1);var u=Qa(),d=A(u),c=A(d,!0);T(d);var l=B(d,2);Ht(l),l.__change=[Ja,i,t,s],l.__input=[Za,e,t,s],T(u),nt(()=>{Y(d,"for","slider_slide_"+t.id),wt(c,t.name),Y(l,"id","slider_slide_"+t.id),Y(l,"min",r()),Y(l,"max",o()),Y(l,"step",a())}),Xt(l,s),P(n,u),st()}at(["change","input"]);var Ga=F('<div class="camera-options svelte-1x08sfe"><!> <div class="actions-wrapper svelte-1x08sfe"><button class="svelte-1x08sfe">Reset defaults</button></div></div>');function tc(n,t){it(t,!1);const e=Rt(),i=()=>pt(on,"$camControls",e),s=(c,l)=>{on.update(h=>h.map(p=>p.id===c?{...p,value:l}:{...p})),ot(`/cam/ctrl/${c}/${l}`,h=>{console.log("SVELTE CamCtrl",h)})},r=()=>{on.update(l=>l.map(h=>({...h,value:h.defaultValue})));const c={};for(let l of i())l!=null&&l.id&&(c[l.id]=l.defaultValue);Ge("/cam/controls",c,l=>{console.log("SVELTE Cam Controls",l)})};ts();var o=Ga(),a=A(o);qt(a,3,i,c=>c.name,(c,l,h)=>{Ds(c,Gi(()=>g(l),{get index(){return g(h)},onchange:s}))});var u=B(a,2),d=A(u);d.__click=r,T(u),T(o),P(n,o),st()}at(["click"]);const ec=()=>{Ve.update(n=>!n)};var nc=ye('<polygon points="-15,-15 -15,15 15,15 15,-15" stroke-width="5" fill="#C00" stroke="#C00" stroke-linejoin="round"></polygon>'),ic=ye('<polygon points="-7.5,-22.5 -7.5,22.5 20,0" stroke-width="10" fill="#C00" stroke="#C00" stroke-linejoin="round"></polygon>'),sc=F('<div id="video-recording" class="svelte-1h8ia9r"><button aria-label="Record video" class="svelte-1h8ia9r"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 84 84" height="84" width="84" preserveAspectRatio="xMinYMin slice" class="svelte-1h8ia9r"><g transform="translate(42,42)"><circle r="38" stroke-width="5" class="svelte-1h8ia9r"></circle><!></g></svg></button></div>');function rc(n,t){it(t,!0);let e=H(!1);const i=Ve.subscribe(d=>{if(g(e)!==d){I(e,Q(d));const c=g(e)?"start":"stop";ot(`/cam/video-rec/vid/${c}`,l=>{console.log("Video recording",l)})}});gt(()=>{i&&i()});var s=sc(),r=A(s);r.__click=[ec];var o=A(r),a=A(o),u=B(A(a));Z(u,()=>g(e),d=>{var c=nc();P(d,c)},d=>{var c=ic();P(d,c)}),T(a),T(o),T(r),T(s),P(n,s),st()}at(["click"]);var oc=F('<h3 class="message svelte-kc30aj"><!></h3>'),ac=F('<div class="sphere-config svelte-kc30aj"><!> <!> <div class="actions-wrapper svelte-kc30aj"><button class="svelte-kc30aj">Save settings</button></div></div>');function cc(n,t){it(t,!0);const e=Rt(),i=()=>pt(pe,"$sphereControls",e);let s=H(void 0),r=H(Q([]));const o=pe.subscribe(f=>{I(r,Q(f.map(w=>({...w}))))}),a=(f,w)=>{console.log(),pe.update(_=>_.map(b=>b.id===f?{...b,value:w}:{...b}))},u=()=>{const f={};for(let w of i())f[w.id]=w.value;Ge("/config/sphere/settings",f,w=>{I(s,Q((w==null?void 0:w.response)===200?'<span style="color:#090">Successfully saved settings.</span>':'<span style="color:#B00">Failed to save settings.</span>')),setTimeout(()=>{I(s,null)},5e3)})};gt(()=>{o&&o()});var d=ac(),c=A(d);Z(c,()=>g(s),f=>{var w=oc(),_=A(w);vr(_,()=>g(s)),T(w),P(f,w)});var l=B(c,2);qt(l,17,()=>g(r),Qt,(f,w,_)=>{Ds(f,Gi(()=>g(w),{index:_,oninput:a}))});var h=B(l,2),p=A(h);p.__click=u,T(h),T(d),P(n,d),st()}at(["click"]);const lc=(n,t)=>{const e=t()==="B"?"cam_b":"cam_a";ot(`/cam/capture-img/image/${e}`,i=>{console.log("Capture image",i)})},uc=(n,t,e,i)=>{const s=t()==="B"?"cam_b":"cam_a";ot(`/cam/snail-shot/${g(e)}/${g(i)}/${s}`,r=>{console.log("Snails",r,s)})};var hc=(n,t)=>console.log("X:",g(t)),fc=F("<option></option>"),dc=(n,t)=>console.log("Y:",g(t)),pc=F("<option></option>"),vc=F('<div id="image-capture" class="svelte-2mcnnf"><button aria-label="Capture image" class="svelte-2mcnnf"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 84 84" height="84" width="84" class="svelte-2mcnnf"><g transform="translate(42,42)"><circle r="28" fill="#C00" stroke="#C00"></circle><circle r="38" class="capture-button svelte-2mcnnf"></circle></g></svg></button> <button aria-label="Snail shot" class="svelte-2mcnnf"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 84 84" height="84" width="84" class="svelte-2mcnnf"><g transform="translate(42,42)"><polyline points="0,0 20,0 20,15 -20,15 -20,-15 40,-15 40,30 -20,30 -12,28 -12,32 -20,30" class="svelte-2mcnnf"></polyline></g></svg></button> <div class="dimensions svelte-2mcnnf"><label class="svelte-2mcnnf"><span class="svelte-2mcnnf">hor</span><select class="svelte-2mcnnf"></select></label> <label class="svelte-2mcnnf"><span class="svelte-2mcnnf">ver</span><select class="svelte-2mcnnf"></select></label></div></div>');function gc(n,t){it(t,!0);const e=Rt(),i=()=>pt(Ne,"$swapPreview",e);let s=H(3),r=H(3);var o=vc(),a=A(o);a.__click=[lc,i];var u=B(a,2);u.__click=[uc,i,s,r];var d=B(u,2),c=A(d),l=B(A(c));l.__change=[hc,s],qt(l,20,()=>Array.from({length:7}),Qt,(f,w,_)=>{var b=fc();b.value=(b.__value=_+3)==null?"":_+3,b.textContent=_+3,P(f,b)}),T(l),T(c);var h=B(c,2),p=B(A(h));p.__change=[dc,r],qt(p,20,()=>Array.from({length:7}),Qt,(f,w,_)=>{var b=pc();b.value=(b.__value=_+3)==null?"":_+3,b.textContent=_+3,P(f,b)}),T(p),T(h),T(d),T(o),vi(l,()=>g(s),f=>I(s,f)),vi(p,()=>g(r),f=>I(r,f)),P(n,o),st()}at(["click","change"]);var mc=F('<div class="controls svelte-bwwnlr"><div class="tools svelte-bwwnlr"><!></div></div>');function _c(n){const t=Rt(),e=()=>pt(gn,"$toolTab",t);var i=Nt(),s=yt(i);Z(s,e,r=>{var o=mc(),a=A(o),u=A(a);Z(u,()=>e()==="target",d=>{Sa(d)},d=>{var c=Nt(),l=yt(c);Z(l,()=>e()==="sphere",h=>{cc(h,{})},h=>{var p=Nt(),f=yt(p);Z(f,()=>e()==="location",w=>{Ka(w,{})},w=>{var _=Nt(),b=yt(_);Z(b,()=>e()==="adjust",E=>{tc(E,{})},E=>{var v=Nt(),y=yt(v);Z(y,()=>e()==="video",k=>{rc(k,{})},k=>{var R=Nt(),$=yt(R);Z($,()=>e()==="picture",O=>{gc(O,{})},null,!0),P(k,R)},!0),P(E,v)},!0),P(w,_)},!0),P(h,p)},!0),P(d,c)}),T(a),T(o),P(r,o)}),P(n,i)}var yc=F('<li><button><span class="svelte-wkzjji"> </span></button></li>'),wc=F('<div id="options-menu" class="svelte-wkzjji"><ul class="svelte-wkzjji"></ul></div>');function bc(n,t){it(t,!0);let e=H("");const i=gn.subscribe(c=>{I(e,Q(c))});let s=H(!1);const r=Ie.subscribe(c=>{I(s,Q(c))}),o=c=>{gn.update(l=>l===c?"":c)};gt(()=>{i&&i(),r&&r()});const a=[{id:"sphere",name:"Sphere",icon:"icon-settings",callback:()=>{o("sphere")},enabled:()=>g(e)==="sphere"},{id:"compass",name:"Compass",icon:"icon-compass",callback:()=>{Ie.update(c=>!c)},enabled:()=>g(s)},{id:"location",name:"Location",icon:"icon-location",callback:()=>{o("location")},enabled:()=>g(e)==="location"},{id:"target",name:"Target",icon:"icon-target",callback:()=>{o("target")},enabled:()=>g(e)==="target"},{id:"adjust",name:"Contrast",icon:"icon-adjust",callback:()=>{o("adjust")},enabled:()=>g(e)==="adjust"},{id:"video",name:"Video",icon:"icon-video",callback:()=>{o("video")},enabled:()=>g(e)==="video"},{id:"picture",name:"Picture",icon:"icon-image",callback:()=>{o("picture")},enabled:()=>g(e)==="picture"}];var u=wc(),d=A(u);qt(d,21,()=>a,Qt,(c,l)=>{var h=yc();const p=Zt(()=>`${(g(l).enabled()?"active":"")??""} svelte-wkzjji`);var f=A(h);f.__click=function(...b){var E;(E=g(l).callback)==null||E.apply(this,b)};var w=A(f),_=A(w,!0);T(w),T(f),T(h),nt(()=>{At(h,g(p)),At(f,`${g(l).icon??""} svelte-wkzjji`),wt(_,g(l).name)}),P(c,h)}),T(d),T(u),P(n,u),st()}at(["click"]);var Ec=F('<div><button class="task--button video-recorder svelte-1btt76e" aria-label="Stop video recording"><span class="icon-stop"></span> <span class="time"> </span></button></div>');function kc(n,t){it(t,!0);const e={elapsedTime:0};let i=H("00:00:00");function s(l,h,p){const f=[l,h,p].map(w=>w<10?`0${w}`:w);I(i,Q(f.join(":")))}function r(){e.startTime=Date.now(),e.intervalId=setInterval(()=>{const l=Date.now()-e.startTime+e.elapsedTime,h=parseInt(l/1e3%60,10),p=parseInt(l/(1e3*60)%60,10),f=parseInt(l/(1e3*60*60)%24,10);s(f,p,h)},1e3)}function o(){e.intervalId&&(clearInterval(e.intervalId),Ve.update(()=>!1),I(i,"00:00:00"))}let a=H(!1);const u=Ve.subscribe(l=>{l!==g(a)&&(l?r():o(),I(a,Q(l)))});gt(()=>{u&&u()});var d=Nt(),c=yt(d);Z(c,()=>g(a),l=>{var h=Ec(),p=A(h);p.__click=o;var f=B(A(p),2),w=A(f,!0);T(f),T(p),T(h),nt(()=>wt(w,g(i))),P(l,h)}),P(n,d),st()}at(["click"]);const Sc=(n,t)=>{document.fullscreenElement?(document.exitFullscreen(),I(t,!1)):(document.documentElement.requestFullscreen(),I(t,!0))};var xc=F('<button class="task--button" aria-label="Switch fullscreen mode"><span></span></button>');function Tc(n){let t=H(!1);var e=xc();e.__click=[Sc,t];var i=A(e);T(e),nt(()=>At(i,g(t)?"icon-viewport":"icon-fullscreen")),P(n,e)}at(["click"]);const Ac=()=>{Yn.update(n=>!n)};var Cc=F('<button class="task--button daylight-button svelte-192ooay" aria-label="Switch daylight mode"><span></span></button>');function Rc(n,t){it(t,!0);let e=H(!1),i=Yn.subscribe(o=>{I(e,Q(o))});gt(()=>{i&&i()});var s=Cc();s.__click=[Ac];var r=A(s);T(s),nt(()=>At(r,g(e)?"icon-dark":"icon-light")),P(n,s),st()}at(["click"]);var Oc=F('<div class="tasks svelte-1laysiz"><!> <!> <!></div>');function Mc(n){var t=Oc(),e=A(t);kc(e,{});var i=B(e,2);Tc(i);var s=B(i,2);Rc(s,{}),T(t),P(n,t)}var Lc=F("<div><!> <!> <!> <!></div>");function Fc(n){const t=Rt(),e=()=>pt(Yn,"$daylight",t);var i=Lc(),s=A(i);Mc(s);var r=B(s,2);va(r);var o=B(r,2);_c(o);var a=B(o,2);bc(a,{}),T(i),nt(()=>At(i,`${"container"+(e()?" daylight":"")} svelte-183uj8y`)),P(n,i)}export{Fc as component};
