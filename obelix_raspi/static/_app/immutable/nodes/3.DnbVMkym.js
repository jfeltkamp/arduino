import{a as l,t as s,c as X}from "../chunks/disclose-version.CVdQhuh4.js";import{H as N,M as u,I as P,O as f,K as L,N as g,a as e,J as H,i as I,b as D,aB as T,t as Y}from "../chunks/runtime.CdqqS4Bm.js";import{l as Q,s as R,T as $,o as tt,d as et}from "../chunks/Tasks.BnPYvxSb.js";import{i as w,p as B,o as at}from "../chunks/index-client.DBmkXexQ.js";import{d as j,s as E,a as z,b as F}from "../chunks/store.D6nl9me4.js";import{h as rt,s as W,e as U,i as V,b as it}from "../chunks/size.BnFFJ2ou.js";import{p as G}from "../chunks/props.DaeUU8jY.js";var ot=(y, t, n)=>t()(e(n)),lt=s("<dt>Azimuth</dt><dd> </dd>",1),st=s("<dt>Altitude</dt><dd> </dd>",1),nt=s('<figure class="svelte-1gr51rt"><img class="thumbnail--img svelte-1gr51rt" loading="lazy"> <figcaption class="svelte-1gr51rt"> </figcaption></figure> <div class="thumbnail--overlay svelte-1gr51rt"><dl><!> <!></dl></div>',1),vt=s("<dt> </dt>"),dt=s("<dt> </dt>"),ct=s('<div class="collection svelte-1gr51rt"><h3 class="header svelte-1gr51rt"> </h3> <p> </p> <dl><!> <!></dl></div>'),_t=s('<div class="download-link svelte-1gr51rt"><a download="download" class="svelte-1gr51rt">Download ZIP</a></div>'),gt=s('<div class="thumbnail svelte-1gr51rt"><button type="button" aria-label="select item" class="svelte-1gr51rt"><!> <!></button> <!></div>');function ut(y, t){N(t,!0);const n=E(),M=()=>F(Q,"$locOrigin",n),k=G(t,"thumbClick",3,()=>{}),a=I(()=>{var c;return(c=t.item)!=null&&c.path?t.item.path:t.key}),i=I(()=>{var c,_;return{isCollection:!!((c=t.item)!=null&&c.location),isImage:!!((_=t.item)!=null&&_.path),datetime:"",...t.item}});var v=gt(),d=u(v);d.__click=[ot,k,a];var q=u(d);w(q,()=>e(i).isImage, c=>{var _=nt(),m=P(_),C=u(m),S=f(C,2),J=u(S,!0);L(()=>z(J,new Date(e(i).datetime).toLocaleString())),g(S),g(m);var o=f(m,2),r=u(o),A=u(r);w(A,()=>{var h,p;return(p=(h=e(i))==null?void 0:h.position)==null?void 0:p.deg_x}, h=>{var p=lt(),K=f(P(p)),Z=u(K);g(K),L(()=>z(Z,`${e(i).position.deg_x??""}°`)),l(h,p)});var b=f(A,2);w(b,()=>{var h,p;return(p=(h=e(i))==null?void 0:h.position)==null?void 0:p.deg_y}, h=>{var p=st(),K=f(P(p)),Z=u(K);g(K),L(()=>z(Z,`${e(i).position.deg_y??""}°`)),l(h,p)}),g(r),g(o),L(()=>{W(C,"src",M()+e(a)),W(C,"alt",e(a))}),rt(C),l(c,_)});var O=f(q,2);w(O,()=>e(i).isCollection, c=>{var _=ct(),m=u(_),C=u(m,!0);g(m);var S=f(m,2),J=u(S,!0);L(()=>z(J,new Date(e(i).datetime).toLocaleString())),g(S);var o=f(S,2),r=u(o);w(r,()=>{var b;return(b=e(i).location)==null?void 0:b.lat}, b=>{var h=vt(),p=u(h);g(h),L(()=>z(p,`Lat: ${e(i).location.lat??""}°`)),l(b,h)});var A=f(r,2);w(A,()=>{var b;return(b=e(i).location)==null?void 0:b.lon}, b=>{var h=dt(),p=u(h);g(h),L(()=>z(p,`Lon: ${e(i).location.lon??""}°`)),l(b,h)}),g(o),g(_),L(()=>{var b;return z(C,(b=e(i).location)==null?void 0:b.addr)}),l(c,_)}),g(d);var x=f(d,2);w(x,()=>e(i).isCollection, c=>{var _=_t(),m=u(_);g(_),L(()=>W(m,"href",M()+t.item.folder+".zip")),l(c,_)}),g(v),l(y,v),H()}j(["click"]);var mt=(y, t)=>t(1),bt=s('<button class="pager-button svelte-tb602e">&laquo;</button>'),ht=s('<div class="ghost svelte-tb602e">&nbsp;</div>'),ft=(y, t, n)=>t(e(n)-1),kt=s('<button class="pager-button svelte-tb602e">&lsaquo;</button>'),yt=s('<div class="ghost svelte-tb602e">&nbsp;</div>'),xt=s("<button> </button>"),pt=(y, t, n)=>t(e(n)+1),Mt=s('<button class="pager-button svelte-tb602e">&rsaquo;</button>'),qt=s('<div class="ghost svelte-tb602e">&nbsp;</div>'),wt=(y, t, n)=>t(n.pages),Ct=s('<button class="pager-button svelte-tb602e">&raquo;</button>'),Lt=s('<div class="ghost svelte-tb602e">&nbsp;</div>'),Ot=s('<div class="pager svelte-tb602e"><!> <!> <!> <!> <!></div>');function St(y, t){N(t,!0);const n=G(t,"listMax",3,7),M=G(t,"callback",3,()=>{});let k=T(1080),a=T(1),i=I(()=>Math.min(t.pages,n())),v=I(()=>Math.max(1,Math.min(e(a)-Math.floor(n()/2),t.pages-n()+1)));function d(x){D(a,B(x)),M()(x)}var q=X(),O=P(q);w(O,()=>t.pages>1, x=>{var c=Ot(),_=u(c);w(_,()=>e(a)>2, o=>{var r=bt();r.__click=[mt,d],l(o,r)}, o=>{var r=ht();l(o,r)});var m=f(_,2);w(m,()=>e(a)>1, o=>{var r=kt();r.__click=[ft,d,a],l(o,r)}, o=>{var r=yt();l(o,r)});var C=f(m,2);U(C,17,()=>Array(e(i)),V,(o, r, A)=>{var b=xt();b.__click=()=>d(A+e(v));var h=u(b,!0);g(b),L(()=>{R(b,`pager-button${(A+e(v)===e(a)?" active":"")??""} svelte-tb602e`),z(h,A+e(v))}),l(o,b)});var S=f(C,2);w(S,()=>e(a)<t.pages, o=>{var r=Mt();r.__click=[pt,d,a],l(o,r)}, o=>{var r=qt();l(o,r)});var J=f(S,2);w(J,()=>e(a)<t.pages-1, o=>{var r=Ct();r.__click=[wt,d,t],l(o,r)}, o=>{var r=Lt();l(o,r)}),g(c),it(c,"clientWidth", o=>D(k,o)),l(x,c)}),l(y,q),H()}j(["click"]);var zt=s('<div class="gallery-items svelte-1mryv64"></div> <!>',1);function It(y, t){N(t,!0);const n=G(t,"items",19,()=>[]),M=12;let k=T(1),a=I(()=>n().slice((e(k)-1)*M,e(k)*M)),i=I(()=>Math.ceil(n().length/M));const v=()=>D(k,1);Y(()=>{n().length>=0&&v()});var d=zt(),q=P(d);U(q,21,()=>e(a),V,(x, c, _)=>{ut(x,{get item(){return e(c)},key:_,get thumbClick(){return t.thumbClick}})}),g(q);var O=f(q,2);St(O,{get pages(){return e(i)},callback: x=>{D(k,B(x))}}),l(y,d),H()}var At=s('<button class="button breadcrumb--item svelte-1fqb247" type="button">Start</button> <h2 class="breadcrumb--item svelte-1fqb247" type="button"> </h2>',1),Dt=s('<div class="breadcrumb svelte-1fqb247"><!></div>');function Pt(y, t){N(t,!0);const n=G(t,"reset",3,()=>{}),M=I(()=>{var v,d;return t.item&&((d=(v=t.item)==null?void 0:v.location)!=null&&d.addr)?t.item.location.addr:""}),k=I(()=>{var v;return t.item&&((v=t.item)!=null&&v.datetime)?new Date(t.item.datetime).toLocaleString():""});var a=Dt(),i=u(a);w(i,()=>t.item, v=>{var d=At(),q=P(d);q.__click=function(...c){var _;(_=n())==null||_.apply(this,c)};var O=f(q,2),x=u(O);g(O),L(()=>z(x,`» ${e(k)??""} (${e(M)??""})`)),l(v,d)}),g(a),l(y,a),H()}j(["click"]);var Tt=s('<div class="gallery-enlarged svelte-1h0v2yr"><img alt="enlarged" class="svelte-1h0v2yr"></div>'),Bt=s('<div class="gallery svelte-1h0v2yr"><!> <!> <!></div>');function Gt(y, t){N(t,!0);const n=E(),M=()=>F(Q,"$locOrigin",n),k=G(t,"items",19,()=>[]);let a=T(void 0),i=I(()=>{var m;return typeof e(a)=="number"&&((m=k()[e(a)])!=null&&m.images)?k()[e(a)].images:k()}),v=T(void 0);const d=()=>{D(a,null)};function q(m){typeof m=="number"?D(a,B(m)):D(v,B(m))}var O=Bt(),x=u(O);w(x,()=>e(v), m=>{var C=Tt(),S=u(C);g(C),L(()=>W(S,"src",M()+e(v))),l(m,C)});var c=f(x,2);Pt(c,{get item(){return k()[e(a)]},reset:d});var _=f(c,2);It(_,{get items(){return e(i)},thumbClick:q}),g(O),l(y,O),H()}var Nt=s("<div><!> <!></div>");function Ft(y, t){N(t,!0);const n=E(),M=()=>F(et,"$daylight",n);let k=T(B([]));at(()=>{tt("/gallery", d=>{D(k,B(d))})});var a=Nt(),i=u(a);$(i);var v=f(i,2);Gt(v,{get items(){return e(k)}}),g(a),L(()=>R(a,`container ${(M()?"daylight":"")??""} svelte-1u7vqrw`)),l(y,a),H()}export{Ft as component};
