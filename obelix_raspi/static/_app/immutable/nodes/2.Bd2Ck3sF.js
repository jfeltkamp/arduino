import{a as _,t as T,c as q,n as A}from"../chunks/disclose-version.BrgbmvB4.js";import{x as St,h as At,k as M,B as st,C as It,M as Nt,ai as zt,P as Pt,Q as xt,R as at,l as H,ar as W,N as Ft,i as Et,O as Ut,an as Vt,z as pt,as as nt,at as gt,au as ot,av as Ot,a4 as Bt,G as wt,aw as Yt,ah as Ht,ax as Rt,j as $t,ay as bt,y as Xt,ae as Wt,a9 as qt,az as Gt,ac as Zt,aA as Jt,L as kt,aB as Kt,p as I,I as C,g as w,t as N,o as P,aC as R,q as x,w as E,v as f,aq as it,m as G,aD as rt,f as Qt}from"../chunks/runtime.CsVrN9MV.js";import{i as V}from"../chunks/lifecycle.BXJEr427.js";import{b as J,o as X,i as S,a as K,p as $,s as te}from"../chunks/index-client.1bNrerbj.js";import{a as U,d as Q,s as ee,b as se}from"../chunks/store.cAIb9KtG.js";import{w as Mt}from"../chunks/index.D7cqNOuu.js";let lt=null;function Tt(a,t){return t}function ae(a,t,s,e){for(var r=[],n=t.length,l=0;l<n;l++)Yt(t[l].e,r,!0);var o=n>0&&r.length===0&&s!==null;if(o){var i=s.parentNode;Ht(i),i.append(s),e.clear(),L(a,t[0].prev,t[n-1].next)}Rt(r,()=>{for(var d=0;d<n;d++){var u=t[d];o||(e.delete(u.k),L(a,u.prev,u.next)),$t(u.e,!o)}})}function ct(a,t,s,e,r,n=null){var l=a,o={flags:t,items:new Map,first:null},i=(t&bt)!==0;if(i){var d=a;l=M?st(Xt(d)):d.appendChild(St())}M&&It();var u=null,p=!1;At(()=>{var c=s(),k=Nt(c)?c:c==null?[]:zt(c),h=k.length;if(p&&h===0)return;p=h===0;let F=!1;if(M){var g=l.data===Pt;g!==(h===0)&&(l=xt(),st(l),at(!1),F=!0)}if(M){for(var y=null,j,z=0;z<h;z++){if(H.nodeType===8&&H.data===Wt){l=H,F=!0,at(!1);break}var v=k[z],m=e(v,z);j=Dt(H,o,y,null,v,m,z,r,t),o.items.set(m,j),y=j}h>0&&st(xt())}if(!M){var O=qt;re(k,o,l,r,t,(O.f&W)!==0,e)}n!==null&&(h===0?u?Ft(u):u=Et(()=>n(l)):u!==null&&Ut(u,()=>{u=null})),F&&at(!0),s()}),M&&(l=H)}function re(a,t,s,e,r,n,l){var ht,ut,mt,ft;var o=(r&Gt)!==0,i=(r&(nt|ot))!==0,d=a.length,u=t.items,p=t.first,c=p,k,h=null,F,g=[],y=[],j,z,v,m;if(o)for(m=0;m<d;m+=1)j=a[m],z=l(j,m),v=u.get(z),v!==void 0&&((ht=v.a)==null||ht.measure(),(F??(F=new Set)).add(v));for(m=0;m<d;m+=1){if(j=a[m],z=l(j,m),v=u.get(z),v===void 0){var O=c?c.e.nodes_start:s;h=Dt(O,t,h,h===null?t.first:h.next,j,z,m,e,r),u.set(z,h),g=[],y=[],c=h.next;continue}if(i&&le(v,j,m,r),v.e.f&W&&(Ft(v.e),o&&((ut=v.a)==null||ut.unfix(),(F??(F=new Set)).delete(v))),v!==c){if(k!==void 0&&k.has(v)){if(g.length<y.length){var B=y[0],b;h=B.prev;var dt=g[0],tt=g[g.length-1];for(b=0;b<g.length;b+=1)_t(g[b],B,s);for(b=0;b<y.length;b+=1)k.delete(y[b]);L(t,dt.prev,tt.next),L(t,h,dt),L(t,tt,B),c=B,h=tt,m-=1,g=[],y=[]}else k.delete(v),_t(v,c,s),L(t,v.prev,v.next),L(t,v,h===null?t.first:h.next),L(t,h,v),h=v;continue}for(g=[],y=[];c!==null&&c.k!==z;)(n||!(c.e.f&W))&&(k??(k=new Set)).add(c),y.push(c),c=c.next;if(c===null)continue;v=c}g.push(v),h=v,c=v.next}if(c!==null||k!==void 0){for(var Y=k===void 0?[]:zt(k);c!==null;)(n||!(c.e.f&W))&&Y.push(c),c=c.next;var et=Y.length;if(et>0){var Ct=r&bt&&d===0?s:null;if(o){for(m=0;m<et;m+=1)(mt=Y[m].a)==null||mt.measure();for(m=0;m<et;m+=1)(ft=Y[m].a)==null||ft.fix()}ae(t,Y,Ct,u)}}o&&Vt(()=>{var vt;if(F!==void 0)for(v of F)(vt=v.a)==null||vt.apply()}),pt.first=t.first&&t.first.e,pt.last=h&&h.e}function le(a,t,s,e){e&nt&&gt(a.v,t),e&ot?gt(a.i,s):a.i=s}function Dt(a,t,s,e,r,n,l,o,i){var d=lt;try{var u=(i&nt)!==0,p=(i&Ot)===0,c=u?p?Bt(r):wt(r):r,k=i&ot?wt(l):l,h={i:k,v:c,k:n,a:null,e:null,prev:s,next:e};return lt=h,h.e=Et(()=>o(a,c,k),M),h.e.prev=s&&s.e,h.e.next=e&&e.e,s===null?t.first=h:(s.next=h,s.e.next=h.e),e!==null&&(e.prev=h,e.e.prev=h.e),h}finally{lt=d}}function _t(a,t,s){for(var e=a.next?a.next.e.nodes_start:s,r=t?t.e.nodes_start:s,n=a.e.nodes_start;n!==e;){var l=Zt(n);r.before(n),n=l}}function L(a,t,s){t===null?a.first=s:(t.next=s,t.e.next=s&&s.e),s!==null&&(s.prev=t,s.e.prev=t&&t.e)}function D(a,t,s,e){var r=a.__attributes??(a.__attributes={});M&&(r[t]=a.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&a.nodeName==="LINK")||r[t]!==(r[t]=s)&&(t==="style"&&"__styles"in a&&(a.__styles={}),t==="loading"&&(a[Jt]=s),s==null?a.removeAttribute(t):typeof s!="string"&&ne(a).includes(t)?a[t]=s:a.setAttribute(t,s))}var yt=new Map;function ne(a){var t=yt.get(a.nodeName);if(t)return t;yt.set(a.nodeName,t=[]);for(var s,e=kt(a),r=Element.prototype;r!==e;){s=Kt(e);for(var n in s)s[n].set&&t.push(n);e=kt(e)}return t}function oe(a,t){var s=a.__className,e=ie(t);M&&a.className===e?a.__className=e:(s!==e||M&&a.className!==e)&&(t==null?a.removeAttribute("class"):a.className=e,a.__className=e)}function ie(a){return a??""}const Lt=Mt({x:0,y:0,f:0,deg_x:0,deg_y:0,dx:1,dy:-1,df:1,acc:1e3,spr:8e4,mpa:2e4,minpx:-2e4,maxpx:2e4,mpf:5e3,vx:0,vy:0,va1:100,va2:1500,vf:0,vf1:100,vf2:1500}),jt=Mt([{id:"brightness",name:"Brightness",value:0,minValue:-1,maxValue:1,steps:.01},{id:"contrast",name:"Contrast",value:1,minValue:0,maxValue:32,steps:.1},{id:"saturation",name:"Saturation",value:1,minValue:0,maxValue:32,steps:.1},{id:"sharpness",name:"Sharpness",value:1,minValue:0,maxValue:16,steps:.1}]);var ce=T('<div id="horizon-wrapper" class="svelte-19kj2zw"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 300"><defs><g id="sphere"><ellipse rx="100" ry="400" fill="none" stroke="#FFF4"></ellipse><ellipse rx="200" ry="400" fill="none" stroke="#FFF4"></ellipse><ellipse rx="300" ry="400" fill="none" stroke="#FFF4"></ellipse><ellipse rx="400" ry="400" fill="none" stroke="#FFF4"></ellipse><ellipse rx="550" ry="400" fill="none" stroke="#FFF4"></ellipse><ellipse rx="800" ry="400" fill="none" stroke="#FFF4"></ellipse></g><linearGradient id="floor" x1="0%" x2="0%" y1="0%" y2="100%"><stop offset="0%" stop-color="#4f3922"></stop><stop offset="15%" stop-color="#785633"></stop></linearGradient></defs><defs><g id="horizon"><g transform="translate(-150,-450)"><rect width="600" height="800" y="-200" fill="#2874b2"></rect><use href="#sphere" transform="translate(300, 600)"></use><use href="#sphere" transform="translate(300, -200)"></use><g transform="translate(300, 200)"><ellipse rx="200" ry="80" fill="#2874b2" stroke="#FFF4"></ellipse><ellipse rx="400" ry=".1" fill="none" stroke="#FFF4"></ellipse><ellipse rx="400" ry="160" fill="none" stroke="#FFF4"></ellipse><ellipse rx="800" ry="240" fill="none" stroke="#FFF4"></ellipse><ellipse rx="1600" ry="320" fill="none" stroke="#FFF4"></ellipse><path d="M0,-200 0,800" fill="none" stroke="#FFF4"></path><circle r="20" fill="#2874b2" stroke="#FFF4"></circle></g><rect width="600" height="800" y="600" fill="url(#floor)"></rect><g transform="translate(300, 1000)"><circle r="10" fill="#A00" stroke="#FFF"></circle><text font-size="8" fill="#FFF" text-anchor="middle" transform="translate(0 3)">You</text></g></g></g></defs><defs><polygon id="focusArrow" points="0,400 180,65 100,65 200,35 300,65 220,65 400,400"></polygon><linearGradient id="focusArrowGradClip" x1="0%" x2="0%" y1="0%" y2="100%"><stop offset="0%" stop-color="#005"></stop><stop offset="50%" stop-color="#039" stop-opacity=".8"></stop><stop offset="100%" stop-color="#07f" stop-opacity=".4"></stop></linearGradient></defs><clipPath id="arrowStripesClip"><polygon points="200,0 -390,400 -370,400 200,0 -350,400 -330,400 200,0 -310,400 -290,400 200,0 -270,400 -250,400 200,0 -230,400 -210,400 200,0 -190,400 -170,400 200,0 -150,400 -130,400 200,0 -110,400 -90,400 200,0 -70,400 -50,400 200,0 -30,400 -10,400 200,0 10,400 30,400 200,0 50,400 70,400 200,0 90,400 110,400 200,0 130,400 150,400 200,0 170,400 190,400 200,0 210,400 230,400 200,0 250,400 270,400 200,0 290,400 310,400 200,0 330,400 350,400 200,0 370,400 390,400 200,0 410,400 430,400 200,0 450,400 470,400 200,0 490,400 510,400 200,0 530,400 550,400 200,0 570,400 590,400 200,0 610,400 630,400 200,0 650,400 670,400 200,0 690,400 710,400 200,0 730,400 750,400 200,0 770,400 790,400"></polygon></clipPath><clipPath id="focusRangeMeterClip"><rect id="focus-range-meter" width="400" height="400" class="svelte-19kj2zw"></rect></clipPath><use id="azimuth-sphere" href="#horizon" class="svelte-19kj2zw"></use><g transform="translate(75 150) scale(0.375)"><use clip-path="url(#focusRangeMeterClip)" href="#focusArrow" fill="url(#focusArrowGradClip)"></use><use clip-path="url(#arrowStripesClip)" href="#focusArrow" fill="rgba(255,255,255,.5)"></use></g><g transform="translate(150 150)"><g id="altitude-visual" class="svelte-19kj2zw"><circle r="1" fill="#FFF"></circle><path d="M-70 0 -10 0 A 10 10 0 0 0 10 0 " fill="none" stroke-width="1.2" stroke="#FFF"></path><text id="altitude-text" text-anchor="middle" transform="translate(-45 -5)" fill="#FFF" font-size="15"> </text></g></g><g transform="translate(150 150)"><path d="M-10 0 A 10 10 0 0 0 10 0 L 70 0" fill="none" stroke-width="1.22" stroke="#FFF"></path><path d="M -4,-87 0,-100 4,-87z" fill="#FFF"></path><text id="azimuth-text" transform="translate(0 -70)" text-anchor="middle" fill="#FFF" font-size="15"> </text></g><g transform="translate(150 -390)"><g id="compass" class="svelte-19kj2zw"><circle r="400" class="grade svelte-19kj2zw" stroke-dasharray="1 5.98131701" stroke-width="20"></circle><circle r="400" class="grade svelte-19kj2zw" stroke-dasharray="1 33.90658504" stroke-width="30"></circle><circle r="400" class="grade svelte-19kj2zw" stroke-dasharray="1 103.71975512" stroke-width="40"></circle><circle r="400" fill="none" stroke-dasharray="1 156.07963268" stroke="#F00" stroke-width="40"></circle><text class="cmp-text svelte-19kj2zw" transform="rotate(0) translate(0 432)">N</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-15) translate(0 432)">15</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-30) translate(0 432)">30</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-45) translate(0 432)">45</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-60) translate(0 432)">60</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-75) translate(0 432)">75</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-90) translate(0 432)">E</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-105) translate(0 432)">105</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-120) translate(0 432)">120</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-135) translate(0 432)">135</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-150) translate(0 432)">150</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-165) translate(0 432)">165</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-180) translate(0 432)">S</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-195) translate(0 432)">195</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-210) translate(0 432)">210</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-225) translate(0 432)">225</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-240) translate(0 432)">240</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-255) translate(0 432)">255</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-270) translate(0 432)">W</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-285) translate(0 432)">285</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-300) translate(0 432)">300</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-315) translate(0 432)">315</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-330) translate(0 432)">330</text><text class="cmp-text svelte-19kj2zw" transform="rotate(-345) translate(0 432)">345</text><text class="cmp-text-sm left svelte-19kj2zw" transform="rotate(0) translate(0 422)">0</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-5) translate(0 422)">5</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-10) translate(0 422)">10</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-20) translate(0 422)">20</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-25) translate(0 422)">25</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-22.5) translate(0 422)">NNE</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-35) translate(0 422)">35</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-40) translate(0 422)">40</text><text class="cmp-text-sm left svelte-19kj2zw" transform="rotate(-45) translate(0 422)">NE</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-50) translate(0 422)">50</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-55) translate(0 422)">55</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-65) translate(0 422)">65</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-70) translate(0 422)">70</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-67.5) translate(0 422)">NEE</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-80) translate(0 422)">80</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-85) translate(0 422)">85</text><text class="cmp-text-sm left svelte-19kj2zw" transform="rotate(-90) translate(0 422)">90</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-95) translate(0 422)">95</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-95) translate(0 422)">95</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-100) translate(0 422)">100</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-110) translate(0 422)">110</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-112.5) translate(0 422)">SEE</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-115) translate(0 422)">115</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-125) translate(0 422)">125</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-130) translate(0 422)">130</text><text class="cmp-text-sm left svelte-19kj2zw" transform="rotate(-135) translate(0 422)">SE</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-140) translate(0 422)">140</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-145) translate(0 422)">145</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-155) translate(0 422)">155</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-157.5) translate(0 422)">SSE</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-160) translate(0 422)">160</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-170) translate(0 422)">170</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-175) translate(0 422)">175</text><text class="cmp-text-sm left svelte-19kj2zw" transform="rotate(-180) translate(0 422)">180</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-185) translate(0 422)">185</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-190) translate(0 422)">190</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-200) translate(0 422)">200</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-202.5) translate(0 422)">SSW</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-205) translate(0 422)">205</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-215) translate(0 422)">215</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-220) translate(0 422)">220</text><text class="cmp-text-sm left svelte-19kj2zw" transform="rotate(-225) translate(0 422)">SW</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-230) translate(0 422)">230</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-235) translate(0 422)">235</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-245) translate(0 422)">245</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-247.5) translate(0 422)">SWW</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-250) translate(0 422)">250</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-260) translate(0 422)">260</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-265) translate(0 422)">265</text><text class="cmp-text-sm left svelte-19kj2zw" transform="rotate(-270) translate(0 422)">270</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-275) translate(0 422)">275</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-280) translate(0 422)">280</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-290) translate(0 422)">290</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-292.5) translate(0 422)">NWW</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-295) translate(0 422)">295</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-305) translate(0 422)">305</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-310) translate(0 422)">310</text><text class="cmp-text-sm left svelte-19kj2zw" transform="rotate(-315) translate(0 422)">NW</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-320) translate(0 422)">320</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-325) translate(0 422)">325</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-335) translate(0 422)">335</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-340) translate(0 422)">340</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-350) translate(0 422)">350</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-355) translate(0 422)">355</text><text class="cmp-text-sm svelte-19kj2zw" transform="rotate(-337.5) translate(0 422)">NNW</text></g></g></svg></div>');function de(a,t){I(t,!1);let s=R(),e=R(),r=R(),n=R();const l=Lt.subscribe(m=>{const O=m.f+m.mpf,b=(m.mpf-m.mpf/Math.pow(1.5/m.mpf*O+1,2))/m.mpf;C(s,(1-b)*133),C(e,m.deg_x),C(r,m.deg_y),C(n,w(r)/90*400)});J(()=>{l&&l()}),V();var o=ce(),i=x(o),d=E(x(i),4),u=x(d);f(d);var p=E(d),c=E(p,2),k=x(c),h=E(x(k),2),F=x(h);f(h),f(k),f(c);var g=E(c),y=E(x(g),2),j=x(y);f(y),f(g);var z=E(g),v=x(z);f(z),f(i),f(o),N(()=>{D(u,"style",`y:${w(s)??""}%`),D(p,"style",`transform: translate(0, ${w(n)??""}px)`),D(k,"style",`transform: rotate(${w(r)??""}deg)`),U(F,`∠ ${w(r)??""}°`),U(j,`${w(e)??""}°`),D(v,"transform",`rotate(${w(e)??""})`)}),_(a,o),P()}var he=T('<div id="camera-stream" class="svelte-nq3iur"><img id="telescope-stream" alt="Telescope stream" width="640" height="480" class="svelte-nq3iur"></div>');function ue(a,t){I(t,!1);let s=R("starfield.jpg");X(()=>{C(s,"http://192.168.178.38:7777/stream.mjpg")}),V();var e=he(),r=x(e);f(e),N(()=>D(r,"src",w(s))),_(a,e),P()}const me=(a,t)=>{a.preventDefault(),C(t,K(w(t)==="horizon"?"cam1":"horizon"))};var fe=T('<div class="uk-card visuals svelte-dynqld"><a href="/"><!></a></div>');function ve(a){let t=it("horizon");var s=fe(),e=x(s);e.__click=[me,t];var r=x(e);S(r,()=>w(t)==="horizon",n=>{de(n,{})},n=>{var l=q(),o=G(l);S(o,()=>w(t)==="cam1",i=>{ue(i,{})},null,!0),_(n,l)}),f(e),f(s),_(a,s)}Q(["click"]);function Z(a,t){fetch(""+a).then(e=>e.json()).then(e=>{t(e)})}class xe{constructor(t,s){this.stick=t,this.stick&&(this.callback=s,this.dragStart=null,this.touchId=null,this.maxDistance=200,this.deadZone=8,this.active=!1,this.value={x:0,y:0},this.counter=0,this.prev={x:0,y:0},this.debounceTimer=null,this.debounceTimeout=50,this.stick.addEventListener("mousedown",e=>{this._handleDown(e)}),this.stick.addEventListener("touchstart",e=>{this._handleDown(e)}),document.addEventListener("mousemove",e=>{this._handleMove(e)},{passive:!1}),document.addEventListener("touchmove",e=>{this._handleMove(e)},{passive:!1}),document.addEventListener("mouseup",e=>{this._handleUp(e)}),document.addEventListener("touchend",e=>{this._handleUp(e)}))}destroy(){this.stick.removeEventListener("mousedown",t=>{this._handleDown(t)}),this.stick.removeEventListener("touchstart",t=>{this._handleDown(t)}),document.removeEventListener("mousemove",t=>{this._handleMove(t)}),document.removeEventListener("touchmove",t=>{this._handleMove(t)}),document.removeEventListener("mouseup",t=>{this._handleUp(t)}),document.removeEventListener("touchend",t=>{this._handleUp(t)})}_handleDown(t){this.active=!0,this.stick.style.transition="0s",t.preventDefault(),this.dragStart=t.changedTouches?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:{x:t.clientX,y:t.clientY},t.changedTouches&&(this.touchId=t.changedTouches[0].identifier)}_handleMove(t){if(!this.active)return;let s=null;if(t.changedTouches){for(let g=0;g<t.changedTouches.length;g++)this.touchId===t.changedTouches[g].identifier&&(s=g,t.clientX=t.changedTouches[g].clientX,t.clientY=t.changedTouches[g].clientY);if(s==null)return}const e=this.stick.getBoundingClientRect(),r=e?Math.round(16e3/e.width)/100:1,n=t.clientX-this.dragStart.x,l=t.clientY-this.dragStart.y,o=Math.atan2(l,n),i=Math.min(this.maxDistance,Math.hypot(n,l)*r),d=i*Math.cos(o),u=i*Math.sin(o);this.stick.style.transform=`translate(${d}px, ${u}px)`;const p=i<this.deadZone?0:this.maxDistance/(this.maxDistance-this.deadZone)*(i-this.deadZone),c=p*Math.cos(o),k=p*Math.sin(o),h=parseFloat((c/this.maxDistance).toFixed(4)),F=parseFloat((k/this.maxDistance).toFixed(4));this.value={x:h,y:F},this._loop()}_handleUp(t){this.active&&(t.changedTouches&&this.touchId!==t.changedTouches[0].identifier||(this.stick.style.transition=".2s",this.stick.style.transform="translate3d(0px, 0px, 0px)",this.value={x:0,y:0},this.touchId=null,this.active=!1))}_sendUpdate(){const t=Math.round(511.5+this.value.x*511.5),s=Math.round(511.5+this.value.y*511.5);this.callback(`/joystick/${t}/${s}`)}_debounce(t){return(...s)=>{clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{t(...s)},this.debounceTimeout)}}_update(){(this.value.x!==this.prev.x||this.value.y!==this.prev.y)&&(this.prev={...this.value},this._debounce(()=>{this._sendUpdate()})())}_loop(){this.active?this.frame=requestAnimationFrame(()=>{this._loop()}):cancelAnimationFrame(this.frame),this._update()}}class pe{constructor(t,s){this.stick=t,this.stick&&(this.callback=s,this.dragStart=null,this.touchId=null,this.maxDistance=230,this.deadZone=8,this.active=!1,this.value={f:0},this.counter=0,this.prev={f:0},this.debounceTimer=null,this.debounceTimeout=50,this.stick.addEventListener("mousedown",e=>{this._handleDown(e)}),this.stick.addEventListener("touchstart",e=>{this._handleDown(e)}),document.addEventListener("mousemove",e=>{this._handleMove(e)},{passive:!1}),document.addEventListener("touchmove",e=>{this._handleMove(e)},{passive:!1}),document.addEventListener("mouseup",e=>{this._handleUp(e)}),document.addEventListener("touchend",e=>{this._handleUp(e)}))}destroy(){this.stick.removeEventListener("mousedown",t=>{this._handleDown(t)}),this.stick.removeEventListener("touchstart",t=>{this._handleDown(t)}),document.removeEventListener("mousemove",t=>{this._handleMove(t)}),document.removeEventListener("touchmove",t=>{this._handleMove(t)}),document.removeEventListener("mouseup",t=>{this._handleUp(t)}),document.removeEventListener("touchend",t=>{this._handleUp(t)})}_handleDown(t){this.active=!0,this.stick.style.transition="0s",t.preventDefault(),this.dragStart=t.changedTouches?{y:t.changedTouches[0].clientY}:{y:t.clientY},t.changedTouches&&(this.touchId=t.changedTouches[0].identifier)}_handleMove(t){if(!this.active)return;t.preventDefault();let s=null;if(t.changedTouches){for(let i=0;i<t.changedTouches.length;i++)this.touchId===t.changedTouches[i].identifier&&(s=i,t.clientY=t.changedTouches[i].clientY);if(s==null)return}const e=this.stick.getBoundingClientRect(),r=e?Math.round(1e4/e.width)/100:1,n=t.clientY-this.dragStart.y,l=n>=0?Math.min(this.maxDistance,n*r):Math.max(-this.maxDistance,n*r);this.stick.style.transform=`translateY(${l}px)`;const o=Math.abs(l)>this.deadZone?parseFloat((l/this.maxDistance).toFixed(4)):0;this.value={f:o},this._loop()}_handleUp(t){this.active&&(t.preventDefault(),!(t.changedTouches&&this.touchId!==t.changedTouches[0].identifier)&&(this.stick.style.transition=".2s",this.stick.style.transform="translateY(0px)",this.value={f:0},this.touchId=null,this.active=!1))}_sendUpdate(){const t=Math.round(511.5-this.value.f*511.5);this.callback(`/focus/${t}`)}_debounce(t){return(...s)=>{clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{t(...s)},this.debounceTimeout)}}_update(){this.value.f!==this.prev.f&&(this.prev={...this.value},this._debounce(()=>{this._sendUpdate()})())}_loop(){this.active?this.frame=requestAnimationFrame(()=>{this._loop()}):cancelAnimationFrame(this.frame),this._update()}}var ge=A('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 781 710" class="svelte-1ec61be"><defs><circle id="joys-def-cir1" r="280" cy="0"></circle><circle id="joys-def-cir2" r="80" cy="0"></circle><path id="joys-def-arrow" d="M0 -120 -40 -100 40 -100z"></path><rect id="joys-def-slider" width="70" height="560" transform="translate(350 -280)" rx="15" ry="15"></rect><rect id="joys-def-slide" width="100" height="100" transform="translate(335 -50)" rx="15" ry="15"></rect></defs><g id="joys" transform="translate(320 355)" class="svelte-1ec61be"><use id="joys-plate" href="#joys-def-cir1" class="svelte-1ec61be"></use><use id="joys-arrow-top" href="#joys-def-arrow" class="svelte-1ec61be"></use><use id="joys-arrow-right" href="#joys-def-arrow" transform="rotate(90)" class="svelte-1ec61be"></use><use id="joys-arrow-left" href="#joys-def-arrow" transform="rotate(-90)" class="svelte-1ec61be"></use><use id="joys-arrow-bottom" href="#joys-def-arrow" transform="rotate(180)" class="svelte-1ec61be"></use><use id="joys-stick" href="#joys-def-cir2" style="transform: translate(0px, 0px)" class="svelte-1ec61be"></use><use id="joys-slider" href="#joys-def-slider" class="svelte-1ec61be"></use><use id="joys-slide" href="#joys-def-slide" style="transform: translateY(0px)" class="svelte-1ec61be"></use></g></svg>');function we(a,t){I(t,!1);let s=null,e=null;X(()=>{s=new xe(document.getElementById("joys-stick"),n=>{Z(n,l=>{console.log("SVELTE Joystick",l)})}),e=new pe(document.getElementById("joys-slide"),n=>{Z(n,l=>{console.log("SVELTE Focus",l)})})}),J(()=>{s&&s.hasOwnProperty("destroy")&&s.destroy(),e&&e.hasOwnProperty("destroy")&&e.destroy()}),V();var r=ge();_(a,r),P()}class ke{constructor(t,s){if(this.adjust=t,this.adjust){this.callback=s;const e=8e4/360;this.axisSteps={lg:Math.round(e),md:Math.round(e/10),sm:Math.round(e/100)},this.adjust.addEventListener("mouseup",r=>{this.sendCommand(r.target.dataset)})}}destroy(){this.adjust.removeEventListener("mouseup",t=>{this.sendCommand(t.target.dataset)})}sendCommand(t){let s=t==null?void 0:t.dir,e=t==null?void 0:t.len;s&&e&&typeof this.axisSteps[e]=="number"&&(e=this.axisSteps[e],["closer","further"].indexOf(s)>=0&&(e=s==="closer"?-e:e,s="focus"),this.callback(`/adjust/${s}/${e}`))}}var _e=A('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 781 710" class="svelte-1uguiw2"><defs><path id="arr1" d="M45 45 5 45 10 95 95 95 95 10 45 5z"></path><path id="arr2" d="M105 105 11 105 17 165 165 165 165 17 105 11z"></path><path id="arr3" d="M175 175 18 175 25 245 245 245 245 25 175 18z"></path><circle id="cir1" r="44" cy="73"></circle><path id="cir2" d="M-54 73 A 75 75 0 1 0 54 73 A 54 54 0 0 1 -54 73z"></path><path id="cir3" d="M-85 125 A 108 108 0 1 0 85 125 A 54 54 0 0 1 -85 125z"></path></defs><g id="adjust" transform="translate(355 355)" class="svelte-1uguiw2"><g transform="rotate(135)"><use href="#arr1" data-dir="left" data-len="sm" class="svelte-1uguiw2"></use><use href="#arr2" data-dir="left" data-len="md" class="svelte-1uguiw2"></use><use href="#arr3" data-dir="left" data-len="lg" class="svelte-1uguiw2"></use></g><g transform="rotate(-45)"><use href="#arr1" data-dir="right" data-len="sm" class="svelte-1uguiw2"></use><use href="#arr2" data-dir="right" data-len="md" class="svelte-1uguiw2"></use><use href="#arr3" data-dir="right" data-len="lg" class="svelte-1uguiw2"></use></g><g transform="rotate(-135)"><use href="#arr1" data-dir="up" data-len="sm" class="svelte-1uguiw2"></use><use href="#arr2" data-dir="up" data-len="md" class="svelte-1uguiw2"></use><use href="#arr3" data-dir="up" data-len="lg" class="svelte-1uguiw2"></use></g><g transform="rotate(45)"><use href="#arr1" data-dir="down" data-len="sm" class="svelte-1uguiw2"></use><use href="#arr2" data-dir="down" data-len="md" class="svelte-1uguiw2"></use><use href="#arr3" data-dir="down" data-len="lg" class="svelte-1uguiw2"></use></g><g transform="translate(360 -50) rotate(165)"><use href="#cir1" data-dir="further" data-len="sm" class="svelte-1uguiw2"></use><use href="#cir2" data-dir="further" data-len="md" class="svelte-1uguiw2"></use><use href="#cir3" data-dir="further" data-len="lg" class="svelte-1uguiw2"></use></g><g transform="translate(360 50) rotate(15)"><use href="#cir1" data-dir="closer" data-len="sm" class="svelte-1uguiw2"></use><use href="#cir2" data-dir="closer" data-len="md" class="svelte-1uguiw2"></use><use href="#cir3" data-dir="closer" data-len="lg" class="svelte-1uguiw2"></use></g></g></svg>');function ye(a,t){I(t,!1);let s=null;X(()=>{s=new ke(document.getElementById("adjust"),r=>{Z(r,n=>{console.log("SVELTE Adjust",n)})})}),J(()=>{s&&s.hasOwnProperty("destroy")&&s.destroy()}),V();var e=_e();_(a,e),P()}const je=(a,t)=>{C(t,K(w(t)==="mov"?"adj":"mov"))};var ze=T('<div class="joystick-wrapper svelte-5x5bew"><!> <button class="button svelte-5x5bew" type="button"> </button></div>');function Fe(a){let t=it("mov");var s=ze(),e=x(s);S(e,()=>w(t)==="mov",l=>{we(l,{})},l=>{ye(l,{})});var r=E(e,2);r.__click=[je,t];var n=x(r,!0);f(r),f(s),N(()=>U(n,w(t)==="mov"?"ADJ":"MOV")),_(a,s)}Q(["click"]);var Ee=A('<polygon points="18.65 11.35 10 2.71 1.35 11.35 0.65 10.65 10 1.29 19.35 10.65"></polygon><polygon points="15 4 18 4 18 7 17 7 17 5 15 5"></polygon><polygon points="3 11 4 11 4 18 7 18 7 12 12 12 12 18 16 18 16 11 17 11 17 19 11 19 11 13 8 13 8 19 3 19"></polygon>',1),be=A('<path fill="none" stroke="#000" d="M1,10.5 L19,10.5"></path><path fill="none" stroke="#000" d="M2.35,15.5 L17.65,15.5"></path><path fill="none" stroke="#000" d="M2.35,5.5 L17.523,5.5"></path><path fill="none" stroke="#000" d="M10,19.46 L9.98,19.46 C7.31,17.33 5.61,14.141 5.61,10.58 C5.61,7.02 7.33,3.83 10,1.7 C10.01,1.7 9.99,1.7 10,1.7 L10,1.7 C12.67,3.83 14.4,7.02 14.4,10.58 C14.4,14.141 12.67,17.33 10,19.46 L10,19.46 L10,19.46 L10,19.46 Z"></path><circle fill="none" stroke="#000" cx="10" cy="10.5" r="9"></circle>',1),Me=A('<circle fill="none" stroke="#000" cx="10" cy="10" r="7.5"></circle><line fill="none" stroke="#000" x1="10" x2="10" y2="8"></line><line fill="none" stroke="#000" x1="10" y1="12" x2="10" y2="20"></line><line fill="none" stroke="#000" y1="10" x2="8" y2="10"></line><line fill="none" stroke="#000" x1="12" y1="10" x2="20" y2="10"></line>',1),Te=A('<svg viewBox="0 0 20 20"><!></svg>');function De(a,t){let s=$(t,"size",3,1),e=Qt(()=>Math.round(20*s()));var r=Te(),n=x(r);S(n,()=>t.type==="home",l=>{var o=Ee();rt(2),_(l,o)},l=>{var o=q(),i=G(o);S(i,()=>t.type==="polaris",d=>{var u=be();rt(4),_(d,u)},d=>{var u=Me();rt(4),_(d,u)},!0),_(l,o)}),f(r),N(()=>{D(r,"width",w(e)),D(r,"height",w(e))}),_(a,r)}var Le=(a,t,s)=>t(a,`/position/${w(s).id}`),Ce=T('<li><a><span class="uk-icon" uk-icon=""><!></span> <span> </span></a></li>'),Se=T('<div class="pos-wrapper uk-padding-small"><div id="nav-geo"></div> <ul id="nav-nav" class="uk-iconnav uk-iconnav-vertical"></ul></div>');function Ae(a){let t=K({geo:{addr:"Wischhofsweg 4",lat:53.606071,lon:9.902575},base:[{id:"home",name:"Home",pos:{x:-23900,y:0,f:500}},{id:"polaris",name:"Polaris",pos:{x:0,y:11912,f:600}},{id:"1",name:"Elisabeth Kirche",pos:{x:-3e3,y:250,f:400}},{id:"2",name:"CCH Hamburg",pos:{x:-15e3,y:-1250,f:100}}]});const s=(n,l)=>{n.preventDefault(),console.log("SVELTE callback",l)};var e=Se(),r=E(x(e),2);ct(r,21,()=>t.base,Tt,(n,l)=>{var o=Ce(),i=x(o);i.__click=[Le,s,l];var d=x(i),u=x(d);De(u,{get type(){return w(l).id},size:1.35}),f(d);var p=E(d,2),c=x(p,!0);f(p),f(i),f(o),N(()=>{D(i,"href",`/position/${w(l).id}`),U(c,w(l).name)}),_(n,o)}),f(r),f(e),_(a,e)}Q(["click"]);class Ie{constructor(t,s,e){this.slide=t,this.slide&&(this.callback=s,this.dragStart=null,this.touchId=null,this.maxDistance=690,this.precision=6,this.active=!1,this.value=0,this.counter=0,this.prev=0,e=parseFloat(e),e=e>0?Math.min(e,1):0,this.currDistance=e*this.maxDistance,this.setHandleValue(this.currDistance),this.progressDistance=0,this.slide.addEventListener("mousedown",r=>{this._handleDown(r)}),this.slide.addEventListener("touchstart",r=>{this._handleDown(r)}),document.addEventListener("mousemove",r=>{this._handleMove(r)},{passive:!1}),document.addEventListener("touchmove",r=>{this._handleMove(r)},{passive:!1}),document.addEventListener("mouseup",r=>{this._handleUp(r)}),document.addEventListener("touchend",r=>{this._handleUp(r)}))}destroy(){this.slide.removeEventListener("mousedown",t=>{this._handleDown(t)}),this.slide.removeEventListener("touchstart",t=>{this._handleDown(t)}),document.removeEventListener("mousemove",t=>{this._handleMove(t)}),document.removeEventListener("touchmove",t=>{this._handleMove(t)}),document.removeEventListener("mouseup",t=>{this._handleUp(t)}),document.removeEventListener("touchend",t=>{this._handleUp(t)})}_sendUpdate(){const t=this.value;this.callback(t)}_handleDown(t){this.active=!0,this.slide.style.transition="0s",t.preventDefault(),this.dragStart=t.changedTouches?t.changedTouches[0].clientX:t.clientX,t.changedTouches&&(this.touchId=t.changedTouches[0].identifier)}_handleMove(t){if(!this.active)return;t.preventDefault();let s=null;if(t.changedTouches){for(let o=0;o<t.changedTouches.length;o++)this.touchId===t.changedTouches[o].identifier&&(s=o,t.clientX=t.changedTouches[o].clientX);if(s==null)return}const e=this.slide.getBoundingClientRect(),r=e?Math.round(6e3/e.width)/100:1,n=this.currDistance+(t.clientX-this.dragStart)*r,l=n>=0?Math.min(this.maxDistance,n):0;this.progressDistance=l,this.setHandleValue(l)}setHandleValue(t){this.slide.style.transform=`translateX(${t}px)`,this.value=parseFloat((t/this.maxDistance).toFixed(this.precision))}_handleUp(t){this.active&&(t.preventDefault(),!(t.changedTouches&&this.touchId!==t.changedTouches[0].identifier)&&(this._sendUpdate(),this.currDistance=this.progressDistance,this.touchId=null,this.active=!1))}}var Ne=A('<svg viewBox="0 0 780 120"><rect class="slider svelte-1sa3yok" width="720" height="30" x="30" y="50" rx="15" ry="15"></rect><text class="label svelte-1sa3yok" x="40" y="25"> </text><g transform="translate(45 65)"><circle class="slide svelte-1sa3yok" r="30"></circle></g></svg>');function Pe(a,t){I(t,!0);const s=$(t,"value",3,0),e=$(t,"minValue",3,0),r=$(t,"maxValue",3,10),n=$(t,"steps",3,1),l=r()-e(),o=(s()-e())/l,i=u(n());let d=null;X(()=>{d=new Ie(document.getElementById("slider_slide_"+t.id),g=>{const y=l*g+e(),j=parseFloat((Math.round(y/n())*n()).toFixed(i));typeof t.callback=="function"&&t.callback(t.id,j)},o)}),J(()=>{d&&d.hasOwnProperty("destroy")&&d.destroy()});function u(g){if(!isFinite(g))return 0;let y=1,j=0;for(;Math.round(g*y)/y!==g;)y*=10,j+=1;return j}var p=Ne(),c=E(x(p)),k=x(c,!0);f(c);var h=E(c),F=x(h);f(h),f(p),N(()=>{U(k,t.name),D(F,"id","slider_slide_"+t.id)}),_(a,p),P()}var Ue=T('<div class="camera-options svelte-4mjct0"></div>');function Ve(a,t){I(t,!1);const s=ee(),e=()=>se(jt,"$camControls",s),r=(l,o)=>{jt.update(i=>i.map(d=>d.id===l?{...d,value:o}:{...d})),Z(`/cam/ctrl/${l}/${o}`,i=>{console.log("SVELTE CamCtrl",i)})};V();var n=Ue();ct(n,7,e,l=>l.name,(l,o,i)=>{Pe(l,te(()=>w(o),{get index(){return w(i)},callback:r}))}),f(n),_(a,n),P()}var Oe=(a,t,s)=>t(a,w(s).id),Be=T('<li><a href="#"> </a></li>'),Ye=T('<div class="uk-card tools-wrapper svelte-1v4no6k"><ul id="tool-selector" class="uk-tab"></ul> <div class="tools svelte-1v4no6k"><!></div></div>');function He(a){const t=[{id:"manual",name:"Manual"},{id:"position",name:"Position"},{id:"camera",name:"Camera"}];let s=it("manual");const e=(i,d)=>{i.preventDefault(),C(s,K(d))};var r=Ye(),n=x(r);ct(n,21,()=>t,Tt,(i,d)=>{var u=Be(),p=x(u);p.__click=[Oe,e,d];var c=x(p,!0);f(p),f(u),N(()=>{oe(u,w(s)===w(d).id?"uk-active":""),U(c,w(d).name)}),_(i,u)}),f(n);var l=E(n,2),o=x(l);S(o,()=>w(s)==="manual",i=>{Fe(i)},i=>{var d=q(),u=G(d);S(u,()=>w(s)==="position",p=>{Ae(p)},p=>{var c=q(),k=G(c);S(k,()=>w(s)==="camera",h=>{Ve(h,{})},null,!0),_(p,c)},!0),_(i,d)}),f(l),f(r),_(a,r)}Q(["click"]);var Re=T('<div class="grid-container svelte-1lldtt8"><div class="svelte-1lldtt8"><!></div> <div class="svelte-1lldtt8"><!></div></div>');function Je(a,t){I(t,!1);let s;const e=d=>{s=d.connect("http://192.168.178.38:5000"),s.on("connect",()=>{console.log("Websocket connected.")}),s.on("message",u=>{typeof u=="object"&&!Array.isArray(u)&&u!==null&&Lt.update(p=>({...p,...u}))})};X(()=>{typeof io=="function"&&e(io)}),V();var r=Re(),n=x(r),l=x(n);ve(l),f(n);var o=E(n,2),i=x(o);He(i),f(o),f(r),_(a,r),P()}export{Je as component};
